{"version":3,"file":"static/js/draft.25ec6685.js","mappings":"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","sources":["components/dialog/add-reviewer-dialog.js","pages/review/history-list.js","draft.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport UserSelect from '../user-select';\nimport '../../css/add-reviewer-dialog.css';\n\nconst propTypes = {\n  showReviewerDialog: PropTypes.bool.isRequired,\n  draftID: PropTypes.string.isRequired,\n  toggleAddReviewerDialog: PropTypes.func.isRequired,\n  reviewers: PropTypes.array.isRequired\n};\n\nclass AddReviewerDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      reviewers: this.props.reviewers,\n      selectedOption: null,\n      errorMsg: [],\n      loading: false,\n    };\n    this.Options = [];\n  }\n\n  listReviewers = () => {\n    seafileAPI.listDraftReviewers(this.props.draftID).then((res) => {\n      this.setState({ reviewers: res.data.reviewers });\n    });\n  };\n\n  handleSelectChange = (option) => {\n    this.setState({ selectedOption: option });\n    this.Options = [];\n  };\n\n  addReviewers = () => {\n    if (this.state.selectedOption.length > 0 ) {\n      this.refs.reviewSelect.clearSelect();\n      let reviewers = [];\n      for (let i = 0; i < this.state.selectedOption.length; i ++) {\n        reviewers[i] = this.state.selectedOption[i].email;\n      }\n      this.setState({\n        loading: true,\n        errorMsg: [],\n      });\n      seafileAPI.addDraftReviewers(this.props.draftID, reviewers).then((res) => {\n        if (res.data.failed.length > 0) {\n          let errorMsg = [];\n          for (let i = 0 ; i < res.data.failed.length ; i++) {\n            errorMsg[i] = res.data.failed[i];\n          }\n          this.setState({ errorMsg: errorMsg });\n        }\n        this.setState({\n          selectedOption: null,\n          loading: false\n        });\n        if (res.data.success.length > 0) {\n          this.listReviewers();\n        }\n      }).catch(error => {\n        let errorMsg = Utils.getErrorMsg(error);\n        toaster.danger(errorMsg);\n      });\n    }\n  };\n\n  deleteReviewer = (event) => {\n    let reviewer = event.target.getAttribute('name');\n    seafileAPI.deleteDraftReviewer(this.props.draftID, reviewer).then((res) => {\n      if (res.data === 200) {\n        let newReviewers = [];\n        for (let i = 0; i < this.state.reviewers.length; i ++) {\n          if (this.state.reviewers[i].user_email !== reviewer) {\n            newReviewers.push(this.state.reviewers[i]);\n          }\n        }\n        this.setState({ reviewers: newReviewers });\n      }\n    }).catch(error => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  render() {\n    const toggleDialog = this.props.toggleAddReviewerDialog;\n    const { reviewers, errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Request a review')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Add new reviewer')}</p>\n          <div className='add-reviewer'>\n            <UserSelect\n              placeholder={gettext('Search users...')}\n              onSelectChange={this.handleSelectChange}\n              ref=\"reviewSelect\"\n              isMulti={true}\n              className='reviewer-select'\n            />\n            {(this.state.selectedOption && !this.state.loading)?\n              <Button color=\"secondary\" onClick={this.addReviewers}>{gettext('Submit')}</Button> :\n              <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n            }\n          </div>\n          {errorMsg.length > 0 &&\n            errorMsg.map((item, index = 0, arr) => {\n              return (\n                <p className=\"reviewer-select-error error\" key={index}>{errorMsg[index].email}\n                  {': '}{errorMsg[index].error_msg}</p>\n              );\n            })\n          }\n          {reviewers.length > 0 &&\n            reviewers.map((item, index = 0, arr) => {\n              return (\n                <div className=\"reviewer-select-info\" key={index}>\n                  <div className=\"d-flex\">\n                    <img className=\"avatar reviewer-select-avatar\" src={item.avatar_url} alt=\"\"/>\n                    <span className=\"reviewer-select-name ellipsis\">{item.user_name}</span>\n                  </div>\n                  <i className=\"fa fa-times\" name={item.user_email} onClick={this.deleteReviewer}></i>\n                </div>\n              );\n            })\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nAddReviewerDialog.propTypes = propTypes;\n\nexport default AddReviewerDialog;\n","/* eslint-disable linebreak-style */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Loading from '../../components/loading';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { draftRepoID, draftFilePath } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\n\nimport '../../css/file-history.css';\n\nmoment.locale(window.app.config.lang);\n\nclass HistoryList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.perPage = 25;\n    this.state = {\n      currentPage: 1,\n      loading: false\n    };\n  }\n\n  onClick = (event, key, preItem, currentItem)=> {\n    if (key === this.state.activeItem) return false;\n    this.props.onHistoryItemClick(currentItem, preItem, key);\n  };\n\n  onScroll = (event) => {\n    const clientHeight = event.target.clientHeight;\n    const scrollHeight = event.target.scrollHeight;\n    const scrollTop    = event.target.scrollTop;\n    const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n    if (isBottom) {\n      if (this.props.totalReversionCount > this.perPage * this.state.currentPage) {\n        let currentPage = this.state.currentPage + 1;\n        this.setState({\n          currentPage: currentPage,\n          loading : true\n        });\n        seafileAPI.listFileHistoryRecords(draftRepoID, draftFilePath, currentPage, this.perPage).then((res) => {\n          let currentHistoryList = Object.assign([], this.props.historyList);\n          this.props.onHistoryListChange([...currentHistoryList, ...res.data.data]);\n          this.setState({\n            loading : false\n          });\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"history-body\">\n        <ul onScroll={this.onScroll} className={'history-list-container'}>\n          {\n            this.props.historyList ?\n              this.props.historyList.map((item, index = 0, arr) => {\n                let preItemIndex = index + 1;\n                if (preItemIndex === arr.length) {\n                  preItemIndex = index;\n                }\n                return (\n                  <HistoryItem\n                    onClick={this.onClick}\n                    ctime={item.ctime}\n                    className={this.props.activeItem === index ? 'item-active': ''}\n                    name={item.creator_name}\n                    index={index}\n                    key={index}\n                    preItem={arr[preItemIndex]}\n                    currentItem={item}\n                  />\n                );\n              }) : <Loading/>\n          }\n          {\n            this.state.loading &&\n            <li className={'reloading-reversion'}><Loading /></li>\n          }\n        </ul>\n      </div>\n    );\n  }\n}\n\nclass HistoryItem extends React.Component {\n  render() {\n    let time = moment.parseZone(this.props.ctime).format('YYYY-MM-DD HH:mm');\n    return (\n      <li onClick={(event) => this.props.onClick(event, this.props.index, this.props.preItem, this.props.currentItem)} className={'history-list-item ' + this.props.className}>\n        <div className=\"history-info\">\n          <div className=\"time\">{time}</div>\n          <div className=\"owner\"><i className=\"squire-icon\"/><span>{this.props.name}</span></div>\n        </div>\n      </li>\n    );\n  }\n}\n\nHistoryItem.propTypes = {\n  index: PropTypes.number.isRequired,\n  currentItem: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired,\n  ctime: PropTypes.string.isRequired,\n  className: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  preItem: PropTypes.string.isRequired,\n};\n\nHistoryList.propTypes = {\n  historyList: PropTypes.array.isRequired,\n  onHistoryItemClick: PropTypes.func.isRequired,\n  onHistoryListChange: PropTypes.func.isRequired,\n  totalReversionCount: PropTypes.number.isRequired,\n  activeItem: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n};\n\nexport default HistoryList;\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport classnames from 'classnames';\nimport { Button, Tooltip, Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\n/* eslint-disable */\nimport Prism from 'prismjs';\n/* eslint-enable */\nimport { ReactEditor, DiffViewer } from '@seafile/seafile-editor';\nimport { siteRoot, gettext, draftOriginFilePath, draftFilePath, author, authorAvatar, originFileExists, draftFileExists, draftID, draftFileName, draftRepoID, draftStatus, draftPublishVersion, originFileVersion, filePermission, serviceURL, mediaUrl } from './utils/constants';\nimport { seafileAPI } from './utils/seafile-api';\nimport Loading from './components/loading';\nimport AddReviewerDialog from './components/dialog/add-reviewer-dialog';\nimport HistoryList from './pages/review/history-list';\nimport ModalPortal from './components/modal-portal';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/dirent-detail.css';\nimport './css/draft.css';\n\nconst URL = require('url-parse');\nvar moment = require('moment');\n\nconst { toDOMNode } = ReactEditor;\n\nclass Draft extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      draftContent: '',\n      draftOriginContent: '',\n      draftInfo: {},\n      isLoading: true,\n      isShowDiff: true,\n      showDiffTip: false,\n      activeTab: 'reviewInfo',\n      changedNodes: [],\n      originRepoName: '',\n      activeItem: null,\n      historyList: [],\n      showReviewerDialog: false,\n      reviewers: [],\n      draftStatus: draftStatus,\n    };\n    this.quote = '';\n    this.newIndex = null;\n    this.oldIndex = null;\n    this.changeIndex = -1;\n    this.range = null;\n  }\n\n  initialContent = () => {\n    switch(draftStatus) {\n      case 'open':\n        if (!draftFileExists) {\n          this.setState({\n            isLoading: false,\n            isShowDiff: false\n          });\n          return;\n        }\n\n        if (!originFileExists) {\n          seafileAPI.getFileDownloadLink(draftRepoID, draftFilePath)\n            .then(res => {\n              seafileAPI.getFileContent(res.data)\n                .then(res => {\n                  this.setState({\n                    draftContent: res.data,\n                    draftOriginContent: res.data,\n                    isLoading: false,\n                    isShowDiff: false\n                  });\n                });\n            });\n          return;\n        }\n        // eslint-disable-next-line\n        const hash = window.location.hash;\n        if (hash.indexOf('#history-') === 0) {\n          const currentCommitID = hash.slice(9, 49);\n          const preCommitID = hash.slice(50, 90);\n          let preItemFilePath, currentItemFilePath;\n          this.setState({\n            isLoading: false,\n            activeTab: 'history',\n          });\n          seafileAPI.listFileHistoryRecords(draftRepoID, draftFilePath, 1, 25).then((res) => {\n            const historyList = res.data.data;\n            this.setState({\n              historyList: historyList,\n              totalReversionCount: res.data.total_count\n            });\n            for (let i = 0, length = historyList.length; i < length; i++) {\n              if (preCommitID === historyList[i].commit_id) {\n                this.setState({\n                  activeItem: i\n                });\n                preItemFilePath = historyList[i].path;\n              }\n              if (currentCommitID === historyList[i].commit_id) {\n                currentItemFilePath = historyList[i].path;\n              }\n              if (preItemFilePath && currentItemFilePath) break;\n            }\n            axios.all([\n              seafileAPI.getFileRevision(draftRepoID, currentCommitID, currentItemFilePath),\n              seafileAPI.getFileRevision(draftRepoID, preCommitID, preItemFilePath)\n            ]).then(axios.spread((res1, res2) => {\n              axios.all([seafileAPI.getFileContent(res1.data), seafileAPI.getFileContent(res2.data)]).then(axios.spread((content1, content2) => {\n                this.setDiffViewerContent(content2.data, content1.data);\n              }));\n            }));\n            return;\n          });\n        } else {\n          axios.all([\n            seafileAPI.getFileDownloadLink(draftRepoID, draftFilePath),\n            seafileAPI.getFileDownloadLink(draftRepoID, draftOriginFilePath)\n          ]).then(axios.spread((res1, res2) => {\n            axios.all([\n              seafileAPI.getFileContent(res1.data),\n              seafileAPI.getFileContent(res2.data)\n            ]).then(axios.spread((draftContent, draftOriginContent) => {\n              this.setState({\n                draftContent: draftContent.data,\n                draftOriginContent: draftOriginContent.data,\n                isLoading: false\n              });\n              let that = this;\n              setTimeout(() => {\n                that.getChangedNodes();\n              }, 100);\n            }));\n          }));\n        }\n        break;\n      case 'published':\n        if (!originFileExists) {\n          this.setState({\n            isLoading: false,\n            isShowDiff: false\n          });\n          return;\n        }\n\n        // eslint-disable-next-line\n        let dl0 = siteRoot + 'repo/' + draftRepoID + '/' + draftPublishVersion + '/download?' + 'p=' + draftOriginFilePath;\n        // eslint-disable-next-line\n        let dl = siteRoot + 'repo/' + draftRepoID + '/' + originFileVersion + '/download?' + 'p=' + draftOriginFilePath;\n        axios.all([\n          seafileAPI.getFileContent(dl0),\n          seafileAPI.getFileContent(dl)\n        ]).then(axios.spread((draftContent, draftOriginContent) => {\n          this.setState({\n            draftContent: draftContent.data,\n            draftOriginContent: draftOriginContent.data,\n            isLoading: false,\n          });\n        }));\n        break;\n    }\n  };\n\n  onHistoryItemClick = (currentItem, preItem, activeItem) => {\n    const preCommitID = preItem.commit_id;\n    const currentCommitID = currentItem.commit_id;\n    const url = 'history-' + preCommitID + '-' + currentCommitID;\n    this.setURL(url);\n    this.setState({\n      activeItem: activeItem,\n      isLoading: true,\n    });\n    axios.all([\n      seafileAPI.getFileRevision(draftRepoID, currentCommitID, currentItem.path),\n      seafileAPI.getFileRevision(draftRepoID, preCommitID, preItem.path)\n    ]).then(axios.spread((res1, res2) => {\n      axios.all([seafileAPI.getFileContent(res1.data), seafileAPI.getFileContent(res2.data)]).then(axios.spread((content1,content2) => {\n        this.setDiffViewerContent(content1.data, content2.data);\n      }));\n    }));\n  };\n\n  onHistoryListChange = (historyList) => {\n    this.setState({historyList: historyList });\n  };\n\n  getOriginRepoInfo = () => {\n    seafileAPI.getRepoInfo(draftRepoID).then((res) => {\n      this.setState({ originRepoName: res.data.repo_name });\n    });\n  };\n\n  getDraftInfo = () => {\n    if (draftStatus === 'open') {\n      seafileAPI.getFileInfo(draftRepoID, draftFilePath).then((res) => {\n        this.setState({ draftInfo: res.data });\n      });\n    }\n  };\n\n  getChangedNodes = () => {\n    const nodes = this.refs.diffViewer.value;\n    let keys = [];\n    let lastDiffState = '';\n    nodes.forEach((node, index) => {\n      const diff_state = node.data['diff_state'];\n      if (diff_state === 'diff-added' && lastDiffState !== 'diff-added') {\n        keys.push(index);\n      } else if (diff_state === 'diff-removed' && lastDiffState !== 'diff-removed') {\n        keys.push(index);\n      } else if (diff_state === 'diff-replaced' && lastDiffState !== 'diff-replaced') {\n        keys.push(index);\n      }\n      lastDiffState = node.data.diff_state;\n    });\n    this.setState({\n      changedNodes: keys\n    });\n  };\n\n  scrollToChangedNode = (scroll) => {\n    if (this.state.changedNodes.length == 0) return;\n    if (scroll === 'up') { this.changeIndex++; } else { this.changeIndex--; }\n    if (this.changeIndex > this.state.changedNodes.length - 1) {\n      this.changeIndex = 0;\n    }\n    if (this.changeIndex < 0) {\n      this.changeIndex = this.state.changedNodes.length - 1;\n    }\n    const win = window;\n    let key = this.state.changedNodes[this.changeIndex];\n    let node = window.viewer.children[key];\n    let element = toDOMNode(window.viewer, node);\n    // fix code-block or tables\n    while (element.className.indexOf('diff-') === -1 && element.tagName !== 'BODY') {\n      element = element.parentNode;\n    }\n    const scroller = this.findScrollContainer(element, win);\n    const isWindow = scroller == win.document.body || scroller == win.document.documentElement;\n    if (isWindow) {\n      win.scrollTo(0, element.offsetTop);\n    } else {\n      scroller.scrollTop = element.offsetTop;\n    }\n  };\n\n  findScrollContainer = (element, window) => {\n    let parent = element.parentNode;\n    const OVERFLOWS = ['auto', 'overlay', 'scroll'];\n    let scroller;\n    while (!scroller) {\n      if (!parent.parentNode) break;\n      const style = window.getComputedStyle(parent);\n      const { overflowY } = style;\n      if (OVERFLOWS.includes(overflowY)) {\n        scroller = parent;\n        break;\n      }\n      parent = parent.parentNode;\n    }\n    if (!scroller) {\n      return window.document.body;\n    }\n    return scroller;\n  };\n\n  showDiffViewer = () => {\n    return (\n      <div>\n        {this.state.isShowDiff ?\n          <DiffViewer\n            scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            newMarkdownContent={this.state.draftContent}\n            oldMarkdownContent={this.state.draftOriginContent}\n            ref=\"diffViewer\"\n          /> :\n          <DiffViewer\n            scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            newMarkdownContent={this.state.draftContent}\n            oldMarkdownContent={this.state.draftContent}\n            ref=\"diffViewer\"\n          />\n        }\n      </div>\n    );\n  };\n\n  listReviewers = () => {\n    seafileAPI.listDraftReviewers(draftID).then((res) => {\n      this.setState({\n        reviewers: res.data.reviewers\n      });\n    });\n  };\n\n  onSwitchShowDiff = () => {\n    if (!this.state.isShowDiff) {\n      let that = this;\n      setTimeout(() => {\n        that.getChangedNodes();\n      }, 100);\n    }\n    this.setState({\n      isShowDiff: !this.state.isShowDiff,\n    });\n  };\n\n  toggleDiffTip = () => {\n    this.setState({\n      showDiffTip: !this.state.showDiffTip\n    });\n  };\n\n  toggleAddReviewerDialog = () => {\n    if (this.state.showReviewerDialog) {\n      this.listReviewers();\n    }\n    this.setState({\n      showReviewerDialog: !this.state.showReviewerDialog\n    });\n  };\n\n  showDiffButton = () => {\n    return (\n      <div className={'seafile-toggle-diff'}>\n        <label className=\"custom-switch\" id=\"toggle-diff\">\n          <input type=\"checkbox\" checked={this.state.isShowDiff && 'checked'}\n            name=\"option\" className=\"custom-switch-input\"\n            onChange={this.onSwitchShowDiff}/>\n          <span className=\"custom-switch-indicator\"></span>\n        </label>\n        <Tooltip placement=\"bottom\" isOpen={this.state.showDiffTip}\n          target=\"toggle-diff\" toggle={this.toggleDiffTip}>\n          {gettext('View diff')}</Tooltip>\n      </div>\n    );\n  };\n\n  onPublishDraft = () => {\n    seafileAPI.publishDraft(draftID).then(res => {\n      this.setState({\n        draftStatus: res.data.draft_status,\n      });\n    });\n  };\n\n  initialDiffViewerContent = () => {\n    seafileAPI.listFileHistoryRecords(draftRepoID, draftFilePath, 1, 25).then((res) => {\n      this.setState({\n        historyList: res.data.data,\n        totalReversionCount: res.data.total_count\n      });\n      if (res.data.data.length > 1) {\n        axios.all([\n          seafileAPI.getFileRevision(draftRepoID, res.data.data[0].commit_id, draftFilePath),\n          seafileAPI.getFileRevision(draftRepoID, res.data.data[1].commit_id, draftFilePath)\n        ]).then(axios.spread((res1, res2) => {\n          axios.all([seafileAPI.getFileContent(res1.data), seafileAPI.getFileContent(res2.data)]).then(axios.spread((content1,content2) => {\n            this.setState({\n              draftContent: content1.data,\n              draftOriginContent: content2.data\n            });\n          }));\n        }));\n      } else {\n        seafileAPI.getFileRevision(draftRepoID, res.data.data[0].commit_id, draftFilePath).then((res) => {\n          seafileAPI.getFileContent(res.data).then((content) => {\n            this.setState({\n              draftContent: content.data,\n              draftOriginContent: ''\n            });\n          });\n        });\n      }\n    });\n  };\n\n  setDiffViewerContent = (newContent, prevContent) => {\n    this.setState({\n      draftContent: newContent,\n      draftOriginContent: prevContent,\n      isLoading: false,\n    });\n  };\n\n  setURL = (newurl) => {\n    let url = new URL(window.location.href);\n    url.set('hash', newurl);\n    window.location.href = url.toString();\n  };\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      if (tab !== 'history' && window.location.hash) {\n        this.setURL('#');\n      }\n      if (tab == 'reviewInfo') {\n        this.initialContent();\n      } else if (tab == 'history') {\n        this.initialDiffViewerContent();\n      }\n      this.setState({\n        activeTab: tab\n      });\n    }\n  };\n\n  showNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item\">\n            <NavLink\n              className={classnames({ active: this.state.activeTab === 'reviewInfo' })}\n              onClick={() => { this.tabItemClick('reviewInfo');}}\n            >\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'history':\n        return (\n          <NavItem className=\"nav-item\">\n            <NavLink\n              className={classnames({ active: this.state.activeTab === 'history' })}\n              onClick={() => { this.tabItemClick('history');}}\n            >\n              <i className=\"fas fa-history\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  };\n\n  componentDidMount() {\n    this.getOriginRepoInfo();\n    this.getDraftInfo();\n    this.listReviewers();\n    this.initialContent();\n  }\n\n  renderDiffButton = () => {\n    switch(draftStatus) {\n      case 'open':\n        if (!draftFileExists || !originFileExists) {\n          return;\n        }\n        return this.showDiffButton();\n      case 'published':\n        if (!originFileExists) {\n          return;\n        }\n        return this.showDiffButton();\n    }\n  };\n\n  renderNavItems = () => {\n    switch (draftStatus) {\n      case 'open':\n        if (!draftFileExists) {\n          return (\n            <Nav tabs className=\"review-side-panel-nav\">\n              {this.showNavItem('info')}\n            </Nav>\n          );\n        }\n\n        return (\n          <Nav tabs className=\"review-side-panel-nav\">\n            {this.showNavItem('info')}\n            {this.showNavItem('history')}\n          </Nav>\n        );\n      case 'published':\n        if (!originFileExists) {\n          return (\n            <Nav tabs className=\"review-side-panel-nav\">\n              {this.showNavItem('info')}\n            </Nav>\n          );\n        }\n        return (\n          <Nav tabs className=\"review-side-panel-nav\">\n            {this.showNavItem('info')}\n          </Nav>\n        );\n    }\n  };\n\n  renderContent = () => {\n    switch(draftStatus) {\n      case 'open':\n        if (!draftFileExists) {\n          return <p className=\"error\">{gettext('Draft has been deleted.')}</p>;\n        }\n        return this.showDiffViewer();\n      case 'published':\n        if (!originFileExists) {\n          return <p className=\"error\">{gettext('Original file has been deleted.')}</p>;\n        }\n        return this.showDiffViewer();\n    }\n  };\n\n  render() {\n    const { draftInfo, reviewers, originRepoName, draftStatus } = this.state;\n    const draftLink = siteRoot + 'lib/' + draftRepoID + '/file' + draftFilePath + '?mode=edit';\n    const showPublishedButton = this.state.draftStatus == 'published';\n    const showPublishButton = this.state.draftStatus == 'open' && filePermission == 'rw';\n    const showEditButton = this.state.draftStatus == 'open' && filePermission == 'rw';\n    const time = moment(draftInfo.mtime * 1000).format('YYYY-MM-DD HH:mm');\n    const url = `${siteRoot}profile/${encodeURIComponent(draftInfo.last_modifier_email)}/`;\n    return(\n      <div className=\"wrapper\">\n        <div id=\"header\" className=\"header review\">\n          <div className=\"cur-file-info\">\n            <div className=\"info-item file-feature\">\n              <span className=\"sf2-icon-review\"></span>\n            </div>\n            <div>\n              <div className=\"info-item file-info\">\n                <span className=\"file-name\">{draftFileName}</span>\n                <span className=\"mx-2 file-review\">{gettext('Review')}</span>\n              </div>\n              {(!showPublishedButton && draftInfo.mtime) &&\n                <div className=\"last-modification\">\n                  <a href={url}>{draftInfo.last_modifier_name}</a><span className=\"mx-1\">{time}</span>\n                </div>\n              }\n            </div>\n          </div>\n          <div className=\"button-group\">\n            {this.renderDiffButton()}\n            {showEditButton &&\n              <a href={draftLink} className=\"mx-1\">\n                <Button className=\"file-operation-btn\" color=\"secondary\">{gettext('Edit Draft')}</Button>\n              </a>\n            }\n            {showPublishButton &&\n              <button className='btn btn-success file-operation-btn' title={gettext('Publish draft')} onClick={this.onPublishDraft}>\n                {gettext('Publish')}\n              </button>\n            }\n            {showPublishedButton &&\n              <button className='btn btn-success file-operation-btn' title={gettext('Published')} disabled>\n                {gettext('Published')}\n              </button>\n            }\n          </div>\n        </div>\n        <div id=\"main\" className=\"main\" ref=\"main\">\n          <div className=\"cur-view-container\">\n            <div className='cur-view-content' ref=\"viewContent\">\n              {this.state.isLoading ?\n                <div className=\"markdown-viewer-render-content article\">\n                  <Loading />\n                </div>\n                :\n                <div className=\"markdown-viewer-render-content article\">\n                  {this.renderContent()}\n                </div>\n              }\n            </div>\n            <div className=\"cur-view-right-part\">\n              <div className=\"review-side-panel\">\n                {this.renderNavItems()}\n                <TabContent activeTab={this.state.activeTab}>\n                  <TabPane tabId=\"reviewInfo\">\n                    <div className=\"review-side-panel-body\">\n                      <SidePanelReviewers\n                        reviewers={reviewers}\n                        toggleAddReviewerDialog={this.toggleAddReviewerDialog}/>\n                      <SidePanelAuthor/>\n                      {(this.state.isShowDiff === true && this.state.changedNodes.length > 0) &&\n                      <SidePanelChanges\n                        changedNumber={this.state.changedNodes.length}\n                        scrollToChangedNode={this.scrollToChangedNode}/>\n                      }\n                      <SidePanelOrigin originRepoName={originRepoName} draftInfo={draftInfo} draftStatus={draftStatus}/>\n                    </div>\n                  </TabPane>\n                  <TabPane tabId=\"history\" className=\"history\">\n                    <HistoryList\n                      activeItem={this.state.activeItem}\n                      historyList={this.state.historyList}\n                      totalReversionCount={this.state.totalReversionCount}\n                      onHistoryItemClick={this.onHistoryItemClick}\n                      onHistoryListChange={this.onHistoryListChange}\n                    />\n                  </TabPane>\n                </TabContent>\n              </div>\n            </div>\n          </div>\n        </div>\n        {this.state.showReviewerDialog &&\n          <ModalPortal>\n            <AddReviewerDialog\n              showReviewerDialog={this.state.showReviewerDialog}\n              toggleAddReviewerDialog={this.toggleAddReviewerDialog}\n              draftID={draftID}\n              reviewers={reviewers}\n            />\n          </ModalPortal>\n        }\n      </div>\n    );\n  }\n}\n\n\nclass SidePanelReviewers extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { reviewers } = this.props;\n    return (\n      <div className=\"review-side-panel-item\">\n        <div className=\"review-side-panel-header\">{gettext('Reviewers')}\n          <i className=\"fa fa-cog\" onClick={this.props.toggleAddReviewerDialog}></i>\n        </div>\n        {reviewers.length > 0 ?\n          reviewers.map((item, index = 0, arr) => {\n            return (\n              <div className=\"reviewer-info\" key={index}>\n                <img className=\"avatar review-side-panel-avatar\" src={item.avatar_url} alt=\"\"/>\n                <span className=\"reviewer-name ellipsis\">{item.user_name}</span>\n              </div>\n            );\n          })\n          :\n          <span>{gettext('No reviewer yet.')}</span>\n        }\n      </div>\n    );\n  }\n}\n\nconst sidePanelReviewersPropTypes = {\n  reviewers: PropTypes.array.isRequired,\n  toggleAddReviewerDialog: PropTypes.func.isRequired\n};\n\nSidePanelReviewers.propTypes = sidePanelReviewersPropTypes;\n\nclass SidePanelAuthor extends React.Component {\n  render() {\n    return (\n      <div className=\"review-side-panel-item\">\n        <div className=\"review-side-panel-header\">{gettext('Author')}</div>\n        <div className=\"author-info\">\n          <img className=\"avatar review-side-panel-avatar\" src={authorAvatar} alt=\"\"/>\n          <span className=\"author-name ellipsis\">{author}</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nclass SidePanelOrigin extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { draftStatus, originRepoName } = this.props;\n    const filePath = serviceURL + '/lib/' + draftRepoID + '/file' + draftOriginFilePath;\n    return (\n      <div className=\"dirent-table-container\">\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"25%\"></th><th width=\"75%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th className=\"align-text-top\">{gettext('Location')}</th>\n              <td>\n                {draftStatus === 'open' ?\n                  <span>{originRepoName}{draftFilePath}</span> :\n                  <a href={filePath} className=\"text-dark\">{filePath}</a>\n                }\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst SidePanelOriginPropTypes = {\n  originRepoName: PropTypes.string.isRequired,\n  draftStatus: PropTypes.string.isRequired,\n};\n\nSidePanelOrigin.propTypes = SidePanelOriginPropTypes;\n\nclass SidePanelChanges extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div className=\"review-side-panel-item\">\n        <div className=\"review-side-panel-header\">{gettext('Changes')}</div>\n        <div className=\"changes-info\">\n          <span>{gettext('Number of changes:')}{' '}{this.props.changedNumber}</span>\n          {this.props.changedNumber > 0 &&\n            <div>\n              <i className=\"fa fa-arrow-circle-up\" onClick={() => { this.props.scrollToChangedNode('down');}}></i>\n              <i className=\"fa fa-arrow-circle-down\" onClick={() => { this.props.scrollToChangedNode('up');}}></i>\n            </div>\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nconst sidePanelChangesPropTypes = {\n  changedNumber: PropTypes.number.isRequired,\n  scrollToChangedNode: PropTypes.func.isRequired\n};\n\nSidePanelChanges.propTypes = sidePanelChangesPropTypes;\n\n\nReactDom.render(<Draft />, document.getElementById('wrapper'));\n"],"names":["AddReviewerDialog","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","listReviewers","seafileAPI","listDraftReviewers","draftID","then","res","setState","reviewers","data","handleSelectChange","option","selectedOption","Options","addReviewers","state","length","refs","reviewSelect","clearSelect","i","email","loading","errorMsg","addDraftReviewers","failed","success","catch","error","Utils","getErrorMsg","toaster","danger","deleteReviewer","event","reviewer","target","getAttribute","deleteDraftReviewer","newReviewers","user_email","push","_createClass","key","value","_this2","toggleDialog","this","toggleAddReviewerDialog","_this$state","_jsxs","Modal","isOpen","toggle","children","_jsx","ModalHeader","gettext","ModalBody","className","UserSelect","placeholder","onSelectChange","ref","isMulti","Button","color","onClick","disabled","map","item","index","arguments","undefined","error_msg","src","avatar_url","alt","user_name","name","ModalFooter","React","moment","window","app","config","lang","HistoryList","preItem","currentItem","activeItem","onHistoryItemClick","onScroll","clientHeight","scrollHeight","scrollTop","totalReversionCount","perPage","currentPage","listFileHistoryRecords","draftRepoID","draftFilePath","currentHistoryList","Object","assign","historyList","onHistoryListChange","concat","_toConsumableArray","errMessage","arr","preItemIndex","HistoryItem","ctime","creator_name","Loading","_React$Component2","_super2","apply","_this3","time","format","URL","require","toDOMNode","ReactEditor","Draft","initialContent","draftStatus","draftFileExists","isLoading","isShowDiff","originFileExists","getFileDownloadLink","getFileContent","draftContent","draftOriginContent","hash","location","indexOf","preItemFilePath","currentItemFilePath","currentCommitID","slice","preCommitID","activeTab","total_count","commit_id","path","axios","all","getFileRevision","spread","res1","res2","content1","content2","setDiffViewerContent","draftOriginFilePath","that","_assertThisInitialized","setTimeout","getChangedNodes","dl0","siteRoot","draftPublishVersion","dl","originFileVersion","url","setURL","getOriginRepoInfo","getRepoInfo","originRepoName","repo_name","getDraftInfo","getFileInfo","draftInfo","nodes","diffViewer","keys","lastDiffState","forEach","node","diff_state","changedNodes","scrollToChangedNode","scroll","changeIndex","win","viewer","element","tagName","parentNode","scroller","findScrollContainer","document","body","documentElement","scrollTo","offsetTop","parent","OVERFLOWS","overflowY","getComputedStyle","includes","showDiffViewer","DiffViewer","scriptSource","mediaUrl","newMarkdownContent","oldMarkdownContent","onSwitchShowDiff","toggleDiffTip","showDiffTip","showReviewerDialog","showDiffButton","id","type","checked","onChange","Tooltip","placement","onPublishDraft","publishDraft","draft_status","initialDiffViewerContent","content","newContent","prevContent","newurl","href","set","toString","tabItemClick","tab","showNavItem","showTab","NavItem","NavLink","classnames","active","renderDiffButton","renderNavItems","Nav","tabs","renderContent","quote","newIndex","oldIndex","range","draftLink","showPublishedButton","showPublishButton","filePermission","showEditButton","mtime","encodeURIComponent","last_modifier_email","draftFileName","last_modifier_name","title","TabContent","TabPane","tabId","SidePanelReviewers","SidePanelAuthor","SidePanelChanges","changedNumber","SidePanelOrigin","ModalPortal","_React$Component3","_super3","authorAvatar","author","_React$Component4","_super4","_this$props","filePath","serviceURL","width","_React$Component5","_super5","ReactDom","getElementById"],"sourceRoot":""}