{"version":3,"file":"static/js/repoSnapshot.e6c9bc28.js","mappings":"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","sources":["components/dialog/confirm-restore-repo.js","repo-snapshot.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  restoreRepo: PropTypes.func.isRequired,\n  toggle: PropTypes.func.isRequired\n};\n\nclass ConfirmRestoreRepo extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      btnDisabled: false\n    };\n  }\n\n  action = () => {\n    this.setState({\n      btnDisabled: true\n    });\n    this.props.restoreRepo();\n  };\n\n  render() {\n    const { toggle } = this.props;\n    return (\n      <Modal centered={true} isOpen={true} toggle={toggle}>\n        <ModalHeader toggle={toggle}>{gettext('Restore Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to restore this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.action} disabled={this.state.btnDisabled}>{gettext('Restore')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmRestoreRepo.propTypes = propTypes;\n\nexport default ConfirmRestoreRepo;\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from './utils/utils';\nimport { gettext, siteRoot, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle } from './utils/constants';\nimport { seafileAPI } from './utils/seafile-api';\nimport Loading from './components/loading';\nimport ModalPortal from './components/modal-portal';\nimport toaster from './components/toast';\nimport CommonToolbar from './components/toolbar/common-toolbar';\nimport ConfirmRestoreRepo from './components/dialog/confirm-restore-repo';\n\nimport './css/toolbar.css';\nimport './css/search.css';\n\nimport './css/repo-snapshot.css';\n\nconst {\n  repoID, repoName, canRestoreRepo,\n  commitID, commitTime, commitDesc, commitRelativeTime,\n  showAuthor, authorAvatarURL, authorName, authorNickName\n} = window.app.pageOptions;\n\nclass RepoSnapshot extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      folderPath: '/',\n      folderItems: [],\n      isConfirmDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    this.renderFolder(this.state.folderPath);\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmDialogOpen: !this.state.isConfirmDialogOpen\n    });\n  };\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let newWindow = window.open('about:blank');\n      newWindow.location.href = url;\n    }\n  };\n\n  goBack = (e) => {\n    e.preventDefault();\n    window.history.back();\n  };\n\n  renderFolder = (folderPath) => {\n    this.setState({\n      folderPath: folderPath,\n      folderItems: [],\n      isLoading: true\n    });\n\n    seafileAPI.listCommitDir(repoID, commitID, folderPath).then((res) => {\n      this.setState({\n        isLoading: false,\n        folderItems: res.data.dirent_list\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  clickFolderPath = (folderPath, e) => {\n    e.preventDefault();\n    this.renderFolder(folderPath);\n  };\n\n  renderPath = () => {\n    const path = this.state.folderPath;\n    const pathList = path.split('/');\n\n    if (path == '/') {\n      return repoName;\n    }\n\n    return (\n      <React.Fragment>\n        <a href=\"#\" onClick={this.clickFolderPath.bind(this, '/')}>{repoName}</a>\n        <span> / </span>\n        {pathList.map((item, index) => {\n          if (index > 0 && index != pathList.length - 1) {\n            return (\n              <React.Fragment key={index}>\n                <a href=\"#\" onClick={this.clickFolderPath.bind(this, pathList.slice(0, index+1).join('/'))}>{pathList[index]}</a>\n                <span> / </span>\n              </React.Fragment>\n            );\n          }\n          return null;\n        }\n        )}\n        {pathList[pathList.length - 1]}\n      </React.Fragment>\n    );\n  };\n\n  restoreRepo = () => {\n    seafileAPI.revertRepo(repoID, commitID).then((res) => {\n      this.toggleDialog();\n      toaster.success(gettext('Successfully restored the library.'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.toggleDialog();\n      toaster.danger(errorMsg);\n    });\n  };\n\n  render() {\n    const { isConfirmDialogOpen, folderPath } = this.state;\n\n    return (\n      <React.Fragment>\n        <div className=\"h-100 d-flex flex-column\">\n          <div className=\"top-header d-flex justify-content-between\">\n            <a href={siteRoot}>\n              <img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" />\n            </a>\n            <CommonToolbar onSearchedClick={this.onSearchedClick} />\n          </div>\n          <div className=\"flex-auto container-fluid pt-4 pb-6 o-auto\">\n            <div className=\"row\">\n              <div className=\"col-md-10 offset-md-1\">\n                <h2>\n                  <span>{Utils.generateDialogTitle(gettext('{placeholder} Snapshot'), repoName)}</span>\n                  <span className=\"heading-commit-time ml-1\">({commitTime})</span>\n                </h2>\n                <a href=\"#\" className=\"go-back\" title={gettext('Back')} role=\"button\" aria-label={gettext('Back')} onClick={this.goBack}>\n                  <span className=\"fas fa-chevron-left\"></span>\n                </a>\n                {folderPath == '/' && (\n                  <div className=\"d-flex mb-2 align-items-center\">\n                    <p className=\"m-0\">{commitDesc}</p>\n                    <div className=\"ml-4 border-left pl-4 d-flex align-items-center\">\n                      {showAuthor ? (\n                        <React.Fragment>\n                          <img src={authorAvatarURL} width=\"20\" height=\"20\" alt=\"\" className=\"rounded mr-1\" />\n                          <a href={`${siteRoot}profile/${encodeURIComponent(authorName)}/`}>{authorNickName}</a>\n                        </React.Fragment>\n                      ) : <span>{gettext('Unknown')}</span>}\n                      <p className=\"m-0 ml-2\" dangerouslySetInnerHTML={{__html: commitRelativeTime}}></p>\n                    </div>\n                  </div>\n                )}\n                <div className=\"d-flex justify-content-between align-items-center op-bar\">\n                  <p className=\"m-0\">{gettext('Current path: ')}{this.renderPath()}</p>\n                  {(folderPath == '/' && canRestoreRepo) &&\n                  <button className=\"btn btn-secondary op-bar-btn\" onClick={this.toggleDialog}>{gettext('Restore')}</button>\n                  }\n                </div>\n                <Content\n                  data={this.state}\n                  renderFolder={this.renderFolder}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        {isConfirmDialogOpen &&\n        <ModalPortal>\n          <ConfirmRestoreRepo\n            restoreRepo={this.restoreRepo}\n            toggle={this.toggleDialog}\n          />\n        </ModalPortal>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.theadData = [\n      {width: '5%', text: ''},\n      {width: '55%', text: gettext('Name')},\n      {width: '20%', text: gettext('Size')},\n      {width: '20%', text: ''}\n    ];\n  }\n\n  render() {\n    const { isLoading, errorMsg, folderPath, folderItems } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-6 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <table className=\"table-hover\">\n        <thead>\n          <tr>\n            {this.theadData.map((item, index) => {\n              return <th key={index} width={item.width}>{item.text}</th>;\n            })}\n          </tr>\n        </thead>\n        <tbody>\n          {folderItems.map((item, index) => {\n            return <FolderItem\n              key={index}\n              item={item}\n              folderPath={folderPath}\n              renderFolder={this.props.renderFolder}\n            />;\n          })\n          }\n        </tbody>\n      </table>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n  renderFolder: PropTypes.func.isRequired,\n};\n\nclass FolderItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({isIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isIconShown: false});\n  };\n\n  restoreItem = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const path = Utils.joinPath(this.props.folderPath, item.name);\n    const request = item.type == 'dir' ?\n      seafileAPI.revertFolder(repoID, path, commitID):\n      seafileAPI.revertFile(repoID, path, commitID);\n    request.then((res) => {\n      toaster.success(gettext('Successfully restored 1 item.'));\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n    });\n  };\n\n  renderFolder = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const { folderPath } = this.props;\n    this.props.renderFolder(Utils.joinPath(folderPath, item.name));\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isIconShown } = this.state;\n    const { folderPath } = this.props;\n\n    return item.type == 'dir' ? (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\"><img src={Utils.getFolderIconUrl()} alt={gettext('Directory')} width=\"24\" /></td>\n        <td><a href=\"#\" onClick={this.renderFolder}>{item.name}</a></td>\n        <td></td>\n        <td>\n          <a href=\"#\" className={`action-icon sf2-icon-reply ${isIconShown ? '': 'invisible'}`} onClick={this.restoreItem} title={gettext('Restore')} aria-label={gettext('Restore')} role=\"button\"></a>\n        </td>\n      </tr>\n    ) : (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\"><img src={Utils.getFileIconUrl(item.name)} alt={gettext('File')} width=\"24\" /></td>\n        <td><a href={`${siteRoot}repo/${repoID}/snapshot/files/?obj_id=${item.obj_id}&commit_id=${commitID}&p=${encodeURIComponent(Utils.joinPath(folderPath, item.name))}`} target=\"_blank\" rel=\"noreferrer\">{item.name}</a></td>\n        <td>{Utils.bytesToSize(item.size)}</td>\n        <td>\n          <a href=\"#\" className={`action-icon sf2-icon-reply ${isIconShown ? '': 'invisible'}`} onClick={this.restoreItem} title={gettext('Restore')} aria-label={gettext('Restore')} role=\"button\"></a>\n          <a href={`${siteRoot}repo/${repoID}/${item.obj_id}/download/?file_name=${encodeURIComponent(item.name)}&p=${encodeURIComponent(Utils.joinPath(folderPath, item.name))}`} className={`action-icon sf2-icon-download ${isIconShown ? '': 'invisible'}`} title={gettext('Download')}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nFolderItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  folderPath: PropTypes.string.isRequired,\n  renderFolder: PropTypes.func.isRequired,\n};\n\nReactDom.render(<RepoSnapshot />, document.getElementById('wrapper'));\n"],"names":["_Component","_inherits","ConfirmRestoreRepo","_super","_createSuper","props","_this","_classCallCheck","call","action","setState","btnDisabled","restoreRepo","state","_createClass","key","value","toggle","this","_jsxs","Modal","centered","isOpen","children","_jsx","ModalHeader","gettext","ModalBody","ModalFooter","Button","color","onClick","disabled","Component","_window$app$pageOptio","window","app","pageOptions","repoID","repoName","canRestoreRepo","commitID","commitTime","commitDesc","commitRelativeTime","showAuthor","authorAvatarURL","authorName","authorNickName","RepoSnapshot","_React$Component","toggleDialog","isConfirmDialogOpen","onSearchedClick","selectedItem","is_dir","url","siteRoot","repo_id","repo_name","path","navigate","repalce","Utils","encodePath","open","location","href","goBack","e","preventDefault","history","back","renderFolder","folderPath","folderItems","isLoading","seafileAPI","listCommitDir","then","res","data","dirent_list","catch","error","errorMsg","getErrorMsg","clickFolderPath","renderPath","pathList","split","React","bind","_assertThisInitialized","map","item","index","length","slice","join","revertRepo","toaster","success","danger","_this$state","className","src","mediaUrl","logoPath","height","logoHeight","width","logoWidth","title","siteTitle","alt","CommonToolbar","generateDialogTitle","role","concat","encodeURIComponent","dangerouslySetInnerHTML","__html","Content","ModalPortal","_React$Component2","_super2","_this2","theadData","text","_this3","_this$props$data","Loading","FolderItem","_React$Component3","_super3","_this4","handleMouseOver","isIconShown","handleMouseOut","restoreItem","joinPath","name","type","revertFolder","revertFile","onMouseOver","onMouseOut","onFocus","getFolderIconUrl","getFileIconUrl","obj_id","target","rel","bytesToSize","size","ReactDom","document","getElementById"],"sourceRoot":""}