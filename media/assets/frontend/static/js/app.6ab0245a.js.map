{"version":3,"file":"static/js/app.6ab0245a.js","mappings":"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","sources":["components/system-notification.js","models/group.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/activity-item.js","pages/dashboard/content.js","pages/dashboard/user-selector.js","pages/dashboard/files-activities.js","pages/dashboard/my-file-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","components/dialog/sort-options.js","components/toolbar/top-toolbar.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","components/repo-monitored-icon.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/ocm-via-webdav/ocm-via-webdav.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/seatable-integration-account-setting-widgets/delete-seatables-dialog.js","components/seatable-integration-account-setting-widgets/seatable-account-setting-item.js","components/seatable-integration-account-setting-widgets/seatable-account-setting-list.js","components/seatable-integration-account-setting-widgets/add-seatable-account-setting.js","components/dialog/repo-seatable-integration-dialog.js","components/dialog/repo-share-admin/share-links.js","components/dialog/repo-share-admin/upload-links.js","components/dialog/repo-share-admin/user-shares.js","components/dialog/repo-share-admin/group-shares.js","components/dialog/repo-share-admin-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/create-tag-dialog.js","components/dialog/edit-filetag-dialog.js","../node_modules/uuid/dist/esm-browser/rng.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","../node_modules/uuid/dist/esm-browser/native.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/v4.js","components/dialog/tag-color.js","components/dialog/tag-name.js","components/popover/tag-list-item.js","components/popover/virtual-tag-color.js","components/popover/virtual-tag-name.js","components/popover/virtual-tag-list-item.js","components/popover/tag-list-footer.js","components/popover/list-tag-popover.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dialog/extra-attributes-dialog/column/column-name.js","components/dialog/extra-attributes-dialog/editor/simple-text.js","components/dialog/extra-attributes-dialog/editor/formula-formatter.js","components/dialog/extra-attributes-dialog/editor/search-input.js","components/dialog/extra-attributes-dialog/editor/single-select/single-select-editor.js","components/dialog/extra-attributes-dialog/editor/single-select/index.js","components/dialog/extra-attributes-dialog/editor/number-editor.js","components/dialog/extra-attributes-dialog/editor/date-editor.js","components/dialog/extra-attributes-dialog/editor/ctime-formatter.js","components/dialog/extra-attributes-dialog/editor/index.js","components/dialog/extra-attributes-dialog/column/index.js","components/dialog/extra-attributes-dialog/index.js","components/dialog/confirm-apply-folder-properties-dialog.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","components/dirent-list-view/file-tag.js","components/dirent-list-view/dirent-list-item.js","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","components/dialog/delete-folder-dialog.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/group-members.js","components/list-and-add-group-members.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","components/common/seahub-popover.js","components/context-menu/actions.js","components/context-menu/context-menu.js","components/context-menu/globalEventListener.js","components/context-menu/helpers.js","components/dialog/copy-move-dirent-progress-dialog.js","components/dialog/create-folder-dialog.js","components/dialog/image-dialog.js","components/dialog/share-admin-link.js","components/dialog/zip-download-dialog.js","components/dropdown-menu/item-dropdown-menu.js","components/common/common-add-tool.js","components/common/search-input.js","components/popover/tag-item.js","components/popover/edit-filetag-popover.js","components/rename.js","components/dialog/list-taggedfiles-dialog.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/repo-info-bar.js","components/seafile-markdown-viewer/index.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","../node_modules/after/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/backo2/index.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/component-bind/index.js","../node_modules/component-emitter/index.js","../node_modules/component-inherit/index.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/engine.io-client/lib/transport.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/engine.io-client/lib/transports/xmlhttprequest.browser.js","../node_modules/engine.io-client/node_modules/debug/src/browser.js","../node_modules/engine.io-client/node_modules/debug/src/debug.js","../node_modules/engine.io-client/node_modules/ms/index.js","../node_modules/engine.io-parser/lib/browser.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/has-binary2/index.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/has-cors/index.js","../node_modules/indexof/index.js","../node_modules/parseqs/index.js","../node_modules/parseuri/index.js","../node_modules/reactstrap/es/Table.js","../node_modules/socket.io-client/lib/index.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/socket.io-client/lib/on.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/url.js","../node_modules/socket.io-client/node_modules/debug/src/browser.js","../node_modules/socket.io-client/node_modules/debug/src/debug.js","../node_modules/socket.io-client/node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/socket.io-parser/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-parser/node_modules/debug/src/browser.js","../node_modules/socket.io-parser/node_modules/debug/src/debug.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/node_modules/ms/index.js","../node_modules/to-array/index.js","../node_modules/yeast/index.js","webpack://seahub-frontend/./src/css/repo-tag.css?ecda"],"sourcesContent":["import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  };\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\" className=\"d-flex justify-content-between\">\n        <p id=\"info-bar-info\" className=\"m-0\" dangerouslySetInnerHTML={{__html: curNoteMsg}}></p>\n        <button className=\"close sf2-icon-x1\" title={gettext('Close')} aria-label={gettext('Close')} onClick={this.close}></button>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, canAddRepo, canGenerateShareLink, canGenerateUploadLink, canInvitePeople, enableOCM, enableOCMViaWebdav } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\nimport Group from '../models/group';\n\nimport { canViewOrg, isDocs, isPro, isDBSqlite3, customNavItems } from '../utils/constants';\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar:false,\n      groupItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  };\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  };\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI.listGroups().then(res =>{\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n\n      this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n      _this.setState({\n        groupItems: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  tabItemClick = (e, param, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  };\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? 'active' : '';\n  };\n\n  renderSharedGroups() {\n    let style = {height: 0};\n    if (this.state.groupsExtended) {\n      style = {height: this.groupsHeight};\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column grp-list ${this.state.groupsExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style}>\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'groups/'}  className={`nav-link ellipsis ${this.getActiveClass('groups')}`} onClick={(e) => this.tabItemClick(e, 'groups')}>\n            <span className=\"sharp\" aria-hidden=\"true\">#</span>\n            <span className=\"nav-text\">{gettext('All Groups')}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map(item => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link to={siteRoot + 'group/' + item.id + '/'} className={`nav-link ellipsis ${this.getActiveClass(item.name)}`} onClick={(e) => this.tabItemClick(e, item.name, item.id)}>\n                <span className=\"sharp\" aria-hidden=\"true\">#</span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = {height: height};\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-share-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-share-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-share-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-upload-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-upload-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-upload-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column ${this.state.sharedExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style} >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link to={siteRoot + 'share-admin-libs/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-libs')}`} title={gettext('Libraries')} onClick={(e) => this.tabItemClick(e, 'share-admin-libs')}>\n              <span aria-hidden=\"true\" className=\"sharp\">#</span>\n              <span className=\"nav-text\">{gettext('Libraries')}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-folders/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-folders')}`} title={gettext('Folders')} onClick={(e) => this.tabItemClick(e, 'share-admin-folders')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Folders')}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return (\n      customNavItems.map((item, idx) => {\n        return (\n          <li key={idx} className=\"nav-item\">\n            <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n              <span className={item.icon} aria-hidden=\"true\"></span>\n              <span className=\"nav-text\">{item.desc}</span>\n            </a>\n          </li>\n        );\n      })\n    );\n  }\n\n  render() {\n    let showActivity = isDocs || isPro || !isDBSqlite3;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext('Files')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link to={ siteRoot + 'my-libs/' } className={`nav-link ellipsis ${this.getActiveClass('my-libs') || this.getActiveClass('deleted') }`} title={gettext('My Libraries')} onClick={(e) => this.tabItemClick(e, 'my-libs')}>\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('My Libraries')}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link to={siteRoot + 'shared-libs/'} className={`nav-link ellipsis ${this.getActiveClass('shared-libs')}`} title={gettext('Shared with me')} onClick={(e) => this.tabItemClick(e, 'shared-libs')}>\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with me')}</span>\n              </Link>\n            </li>\n            { canViewOrg &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'org')}>\n                <Link to={ siteRoot + 'org/' } className={`nav-link ellipsis ${this.getActiveClass('org')}`} title={gettext('Shared with all')}>\n                  <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared with all')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Shared with groups')} onClick={this.grpsExtend}>\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with groups')}</span>\n                <span className={`toggle-icon fas ${this.state.groupsExtended ?'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'shared-with-ocm/'} className={`nav-link ellipsis ${this.getActiveClass('shared-with-ocm')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'shared-with-ocm')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n            {enableOCMViaWebdav &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'ocm-via-webdav/'} className={`nav-link ellipsis ${this.getActiveClass('ocm-via-webdav')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'ocm-via-webdav')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n          </ul>\n\n\n          <h3 className=\"sf-heading\">{gettext('Tools')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('starred')}`} to={siteRoot + 'starred/'} title={gettext('Favorites')} onClick={(e) => this.tabItemClick(e, 'starred')}>\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Favorites')}</span>\n              </Link>\n            </li>\n            {showActivity &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('dashboard')}`} to={siteRoot + 'dashboard/'} title={gettext('Activities')} onClick={(e) => this.tabItemClick(e, 'dashboard')}>\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Activities')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('published')}`} to={siteRoot + 'published/'} title={gettext('Published Libraries')} onClick={(e) => this.tabItemClick(e, 'published')}>\n                <span className=\"sf2-icon-wiki-view\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Published Libraries')}</span>\n              </Link>\n            </li>\n            {/*isDocs &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'drafts')}>\n                <Link className={`nav-link ellipsis ${this.getActiveClass('drafts')}`} to={siteRoot + 'drafts/'} title={gettext('Drafts')}>\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Drafts')}</span>\n                  {this.props.draftCounts > 0 && <span id=\"draft-num\">{this.props.draftCounts}</span>}\n                </Link>\n              </li>\n            */}\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('linked-devices')}`} to={siteRoot + 'linked-devices/'} title={gettext('Linked Devices')} onClick={(e) => this.tabItemClick(e, 'linked-devices')}>\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Linked Devices')}</span>\n              </Link>\n            </li>\n            {canInvitePeople &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('invitations')}`} to={siteRoot + 'invitations/'} title={gettext('Invite Guest')} onClick={(e) => this.tabItemClick(e, 'invitations')}>\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Invite Guest')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Share Admin')} onClick={this.shExtend}>\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Share Admin')}</span>\n                <span className={`toggle-icon fas ${this.state.sharedExtended ? 'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, lang, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle, seafileVersion, additionalAboutDialogLinks, aboutDialogCustomHtml } from '../../utils/constants';\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n\n  renderExternalAboutLinks = () => {\n    if (additionalAboutDialogLinks && (typeof additionalAboutDialogLinks) === 'object') {\n      let keys = Object.keys(additionalAboutDialogLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"d-block\" href={additionalAboutDialogLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  };\n\n  render() {\n    let href = lang === 'zh-cn' ? 'http://seafile.com/about/' : 'http://seafile.com/en/about/';\n    const { onCloseAboutDialog: toggleDialog } = this.props;\n\n    if (aboutDialogCustomHtml) {\n      return (\n        <Modal isOpen={true} toggle={toggleDialog}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={toggleDialog}><span aria-hidden=\"true\">×</span></button>\n            <div className=\"about-content\" dangerouslySetInnerHTML={{__html: aboutDialogCustomHtml}}></div>\n          </ModalBody>\n        </Modal>\n      );\n    } else {\n      return (\n        <Modal isOpen={true} toggle={toggleDialog}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={toggleDialog}><span aria-hidden=\"true\">×</span></button>\n            <div className=\"about-content\">\n              <p><img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" /></p>\n              <p>{gettext('Server Version: ')}{seafileVersion}<br />© {(new Date()).getFullYear()} {gettext('Seafile')}</p>\n              <p>{this.renderExternalAboutLinks()}</p>\n              <p><a href={href} target=\"_blank\" rel=\"noreferrer\">{gettext('About Us')}</a></p>\n            </div>\n          </ModalBody>\n        </Modal>\n      );\n    }\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot, enableTC, sideNavFooterCustomHtml, additionalAppBottomLinks } from '../utils/constants';\nimport ModalPortal from './modal-portal';\nimport AboutDialog from './dialog/about-dialog';\n\nclass SideNavFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n    };\n  }\n\n  onAboutDialogToggle = (e) => {\n    e.preventDefault();\n    this.setState({isAboutDialogShow: !this.state.isAboutDialogShow});\n  };\n\n  renderExternalAppLinks = () => {\n    if (additionalAppBottomLinks && (typeof additionalAppBottomLinks) === 'object') {\n      let keys = Object.keys(additionalAppBottomLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"item\" href={additionalAppBottomLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  };\n\n  render() {\n\n    if (sideNavFooterCustomHtml) {\n      return (<div className='side-nav-footer' dangerouslySetInnerHTML={{__html: sideNavFooterCustomHtml}}></div>);\n    }\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer flex-wrap\">\n          <a href={siteRoot + 'help/'} target=\"_blank\" rel=\"noopener noreferrer\" className=\"item\">{gettext('Help')}</a>\n          <a href=\"#\" className=\"item\" onClick={this.onAboutDialogToggle}>{gettext('About')}</a>\n          {enableTC && <a href={`${siteRoot}terms/`} className=\"item\">{gettext('Terms')}</a>}\n          {this.renderExternalAppLinks()}\n          <a href={siteRoot + 'download_client_program/'} className={`item ${additionalAppBottomLinks ? '' : 'last-item'}`}>\n            <span aria-hidden=\"true\" className=\"sf2-icon-monitor vam\"></span>{' '}\n            <span className=\"vam\">{gettext('Clients')}</span>\n          </a>\n        </div>\n        {this.state.isAboutDialogShow && (\n          <ModalPortal>\n            <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  render() {\n    return (\n      <div className=\"main-panel\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  };\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  };\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  };\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\" rel=\"noreferrer\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\" rel=\"noreferrer\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  };\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  };\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank' rel=\"noreferrer\">{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  };\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\" rel=\"noreferrer\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <button type=\"button\" onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2 border-0 p-0 bg-transparent\">{gettext('details')}</button>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\" rel=\"noreferrer\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          // eslint-disable-next-line\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\" rel=\"noreferrer\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          // eslint-disable-next-line\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nexport default ActivityItem;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EmptyTip from '../../components/empty-tip';\nimport ActivityItem from './activity-item';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    if (!items.length) {\n      return <EmptyTip><p>{gettext('No more activities')}</p></EmptyTip>;\n    }\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nexport default FileActivitiesContent;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nimport '../../css/files-activities.css';\n\nconst propTypes = {\n  availableUsers: PropTypes.array.isRequired,\n  currentSelectedUsers: PropTypes.array.isRequired,\n  setTargetUsers: PropTypes.func.isRequired,\n  toggleSelectUser: PropTypes.func.isRequired\n};\n\nclass UserSelector extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isPopoverOpen: false,\n      query: ''\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.handleOutsideClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleOutsideClick);\n  }\n\n  handleOutsideClick = (e) => {\n    const { isPopoverOpen } = this.state;\n    if (isPopoverOpen && !this.userSelector.contains(e.target)) {\n      this.togglePopover();\n    }\n  };\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    }, () => {\n      if (!this.state.isPopoverOpen) {\n        const { availableUsers } = this.props;\n        const selectedUsers = availableUsers.filter(item => item.isSelected);\n        this.props.setTargetUsers(selectedUsers);\n      }\n    });\n  };\n\n  onToggleClick = (e) => {\n    e.stopPropagation();\n    this.togglePopover();\n  };\n\n  onQueryChange = (e) => {\n    this.setState({\n      query: e.target.value\n    });\n  };\n\n  toggleSelectItem = (e, targetItem) => {\n    e.stopPropagation();\n    this.props.toggleSelectUser(targetItem);\n  };\n\n  render() {\n    const { isPopoverOpen, query } = this.state;\n    const { currentSelectedUsers, availableUsers } = this.props;\n    const selectedUsers = availableUsers.filter(item => item.isSelected);\n    const filteredAvailableUsers = query.trim() ? availableUsers.filter(item => item.contact_email.indexOf(query.trim()) != -1 || item.name.indexOf(query.trim()) != -1) : availableUsers;\n    return (\n      <div className=\"mt-4 position-relative\">\n        <span className=\"cur-activity-modifiers d-inline-block p-2 rounded\" onClick={this.onToggleClick}>\n          {currentSelectedUsers.length > 0 ? (\n            <>\n              <span>{gettext('Modified by:')}</span>\n              <span className=\"d-inline-block ml-1\">{currentSelectedUsers.map(item => item.name).join(', ')}</span>\n            </>\n          ) : gettext('Modified by')}\n          <i className=\"fas fa-caret-down ml-2 toggle-icon\"></i>\n        </span>\n        {isPopoverOpen && (\n          <div className=\"position-absolute activity-modifier-selector-container rounded shadow\" ref={ref => this.userSelector = ref}>\n            <ul className=\"activity-selected-modifiers px-3 py-1 list-unstyled\">\n              {selectedUsers.map((item, index) => {\n                return (\n                  <li key={index} className=\"activity-selected-modifier\">\n                    <img src={item.avatar_url} className=\"avatar w-5 h-5\" alt=\"\" />\n                    <span className=\"activity-user-name ml-2\">{item.name}</span>\n                    <i className=\"sf2-icon-close unselect-activity-user ml-2\" onClick={(e) => {this.toggleSelectItem(e, item);}}></i>\n                  </li>\n                );\n              })}\n            </ul>\n            <div className=\"px-3 pt-3\">\n              <Input\n                type=\"text\"\n                placeholder={gettext('Find modifiers')}\n                value={query}\n                onChange={this.onQueryChange}\n              />\n            </div>\n            <ul className=\"activity-user-list list-unstyled p-3 o-auto\">\n              {filteredAvailableUsers.map((item, index) => {\n                return (\n                  <li key={index} className=\"activity-user-item h-6 p-1 rounded d-flex justify-content-between align-items-center\" onClick={(e) => {this.toggleSelectItem(e, item);}}>\n                    <div>\n                      <img src={item.avatar_url} className=\"avatar w-5 h-5\" alt=\"\" />\n                      <span className=\"activity-user-name ml-2\">{item.name}</span>\n                    </div>\n                    {item.isSelected && <i className=\"sf2-icon-tick text-gray font-weight-bold\"></i>}\n                  </li>\n                );\n              })}\n            </ul>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nUserSelector.propTypes = propTypes;\n\nexport default UserSelector;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, username } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport FileActivitiesContent from './content';\nimport UserSelector from './user-selector';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst propTypes = {\n  onlyMine: PropTypes.bool\n};\n\nclass FilesActivities extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      allItems: [],\n      items: [],\n      availableUsers: [],\n      targetUsers: []\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n    this.availableUserEmails = new Set();\n  }\n\n  componentDidMount() {\n    let { currentPage, availableUsers } = this.state;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      events.forEach(item => {\n        if (!this.availableUserEmails.has(item.author_email)) {\n          this.availableUserEmails.add(item.author_email);\n          availableUsers.push({\n            email: item.author_email,\n            name: item.author_name,\n            contact_email: item.author_contact_email,\n            avatar_url: item.avatar_url,\n            isSelected: false\n          });\n        }\n      });\n      this.setState({\n        allItems: events,\n        items: this.filterEvents(events),\n        availableUsers: availableUsers,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.forEach((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  };\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  };\n\n  getMore() {\n    const { currentPage, availableUsers, targetUsers } = this.state;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      events.forEach(item => {\n        if (!this.availableUserEmails.has(item.author_email)) {\n          this.availableUserEmails.add(item.author_email);\n          availableUsers.push({\n            email: item.author_email,\n            name: item.author_name,\n            contact_email: item.author_contact_email,\n            avatar_url: item.avatar_url,\n            isSelected: false\n          });\n        }\n      });\n      const filteredEvents = this.filterEvents(events);\n      this.setState({\n        allItems: [...this.state.allItems, ...events],\n        items: [...this.state.items, ...filteredEvents],\n        availableUsers: availableUsers,\n        currentPage: currentPage + 1,\n        isLoadingMore: false,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        if (!(targetUsers.length && currentPage == 100)) {\n          this.getMore();\n        }\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  filterEvents = (events) => {\n    const { onlyMine } = this.props;\n    const { targetUsers } = this.state;\n\n    if (onlyMine) {\n      return events.filter(item => item.author_email == username);\n    } else if (targetUsers.length) {\n      return events.filter(item => targetUsers.map(item => item.email).indexOf(item.author_email) != -1);\n    } else {\n      return events;\n    }\n  };\n\n  setTargetUsers = (selectedUsers) => {\n    this.setState({\n      targetUsers: selectedUsers\n    }, () => {\n      const items = this.filterEvents(this.state.allItems);\n      this.setState({\n        items: items\n      }, () => {\n        if (items.length < 25 && this.state.hasMore) {\n          this.getMore();\n        }\n      });\n    });\n  };\n\n  toggleSelectUser = (user) => {\n    const { availableUsers } = this.state;\n    this.setState({\n      availableUsers: availableUsers.map(item => {\n        if (item.email == user.email) {\n          item.isSelected = !user.isSelected;\n        }\n        return item;\n      })\n    });\n  };\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  };\n\n  render() {\n    const { onlyMine } = this.props;\n    const { targetUsers, availableUsers } = this.state;\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <ul className=\"nav\">\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}dashboard/`} className={`nav-link${onlyMine ? '' : ' active'}`}>{gettext('All Activities')}</Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}my-activities/`} className={`nav-link${onlyMine ? ' active': ''}`}>{gettext('My Activities')}</Link>\n              </li>\n            </ul>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading && (\n              <Fragment>\n                {!onlyMine && (\n                  <UserSelector\n                    availableUsers={availableUsers}\n                    currentSelectedUsers={targetUsers}\n                    setTargetUsers={this.setTargetUsers}\n                    toggleSelectUser={this.toggleSelectUser}\n                  />\n                )}\n                <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore} />\n              </Fragment>\n            )\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nFilesActivities.propTypes = propTypes;\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport FilesActivities from './files-activities';\n\nclass MyFilesActivities extends Component {\n\n  render() {\n    return <FilesActivities onlyMine={true} />;\n  }\n}\n\nexport default MyFilesActivities;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object,\n  items: PropTypes.array,\n};\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return (Utils.imageCheck(item.obj_name) || (enableVideoThumbnail && Utils.videoCheck(item.obj_name))) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n      // item is folder or file\n      if (item.encoded_path !== '/') {\n        item.dirent_view_url = item.dirent_view_url.replace(/\\/+$/, '');\n      }\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nTableBody.propTypes = {\n  data: PropTypes.object,\n  items: PropTypes.array,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  };\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  };\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n    const linkUrl = data.dirent_view_url;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\" rel=\"noreferrer\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" role=\"button\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={linkUrl}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\" rel=\"noreferrer\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  data: PropTypes.object,\n  items: PropTypes.array,\n};\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  };\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  };\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  };\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  };\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} role=\"button\" aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n};\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport CustomPermission from '../../models/custom-permission';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string,\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      currentOption: this.props.currentPerm,\n      customPermissions: []\n    };\n\n    this.customPermissions = null;\n  }\n\n  componentDidMount() {\n    if (this.props.repoID) {\n      this.listCustomPermissions();\n    } else {\n      this.setState({isLoading: false});\n    }\n  }\n\n  listCustomPermissions = () => {\n    const { repoID } = this.props;\n    seafileAPI.listCustomPermissions(repoID).then(res => {\n      const { permission_list: permissions } = res.data;\n      const customPermissions = permissions.map(item => new CustomPermission(item));\n      this.setState({\n        isLoading: false,\n        customPermissions: customPermissions\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({isLoading: false});\n    });\n  };\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  };\n\n  translatePermission = (permission) => {\n    let value = Utils.sharePerms(permission);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === permission);\n      value = item && item.name;\n    }\n    return value;\n  };\n\n  translateExplanation = (explanation) => {\n    let value = Utils.sharePermsExplanation(explanation);\n    if (!value) {\n      const { customPermissions } = this.state;\n      const item = customPermissions.find(item => item.id + '' === explanation);\n      value = item && item.description;\n    }\n    return value;\n  };\n\n  getPermissions = () => {\n    const { permissions } = this.props;\n    let newPermissions = permissions.slice();\n    const { customPermissions } = this.state;\n    if (!this.customPermissions) {\n      if (customPermissions.length > 0) {\n        customPermissions.forEach(item => {\n          newPermissions.push(item.id + '');\n        });\n      }\n      this.customPermissions = newPermissions;\n    }\n    return this.customPermissions;\n  };\n\n\n  render() {\n    const { isLoading, currentOption } = this.state;\n    let permissions = [];\n    if (!isLoading) {\n      permissions = this.getPermissions();\n    }\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody style={{maxHeight: '400px', overflow: 'auto'}}>\n          {isLoading && <Loading />}\n          {!isLoading && permissions.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {this.translatePermission(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {this.translateExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      share_permission_name: item.share_permission_name,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  };\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, share_permission_name, is_admin, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditing={true}\n              autoFocus={true}\n              isEditIconShow={this.state.isOpIconShown}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen && (\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.share_permission_name = object.share_permission_name;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      share_permission_name: this.props.item.share_permission_name,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false,\n      isShowPermEditor: false,\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  };\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, share_permission_name, isOpIconShown, isPermSelectDialogOpen, isShowPermEditor } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    // custom defined permission\n    if (share_permission.startsWith('custom-')) {\n      share_permission = share_permission.slice(7);\n    }\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          {!isShowPermEditor && (\n            <div>\n              <span>{Utils.sharePerms(share_permission) || share_permission_name}</span>\n              {isOpIconShown && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={isOpIconShown}\n              isEditing={true}\n              autoFocus={true}\n              currentPermission={share_permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td><a href=\"#\" role=\"button\" aria-label={gettext('Unshare')} className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&(\n          <PermSelect\n            repoID={item.repo_id}\n            currentPerm={share_permission}\n            permissions={this.permissions}\n            changePerm={this.changePerm}\n            toggleDialog={this.togglePermSelectDialog}\n          />\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  };\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortOptions: PropTypes.array,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = this.props.sortOptions || [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  searchPlaceholder: PropTypes.string,\n  children: PropTypes.object\n};\n\nclass TopToolbar extends React.Component {\n\n  render() {\n    const { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {this.props.children}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick} />\n      </div>\n    );\n  }\n}\n\nTopToolbar.propTypes = propTypes;\n\nexport default TopToolbar;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\nimport Selector from '../../components/single-selector';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  isLoadingMore: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({ isItemFreezed: isFreezed });\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n                onRemoveLink={this.props.onRemoveLink}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? (\n        <>\n          {table}\n          {this.props.isLoadingMore && <div className=\"flex-shrink-0\"><Loading /></div>}\n        </>\n      ) : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n  onRemoveLink: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      highlight: false,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  };\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  };\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  };\n\n  handleMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: true,\n        highlight: true\n      });\n    }\n  };\n\n  handleMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShown: false,\n        highlight: false\n      });\n    }\n  };\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  };\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  };\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  };\n\n  // for 'selector' in desktop\n  changePermission = (permOption) => {\n    this.changePerm(permOption.value);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n    this.permOptions = permissionOptions.map(item => {\n      return {\n        value: item,\n        text: Utils.getShareLinkPermissionObject(item).text,\n        isSelected: item == currentPermission\n      };\n    });\n    const currentSelectedPermOption = this.permOptions.filter(item => item.isSelected)[0] || {};\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave} onFocus={this.handleMouseEnter}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n          }\n          {deletedTip}\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n          <td>\n            <Selector\n              isDropdownToggleShown={isOpIconShown && !item.is_expired}\n              currentSelectedOption={currentSelectedPermOption}\n              options={this.permOptions}\n              selectOption={this.changePermission}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n            <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nconst PER_PAGE = 25;\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidShareLinksDialogOpen: false,\n      loading: true,\n      hasMore: false,\n      isLoadingMore: false,\n      page: 1,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n\n    // for mobile\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'time-asc', text: gettext('By expiration ascending')},\n      {value: 'time-desc', text: gettext('By expiration descending')}\n    ];\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n\n      // no default\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  componentDidMount() {\n    this.listUserShareLinks();\n  }\n\n  listUserShareLinks() {\n    const { page } = this.state;\n    seafileAPI.listShareLinks({ page }).then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        hasMore: res.data.length == PER_PAGE,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  };\n\n  getMore = () => {\n    const { page } = this.state;\n    seafileAPI.listShareLinks({ page: page + 1 }).then((res) => {\n      let moreItems = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        isLoadingMore: false,\n        hasMore: res.data.length == PER_PAGE,\n        page: page + 1,\n        items: this._sortItems(this.state.items.concat(moreItems), this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  toggleCleanInvalidShareLinksDialog = () => {\n    this.setState({isCleanInvalidShareLinksDialogOpen: !this.state.isCleanInvalidShareLinksDialogOpen});\n  };\n\n  cleanInvalidShareLinks = () => {\n    seafileAPI.cleanInvalidShareLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid share links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidShareLinksDialog}>{gettext('Clean invalid share links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                <li className=\"nav-item\">\n                  <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n                </li>\n                {canGenerateUploadLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n                )}\n              </ul>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\" onScroll={this.handleScroll}>\n              <Content\n                loading={this.state.loading}\n                isLoadingMore={this.state.isLoadingMore}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortOptions={this.sortOptions}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCleanInvalidShareLinksDialogOpen &&\n          <CommonOperationConfirmationDialog\n            title={gettext('Clean invalid share links')}\n            message={gettext('Are you sure you want to clean invalid share links?')}\n            executeOperation={this.cleanInvalidShareLinks}\n            confirmBtnText={gettext('Clean')}\n            toggleDialog={this.toggleCleanInvalidShareLinksDialog}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminShareLinks.propTypes = propTypes;\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem, Button } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\nimport CommonOperationConfirmationDialog from '../../components/dialog/common-operation-confirmation-dialog';\nimport TopToolbar from '../../components/toolbar/top-toolbar';\n\nconst contentPropTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nContent.propTypes = contentPropTypes;\n\nconst itemPropTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  item: PropTypes.object.isRequired,\n  onRemoveLink: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  };\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  };\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  };\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  };\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  };\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  };\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const deletedTip = item.obj_id === '' ? <span style={{color:'red'}}>{gettext('(deleted)')}</span> : null;\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link>{deletedTip}</td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} aria-label={gettext('View')} role=\"button\" onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} aria-label={gettext('Remove')} role=\"button\" onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{gettext('Visits')}: {item.view_cnt}</span>\n          <span className=\"item-meta-info\">{gettext('Expiration')}: {this.renderExpiration()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired\n};\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCleanInvalidUploadLinksDialogOpen: false,\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    this.listUserUploadLinks();\n  }\n\n  listUserUploadLinks() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleCleanInvalidUploadLinksDialog = () => {\n    this.setState({isCleanInvalidUploadLinksDialogOpen: !this.state.isCleanInvalidUploadLinksDialogOpen});\n  };\n\n  cleanInvalidUploadLinks = () => {\n    seafileAPI.cleanInvalidUploadLinks().then(res => {\n      const newItems = this.state.items.filter(item => item.obj_id !== '').filter(item => !item.is_expired);\n      this.setState({items: newItems});\n      toaster.success(gettext('Successfully cleaned invalid upload links.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <TopToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n        >\n          <Button className=\"operation-item d-none d-md-block\" onClick={this.toggleCleanInvalidUploadLinksDialog}>{gettext('Clean invalid upload links')}</Button>\n        </TopToolbar>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path share-upload-nav\">\n              <ul className=\"nav\">\n                {canGenerateShareLink && (\n                  <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n                )}\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n              </ul>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                onRemoveLink={this.onRemoveLink}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isCleanInvalidUploadLinksDialogOpen &&\n        <CommonOperationConfirmationDialog\n          title={gettext('Clean invalid upload links')}\n          message={gettext('Are you sure you want to clean invalid upload links?')}\n          executeOperation={this.cleanInvalidUploadLinks}\n          confirmBtnText={gettext('Clean')}\n          toggleDialog={this.toggleCleanInvalidUploadLinksDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nShareAdminUploadLinks.propTypes = propTypes;\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from '../utils/utils';\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.monitored = object.monitored;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport Icon from '../components/icon';\nimport { gettext } from '../utils/constants';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired\n};\n\nclass RepoMonitoredIcon extends React.Component {\n\n  render() {\n    const { repoID } = this.props;\n    return (\n      <Fragment>\n        <span id={`watching-${repoID}`} className=\"ml-1\">\n          <Icon symbol='monitor' />\n        </span>\n        <UncontrolledTooltip\n          placement=\"bottom\"\n          target={`#watching-${repoID}`}\n        >\n          {gettext('You are watching file changes of this library.')}\n        </UncontrolledTooltip>\n      </Fragment>\n    );\n  }\n}\n\nRepoMonitoredIcon.propTypes = propTypes;\n\nexport default RepoMonitoredIcon;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false\n    };\n  }\n\n  freezeItem = (freezed) => {\n    this.setState({\n      isItemFreezed: freezed\n    });\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                data={item}\n                isDesktop={isDesktop}\n                isItemFreezed={this.state.isItemFreezed}\n                freezeItem={this.freezeItem}\n                onMonitorRepo={this.props.onMonitorRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    }, () => {\n      this.props.freezeItem(this.state.isOpMenuOpen);\n    });\n  };\n\n  handleMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        showOpIcon: true\n      });\n    }\n  };\n\n  handleMouseOut = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        showOpIcon: false\n      });\n    }\n  };\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  };\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  };\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  };\n\n  watchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { data: repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n\n    // at present, only repo shared with 'r', 'rw' can be monitored.(Fri Feb 10 16:24:49 CST 2023)\n    const enableMonitorRepo = isPro && (data.permission == 'r' || data.permission == 'rw');\n\n    const desktopItem = (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td>\n            <Fragment>\n              <Link to={shareRepoUrl}>{data.repo_name}</Link>\n              {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            </Fragment>\n          </td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} role=\"button\" aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n            {enableMonitorRepo &&\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                role=\"button\"\n                tabIndex=\"0\"\n                className={`sf-dropdown-toggle sf2-icon-caret-down${iconVisibility}`}\n                title={gettext('More Operations')}\n                aria-label={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n            }\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link>\n            {data.monitored && <RepoMonitoredIcon repoID={data.repo_id} />}\n            <br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onToggleStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) && <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                  {enableMonitorRepo && <DropdownItem className=\"mobile-menu-item\" onClick={data.monitored ? this.unwatchFileChanges : this.watchFileChanges}>{data.monitored ? gettext('Unwatch File Changes') : gettext('Watch File Changes')}</DropdownItem>}\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let items = this.state.items.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({items: items});\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n                onMonitorRepo={this.onMonitorRepo}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut} onFocus={this.handleMouseOver}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" role=\"button\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} aria-label={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass OCMViaWebdav extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      shareID: '',\n      path: '',\n      items: [],\n      errorMsg: '',\n    };\n  }\n\n  componentDidMount() {\n    this.getAllReceivedShares();\n  }\n\n  getAllReceivedShares = () => {\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/';\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: '',\n        path: '',\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  leaveShare = (item) => {\n    const { id, name } = item;\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + id + '/';\n    seafileAPI.req.delete(url).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  openFolder = (item) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + item.id + '/?path=' + item.path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        shareID: item.id,\n        path: res.data.parent_dir,\n        items: res.data.received_share_list,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onPathClick = (path) => {\n\n    this.setState({\n      loading: true,\n    });\n\n    const url = seafileAPI.server + '/ocm-via-webdav/received-shares/' + this.state.shareID + '/?path=' + path;\n    seafileAPI.req.get(url).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.received_share_list,\n        path: res.data.parent_dir,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPath\n                shareID={this.state.shareID}\n                currentPath={this.state.path}\n                onPathClick={this.onPathClick}\n                getAllReceivedShares={this.getAllReceivedShares}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                path={this.state.path}\n                leaveShare={this.leaveShare}\n                openFolder={this.openFolder}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\n\nclass Content extends Component {\n\n  static propTypes = {\n    loading: PropTypes.bool.isRequired,\n    errorMsg: PropTypes.string.isRequired,\n    items: PropTypes.array.isRequired,\n    path: PropTypes.string.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { loading, errorMsg, items, path } = this.props;\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"5%\"></th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"35%\">{gettext('Shared By')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"5%\">{/* operations */}</th>\n              <th width=\"5%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                path={path}\n                leaveShare={this.props.leaveShare}\n                openFolder={this.props.openFolder}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  path: PropTypes.string.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n  openFolder: PropTypes.func.isRequired,\n};\n\nclass Item extends Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  downloadFile = () => {\n    let downloadUrl = siteRoot + 'ocm-via-webdav/download-received-file/?share_id=' + this.props.item.id + '&path=' + this.props.item.path;\n    window.location.href = downloadUrl;\n  };\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  };\n\n  openFolder = (e) => {\n    e.preventDefault();\n    this.props.openFolder(this.props.item);\n  };\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    if (item.is_dir) {\n      item.icon_url = Utils.getFolderIconUrl();\n    } else {\n      item.icon_url = Utils.getFileIconUrl(item.name);\n    }\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ? <a href=\"#\" onClick={this.openFolder}>{item.name}</a> : item.name}\n        </td>\n        <td>{item.shared_by}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>{item.is_dir ? '' : <a href=\"#\" className={`action-icon sf2-icon-download ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Download')} onClick={this.downloadFile}></a>}\n        </td>\n        <td>{this.props.path ? '' : <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>}\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  leaveShare: PropTypes.func.isRequired,\n  openFolder: PropTypes.func.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  static propTypes = {\n    currentPath: PropTypes.string.isRequired,\n    onPathClick: PropTypes.func.isRequired,\n    getAllReceivedShares: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n  }\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  turnPathToLink = (path) => {\n    path = path.slice(1, path.length - 1);\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        if (index === 0) {\n          nodePath = '/';\n        } else {\n          nodePath += item + '/';\n        }\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let pathElem = this.turnPathToLink(this.props.currentPath);\n    return (\n      <div className=\"path-container\">\n        <a href=\"#\" onClick={this.props.getAllReceivedShares}>{gettext('All')}</a>\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = {\n  shareID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  getAllReceivedShares: PropTypes.func.isRequired,\n};\n\nexport default OCMViaWebdav;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  };\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  };\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\nDirentItem.propTypes = {\n  dirent: PropTypes.object.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes =  {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  openFolder: PropTypes.func.isRequired,\n  deleteDirent: PropTypes.func.isRequired,\n  downloadDirent: PropTypes.func.isRequired,\n};\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport axios from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n    this.fileInput = React.createRef();\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  };\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  };\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  };\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      axios.post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nDirView.propTypes = {\n  repoID: PropTypes.string,\n  providerID: PropTypes.string,\n  onTabNavClick: PropTypes.func.isRequired,\n};\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\nimport { SeahubSelect } from '../common/select';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n    this.templateOptions = [];\n    this.storageOptions = [];\n    if (Array.isArray(libraryTemplates) && libraryTemplates.length) {\n      this.templateOptions = libraryTemplates.map((item) => { return {value: item, label: item}; });\n    }\n    if (Array.isArray(storages) && storages.length) {\n      this.storageOptions = storages.map((item) => { return {value: item.id, label: item.name}; });\n    }\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  };\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  };\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  };\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  };\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  };\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  };\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  };\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  };\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyDown={this.handleKeyDown}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label>{gettext('Template')}</Label>\n                <SeahubSelect\n                  defaultValue={this.templateOptions[0]}\n                  options={this.templateOptions}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                  value={this.templateOptions.find(opt => opt.value === this.state.library_template) || null}\n                />\n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label>{gettext('Storage Backend')}</Label>\n                <SeahubSelect\n                  defaultValue={this.storageOptions[0]}\n                  options={this.storageOptions}\n                  onChange={this.handleStorageInputChange}\n                  value={this.storageOptions.find(opt => opt.value === this.state.storage_id) || null}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  };\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  };\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.toggleMore();\n    }\n  };\n\n  visitDeletedviaKey = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      navigate(`${siteRoot}my-libs/deleted/`);\n    }\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item' onKeyDown={this.onDropdownToggleKeyDown}>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\" onKeyDown={this.visitDeletedviaKey}>\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  };\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  };\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n        disabled: true\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n        disabled: true\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  };\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyDown}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  };\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  };\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  };\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  };\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} style={{height: 'auto'}} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>\n          <span>\n            {Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}\n          </span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you don’t receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  };\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  };\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  };\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\" rel=\"noreferrer\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUserItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteUserFolderPermission: PropTypes.func.isRequired,\n  onChangeUserFolderPerm: PropTypes.func.isRequired,\n  showPath: PropTypes.bool.isRequired,\n  repoName: PropTypes.string.isRequired,\n  handleChange: PropTypes.func.isRequired,\n};\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview', 'invisible'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  };\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  };\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  };\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  };\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  };\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  };\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  };\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  };\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  };\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\nimport { SeahubSelect, NoGroupMessage } from '../common/select';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  };\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  };\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\" rel=\"noreferrer\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            autoFocus={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nGroupItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  permissions: PropTypes.array.isRequired,\n  deleteUserFolderPermission: PropTypes.func.isRequired,\n  onChangeUserFolderPerm: PropTypes.func.isRequired,\n  showPath: PropTypes.bool.isRequired,\n  repoName: PropTypes.string.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  deleteGroupPermissionItem: PropTypes.func.isRequired,\n  onChangeGroupPermission: PropTypes.func.isRequired,\n};\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool,\n  repoName: PropTypes.string,\n  folderPath: PropTypes.string,\n};\n\nclass LibSubFolderSetGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview', 'invisible'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  };\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  };\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  };\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  };\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  };\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  };\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  };\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  };\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  };\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  };\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  };\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser\n            repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <SeahubSelect\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage: NoGroupMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  };\n\n  renderContent = () => {\n    const activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'userPermission'} aria-controls=\"user-perm-panel\">\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem role=\"tab\" aria-selected={activeTab === 'groupPermission'} aria-controls=\"group-perm-panel\">\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')} tabIndex=\"0\" onKeyDown={Utils.onKeyDown}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\" role=\"tabpanel\" id=\"user-perm-panel\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\" role=\"tabpanel\" id=\"group-perm-panel\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  };\n\n  render() {\n    const { repoName, folderName } = this.props;\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span>{repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}</span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, isPro, folderPermEnabled, enableRepoSnapshotLabel, enableResetEncryptedRepoPassword, isEmailConfigured, enableRepoAutoDel, enableSeaTableIntegration } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n      isAdvancedMenuShown: false\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'toggle');\n    this.props.onMenuItemClick(operation);\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  };\n\n  toggleAdvancedMenuShown = (e) => {\n    this.setState({ isAdvancedMenuShown: true });\n  };\n\n  toggleAdvancedMenu = (e) => {\n    e.stopPropagation();\n    this.setState({ isAdvancedMenuShown: !this.state.isAdvancedMenuShown }, () => {\n      this.toggleOperationMenu(e);\n    });\n  };\n\n  onDropDownMouseMove = (e) => {\n    if (this.state.isAdvancedMenuShown && e.target && e.target.className === 'dropdown-item') {\n      this.setState({\n        isAdvancedMenuShown: false\n      });\n    }\n  };\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem = isPro && repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured;\n    let operations = ['Rename', 'Transfer'];\n    if (folderPermEnabled) {\n      operations.push('Folder Permission');\n    }\n    operations.push('Share Admin', 'Divider');\n\n    if (repo.encrypted) {\n      operations.push('Change Password');\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push('Reset Password');\n    }\n\n    if (isPro) {\n      const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n      operations.push(monitorOp);\n    }\n\n    operations.push('Divider', 'History Setting', 'Advanced');\n    // Remove adjacent excess 'Divider'\n    for (let i = 0; i < operations.length; i++) {\n      if (operations[i] === 'Divider' && operations[i + 1] === 'Divider') {\n        operations.splice(i, 1);\n        i--;\n      }\n    }\n    return operations;\n  };\n\n  getAdvancedOperations = () => {\n    const operations = [];\n    operations.push('API Token');\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push('Label Current State');\n    }\n    if (enableRepoAutoDel) {\n      operations.push('Old Files Auto Delete');\n    }\n    if (enableSeaTableIntegration) {\n      operations.push('SeaTable integration');\n    }\n    return operations;\n  };\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Star':\n        translateResult = gettext('Star');\n        break;\n      case 'Unstar':\n        translateResult = gettext('Unstar');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Label Current State':\n        translateResult = gettext('Label Current State');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Share Admin':\n        translateResult = gettext('Share Admin');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto Deletion Setting');\n        break;\n      case 'Advanced':\n        translateResult = gettext('Advanced');\n        break;\n      case 'SeaTable integration':\n        translateResult = gettext('SeaTable integration');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  };\n\n  render() {\n    let operations = this.generatorOperations();\n    const advancedOperations = this.getAdvancedOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n          <DropdownToggle\n            tag=\"i\"\n            role=\"button\"\n            tabIndex=\"0\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            onClick={this.onDropdownToggleClick}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            data-toggle=\"dropdown\"\n          />\n          <DropdownMenu onMouseMove={this.onDropDownMouseMove}>\n            {operations.map((item, index)=> {\n              if (item == 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else if (item == 'Advanced') {\n                return (\n                  <Dropdown\n                    key={index}\n                    direction=\"right\"\n                    className=\"w-100\"\n                    isOpen={this.state.isAdvancedMenuShown}\n                    toggle={this.toggleAdvancedMenu}\n                    onMouseMove={(e) => {e.stopPropagation();}}\n                  >\n                    <DropdownToggle\n                      caret\n                      className=\"dropdown-item font-weight-normal rounded-0 d-flex justify-content-between align-items-center pr-2\"\n                      onMouseEnter={this.toggleAdvancedMenuShown}\n                    >\n                      {this.translateOperations(item)}\n                    </DropdownToggle>\n                    <DropdownMenu>\n                      {advancedOperations.map((item, index)=> {\n                        return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateOperations(item)}</DropdownItem>);\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              } else {\n                return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateOperations(item)}</DropdownItem>);\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.pop(); // removed the last item 'Advanced'\n    operations.unshift('Delete');\n    operations.unshift('Share');\n    this.props.isStarred ? operations.unshift('Unstar') : operations.unshift('Star');\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div className={`${this.state.isItemMenuShow ? '' : 'd-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != 'Divider') {\n                return (<DropdownItem key={index} className=\"mobile-menu-item\" data-toggle={item} onClick={this.onMenuItemClick}>{this.translateOperations(item)}</DropdownItem>);\n              }\n              return null;\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport OpIcon from '../op-icon';\nimport { SeahubSelect } from '../common/select';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  };\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  };\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  };\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  };\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <OpIcon title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" op={this.onEditPermission} />\n            }\n          </Fragment>\n          :\n          <SeahubSelect\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n            value={this.options.find(opt => opt.value === currentPermission) || null}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\nimport OpIcon from '../op-icon';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} tabIndex=\"0\" onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n            <OpIcon\n              className=\"far fa-copy action-icon\"\n              op={this.onCopyAPIToken}\n              title={gettext('Copy')}\n            />\n          }\n        </td>\n        <td>\n          <OpIcon\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            op={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nclass DeleteSeatablesDialog extends Component {\n\n  static propTypes = {\n    t: PropTypes.func,\n    accountName: PropTypes.string,\n    onDeleteSeatables: PropTypes.func,\n    closeDialog: PropTypes.func,\n  };\n\n  render () {\n    const { accountName, closeDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={closeDialog}>\n        <ModalHeader toggle={closeDialog}>{gettext('Delete SeaTable base')}</ModalHeader>\n        <ModalBody>\n          <p className=\"pb-6\">{gettext('Are you sure to delete SeaTable {accountName}?').replace('{accountName}', accountName)}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={closeDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.onDeleteSeatables}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nexport default DeleteSeatablesDialog;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DeleteSeatablesDialog from './delete-seatables-dialog';\nimport { gettext } from '../../utils/constants';\n\nclass SeatableAccountItem extends Component {\n\n  constructor (props) {\n    super(props);\n    this.state = {\n      isShowDialog: false,\n    };\n  }\n\n  static propTypes = {\n    t: PropTypes.func,\n    editSeatableSettingAccount: PropTypes.func,\n    deleteStableAccountSetting: PropTypes.func,\n    setting: PropTypes.object,\n    index: PropTypes.number,\n  };\n\n  openDialog = () => {\n    this.setState({isShowDialog: true});\n  };\n\n  closeDialog = () => {\n    this.setState({isShowDialog: false});\n  };\n\n  onDeleteSeatables = () => {\n    const { setting } = this.props;\n    this.props.deleteStableAccountSetting(setting, 'seatable_account_manage');\n    this.closeDialog();\n  };\n\n  render() {\n    const { isShowDialog } = this.state;\n    const { setting, t, index } = this.props;\n    const { base_api_token, base_name, seatable_server_url } = setting;\n    return (\n      <tr key={`account-${base_api_token}`}>\n        <td width='30%' className=\"text-truncate\" title={base_name} aria-label={base_name}>{base_name}</td>\n        <td id={`abc-${index}`} width='55%' className=\"text-truncate\" title={seatable_server_url} aria-label={seatable_server_url}>\n          {seatable_server_url}\n        </td>\n        <td width='15%'>\n          <span\n            className=\"account-operation-btn\"\n            onClick={this.props.editSeatableSettingAccount.bind(this, base_api_token)}\n            title={gettext('Edit')}\n            aria-label={gettext('Edit')}\n          >\n            <i className=\"sf2-icon-edit\" style={{color: '#999'}}></i>\n          </span>\n          <span\n            className=\"account-operation-btn\"\n            onClick={this.openDialog}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n            <i className=\"sf2-icon-delete\" style={{color: '#999'}}></i>\n          </span>\n        </td>\n        {isShowDialog &&\n          <DeleteSeatablesDialog\n            t={t}\n            accountName={base_name}\n            onDeleteSeatables={this.onDeleteSeatables}\n            closeDialog={this.closeDialog}\n          />\n        }\n      </tr>\n    );\n  }\n}\n\nexport default SeatableAccountItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport SeatableAccountItem from './seatable-account-setting-item';\n\nclass SeatableAccountSettingList extends Component {\n\n  static propTypes = {\n    accounts: PropTypes.array,\n    changeStatus: PropTypes.func,\n    editSeatableSettingAccount: PropTypes.func,\n    seatableSettings: PropTypes.array,\n    deleteStableAccountSetting: PropTypes.func,\n  };\n\n  renderContent = () => {\n    const { seatableSettings } = this.props;\n    if (!Array.isArray(seatableSettings) || seatableSettings.length === 0) {\n      return (\n        <div className=\"no-accounts d-flex flex-column align-items-center justify-content-center\">\n          <img src={`${mediaUrl}img/no-items-tip.png`} alt={gettext('No SeaTable bases')} />\n          <p>{gettext('No SeaTable bases')}</p>\n        </div>\n      );\n    }\n    return (\n      <>\n        <table className=\"accounts-list-header\">\n          <thead>\n            <tr>\n              <th width='30%'>{gettext('SeaTable base name')}</th>\n              <th width='55%'>{gettext('SeaTable server URL')}</th>\n              <th width='15%'> </th>\n            </tr>\n          </thead>\n        </table>\n        <div className=\"accounts-list-body\">\n          <table>\n            <tbody>\n              {seatableSettings.map((setting, index) => {\n                return (\n                  <SeatableAccountItem\n                    key={setting.base_api_token}\n                    index={index}\n                    setting={setting}\n                    editSeatableSettingAccount={this.props.editSeatableSettingAccount}\n                    deleteStableAccountSetting={this.props.deleteStableAccountSetting}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </>\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"accounts-manage\">\n        <div className=\"accounts-manage-header d-flex align-items-center justify-content-between\">\n          <span>{'SeaTable'}</span>\n          <Button color=\"primary\" size=\"sm\" outline={true} onClick={this.props.changeStatus}>{gettext('Add')}</Button>\n        </div>\n        <div className=\"accounts-list mt-2\">\n          {this.renderContent()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SeatableAccountSettingList;\n","import React, { Component } from 'react';\nimport { Alert, Input, FormGroup, Label, InputGroup, InputGroupText } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\n\nclass AddSeatableAccountSetting extends Component {\n\n  static propTypes = {\n    t: PropTypes.func,\n    changeStatus: PropTypes.func,\n    onSubmit: PropTypes.func,\n    currentDtableInfo: PropTypes.object,\n    addSeatableAccountSetting: PropTypes.func,\n  };\n\n  constructor(props) {\n    super(props);\n    const { currentDtableInfo } = props;\n    this.state = {\n      errMessage: '',\n      base_name: currentDtableInfo?.base_name || '',\n      seatable_url: currentDtableInfo?.seatable_url || '',\n      seatable_api_token: currentDtableInfo?.base_api_token || '',\n      successMessage: null,\n      stage: 'toCheck',  // toCheck: need to check -> toSubmit: need to submit\n      passwordType: 'password'\n    };\n  }\n\n  onChangeBaseName = (event) => {\n    let value = event.target.value;\n    if (value === this.state.base_name) {\n      return;\n    }\n    this.setState({\n      base_name: value,\n      errMessage: '',\n    });\n  };\n\n  onChangeSeatableUrl = (event) => {\n    let value = event.target.value;\n    if (value === this.state.seatable_url) {\n      return;\n    }\n    this.setState({\n      seatable_url: value,\n      successMessage: null,\n      stage: 'toCheck',\n      errMessage: '',\n    });\n  };\n\n  onChangeSeatableApiToken = (event) => {\n    let value = event.target.value;\n    if (value === this.state.seatable_api_token) {\n      return;\n    }\n    this.setState({\n      seatable_api_token: value,\n      successMessage: null,\n      stage: 'toCheck',\n      errMessage: '',\n    });\n  };\n\n  addSeatableAccountSetting = () => {\n    let { base_name, seatable_url, seatable_api_token } = this.state;\n    base_name = base_name.trim();\n    seatable_url = seatable_url.trim();\n    seatable_api_token = seatable_api_token.trim();\n    let errMessage = '';\n    if (!base_name) {\n      errMessage = gettext('SeaTable base name is required');\n    }\n    else if (!seatable_url) {\n      errMessage = gettext('SeaTable server URL is required');\n    }\n    else if (!seatable_api_token) {\n      errMessage = gettext('SeaTable API token is required');\n    }\n\n    this.setState({errMessage});\n    if (errMessage) return;\n    let detail = {\n      base_name,\n      seatable_url,\n      seatable_api_token\n    };\n    this.props.onSubmit(detail, 'seatable_account_manage');\n  };\n\n  testSeatableAPIToken = async () => {\n    const { seatable_url, seatable_api_token } = this.state;\n    seafileAPI.req.defaults.headers.Authorization = `Token ${seatable_api_token}`;\n    const [res, err] = await seafileAPI.req.get(`${seatable_url}api/v2.1/dtable/app-access-token/`).then(res => [res, null]).catch((err) => [null, err]);\n    if (res) {\n      this.setState({\n        successMessage: res.data,\n        stage: 'toSubmit',\n      });\n    }\n    if (err) {\n      this.setState({\n        errMessage: gettext('URL or SeaTable API token is invalid'),\n      });\n    }\n  };\n\n  togglePasswordShow = () => {\n    if (this.state.passwordType === 'password') {\n      this.setState({passwordType: 'text'});\n    } else {\n      this.setState({passwordType: 'password'});\n    }\n  };\n\n  render() {\n    const { errMessage, stage, successMessage, base_name, seatable_url, seatable_api_token, passwordType } = this.state;\n    return (\n      <div className=\"add-account\">\n        <div className=\"add-account-header d-flex align-items-center justify-content-between\">\n          <span>\n            <span className=\"back-btn d-inline-flex align-items-center justify-content-center\" onClick={this.props.changeStatus}>\n              <i className=\"link-icon icon-left sf3-font sf3-font-arrow\" style={{transform: 'rotate(180deg)', color: '#999'}}></i>\n            </span>\n            <span className=\"add-account-header-text\">{gettext('Add SeaTable Integration')}</span>\n          </span>\n          <button\n            onClick={stage === 'toCheck'? this.testSeatableAPIToken : this.addSeatableAccountSetting}\n            type=\"button\"\n            className=\"btn btn-secondary add-account-btn\"\n          >{stage === 'toCheck' ? gettext('Check') : gettext('Submit')}</button>\n        </div>\n        <div className=\"base-account\">\n          <div className=\"account-name-desc\">\n            <FormGroup>\n              <Label>{gettext('SeaTable base name')}</Label>\n              <Input value={base_name} onChange={this.onChangeBaseName}/>\n            </FormGroup>\n            <FormGroup>\n              <Label>{gettext('SeaTable server URL')}</Label>\n              <Input value={seatable_url} onChange={this.onChangeSeatableUrl}/>\n            </FormGroup>\n            <FormGroup className=\"base-account-password\">\n              <Label>{gettext('SeaTable API token')}</Label>\n              <InputGroup>\n                <Input value={seatable_api_token} type={passwordType} onChange={this.onChangeSeatableApiToken}/>\n                <InputGroupText>\n                  <i className={`fas ${passwordType === 'password' ? 'fa-eye-slash' : 'fa-eye'} cursor-pointer`} onClick={this.togglePasswordShow} />\n                </InputGroupText>\n              </InputGroup>\n            </FormGroup>\n          </div>\n          {errMessage && <Alert color=\"danger\">{errMessage}</Alert>}\n          {successMessage && (\n            <Alert color=\"success\">\n              <span className=\"dtable-font dtable-icon-check-circle mr-2\"></span>\n              {gettext('Successfully connected to SeaTable')}\n            </Alert>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AddSeatableAccountSetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport SeatableAccountSettingList from '../seatable-integration-account-setting-widgets/seatable-account-setting-list.js';\nimport AddSeatableAccountSetting from '../../components/seatable-integration-account-setting-widgets/add-seatable-account-setting.js';\nimport toaster from '../toast';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, internalFilePath, dirPath } from '../../utils/constants';\n\nimport '../../css/repo-seatable-integration-dialog.css';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onSeaTableIntegrationToggle: PropTypes.func.isRequired,\n};\n\nconst STATUS = {\n  SEATABLE_ACCOUNT_MANAGE: 'seatable_account_manage',\n  ADD_SETABLE_ACCOUNT: 'add_seatable_account',\n  UPDATE_SEATABLE_ACCOUNT: 'update_seatable_account'\n};\n\nclass RepoSeaTableIntegrationDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'SeaTable',\n      seatableSettings: [],\n      baseApiToken: '',\n      isPasswordVisible: false,\n      isShowDialog: false,\n      currentDtableInfo: {},\n      status: STATUS.SEATABLE_ACCOUNT_MANAGE,\n    };\n    this.repo = this.props.repo;\n  }\n\n  componentDidMount() {\n    this.getSeatableSettings();\n  }\n\n  getSeatableSettings = async (status) => {\n    seafileAPI.req.defaults.headers.Authorization = null;\n    const [downloadLinkRes] = await seafileAPI.getFileDownloadLink(this.repo.repo_id, internalFilePath).then(res => [res, null]).catch((err) => [null, err]);\n    if (downloadLinkRes && downloadLinkRes.data) {\n      const fileInfoRes = await seafileAPI.getFileContent(downloadLinkRes.data);\n      if (fileInfoRes?.data && fileInfoRes.data) {\n        this.setState({\n          seatableSettings: fileInfoRes.data\n        });\n        status && this.setState({ status });\n      }\n    }\n  };\n\n  changeTab = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  };\n\n  changeStatus = (status) => {\n    this.setState({status});\n  };\n\n  getFile = (detail, fileList) => {\n    const { base_name, seatable_url, seatable_api_token } = detail;\n    let content = [{\n      'base_name': base_name,\n      'seatable_server_url': seatable_url,\n      'base_api_token': seatable_api_token\n    }];\n\n    if (fileList && fileList.length !== 0) {\n      const index = fileList?.findIndex((item) => item.base_api_token === seatable_api_token);\n      if (index !== -1) {\n        fileList[index] = content[0];\n      } else {\n        fileList.push(content[0]);\n      }\n      content = fileList;\n    }\n\n    const fileName = internalFilePath.split('/')[2];\n    const fileContent = JSON.stringify(content);\n    const newFile = new File([fileContent], fileName);\n    return newFile;\n  };\n\n  editSeatableSettingAccount = (baseApiToken) => {\n    const { seatableSettings } = this.state;\n    this.setState({\n      status: STATUS.UPDATE_SEATABLE_ACCOUNT,\n      currentDtableInfo: seatableSettings.find((item) => item.base_api_token === baseApiToken)\n    });\n  };\n\n  deleteStableAccountSetting = async (setting, status) => {\n    const { base_api_token } = setting;\n    seafileAPI.req.defaults.headers.Authorization = null;\n    const [downloadLinkRes] = await seafileAPI.getFileDownloadLink(this.repo.repo_id, internalFilePath).then(res => [res, null]).catch((err) => [null, err]);\n    if (downloadLinkRes && downloadLinkRes.data) {\n      const fileInfoRes = await seafileAPI.getFileContent(downloadLinkRes.data);\n      if (fileInfoRes?.data) {\n        const fileList = fileInfoRes.data;\n        const index = fileList?.findIndex((item) => item.base_api_token === base_api_token);\n        if (index !== -1) {\n          fileList.splice(index, 1);\n          const fileContent = JSON.stringify(fileList);\n          const fileName = internalFilePath.split('/')[2];\n          const newFile = new File([fileContent], fileName);\n          const updateLink = await seafileAPI.getUpdateLink(this.repo.repo_id, internalFilePath.slice(0, 10));\n          await seafileAPI.updateFile(updateLink.data, internalFilePath, fileName, newFile).catch(err => {toaster.danger(gettext(err.message));});\n          this.getSeatableSettings(status);\n        }\n      }\n    }\n  };\n\n  onSubmit = async (detail, status) => {\n    seafileAPI.req.defaults.headers.Authorization = null;\n    const [downloadLinkRes, err] = await seafileAPI.getFileDownloadLink(this.repo.repo_id, internalFilePath).then(res => [res, null]).catch((err) => [null, err]);\n    // Contains configuration files\n    if (downloadLinkRes && downloadLinkRes.data) {\n      const fileInfoRes = await seafileAPI.getFileContent(downloadLinkRes.data);\n      if (fileInfoRes?.data) {\n        const newFile = this.getFile(detail, fileInfoRes.data);\n        const updateLink = await seafileAPI.getUpdateLink(this.repo.repo_id, internalFilePath.slice(0, 10));\n        const fileName = internalFilePath.split('/')[2];\n        await seafileAPI.updateFile(updateLink.data, internalFilePath, fileName, newFile).catch(err => {toaster.danger(gettext(err.message));});\n        this.getSeatableSettings(status);\n      }\n    }\n    // No configuration file\n    if (err) {\n      const uploadLink = await seafileAPI.getFileServerUploadLink(this.repo.repo_id, dirPath);\n      const newFile = this.getFile(detail);\n      const formData = new FormData();\n      formData.append('file', newFile);\n      formData.append('relative_path', internalFilePath.split('/')[1]);\n      formData.append('parent_dir', dirPath);\n      await seafileAPI.uploadImage(uploadLink.data + '?ret-json=1', formData).catch(err => {toaster.danger(gettext(err.message));});\n      this.getSeatableSettings(status);\n    }\n  };\n\n  render() {\n    const { seatableSettings, status, currentDtableInfo } = this.state;\n    const { onSeaTableIntegrationToggle } = this.props;\n    let repo = this.repo;\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} SeaTable integration').replace('{placeholder}', itemName);\n\n    return (\n      <Modal isOpen={true} toggle={onSeaTableIntegrationToggle} className=\"account-dialog\">\n        <ModalHeader toggle={onSeaTableIntegrationToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody className=\"account-dialog-content\">\n          <div className=\"account-dialog-main\">\n            {status === STATUS.SEATABLE_ACCOUNT_MANAGE && (\n              <SeatableAccountSettingList\n                seatableSettings={seatableSettings}\n                changeStatus={() => this.changeStatus(STATUS.ADD_SETABLE_ACCOUNT)}\n                editSeatableSettingAccount={this.editSeatableSettingAccount}\n                deleteStableAccountSetting={this.deleteStableAccountSetting}\n              />\n            )}\n            {status === STATUS.ADD_SETABLE_ACCOUNT && (\n              <AddSeatableAccountSetting\n                changeStatus={() => this.changeStatus(STATUS.SEATABLE_ACCOUNT_MANAGE)}\n                onSubmit={this.onSubmit}\n              />\n            )}\n            {status === STATUS.UPDATE_SEATABLE_ACCOUNT && (\n              <AddSeatableAccountSetting\n                currentDtableInfo={currentDtableInfo}\n                changeStatus={() => this.changeStatus(STATUS.SEATABLE_ACCOUNT_MANAGE)}\n                onSubmit={this.onSubmit}\n              />\n            )}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoSeaTableIntegrationDialog.propTypes = propTypes;\n\nexport default RepoSeaTableIntegrationDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  render() {\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (item.is_dir) {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link>\n            :\n            <a href={objUrl} target=\"_blank\" rel=\"noreferrer\">{item.obj_name}</a>\n          }\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoShareLinks(this.props.repo.repo_id).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteRepoShareLink(this.props.repo.repo_id, item.token).then(() => {\n      let items = this.state.items.filter(linkItem => {\n        return linkItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No share links')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"22%\">{gettext('Creator')}</th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"50%\">{gettext('Link')}</th>\n              <th width=\"8%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminShareLinks.propTypes = propTypes;\n\nexport default RepoShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  render() {\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n    let objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" rel=\"noreferrer\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoUploadLinks(this.props.repo.repo_id).then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteRepoUploadLink(this.props.repo.repo_id, item.token).then(() => {\n      let items = this.state.items.filter(linkItem => {\n        return linkItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No upload links')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"22%\">{gettext('Creator')}</th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"50%\">{gettext('Link')}</th>\n              <th width=\"8%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminUploadLinks.propTypes = propTypes;\n\nexport default RepoShareAdminUploadLinks;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro, username } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport SharePermissionEditor from '../../../components/select-editor/share-permission-editor';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      permission: this.props.item.permission,\n      isOperationShow: false,\n      isShowPermEditor: false,\n    };\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      if (this.props.item.path === '/' && this.props.isRepoOwner) {\n        this.permissions.push('admin');\n      }\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    seafileAPI.updateShareToUserItemPermission(item.repo_id, item.path, 'user', item.share_to, permission).then(() => {\n      this.setState({\n        permission: permission,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <Link to={objUrl}>{Utils.getFolderName(item.path)}</Link>\n        </td>\n        <td className=\"name\">{item.share_to_name}</td>\n        <td>\n          {!this.state.isShowPermEditor && (\n            <div>\n              <span>{item.permission_name || Utils.sharePerms(this.state.permission)}</span>\n              {this.state.isOperationShow && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {this.state.isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={this.state.isOperationShow}\n              isEditing={true}\n              currentPermission={this.state.permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminUserShares extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoFolderShareInfo(this.props.repo.repo_id, 'user').then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.share_info_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteShareToUserItem(item.repo_id, item.path, 'user', item.share_to).then(res => {\n      let items = this.state.items.filter(shareItem => {\n        return shareItem.path + shareItem.share_to !== item.path + item.share_to;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    const { repo } = this.props;\n    const isRepoOwner = repo.owner_email === username;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No user shares')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"30%\">{gettext('User')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"10%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                  isRepoOwner={isRepoOwner}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminUserShares.propTypes = propTypes;\n\nexport default RepoShareAdminUserShares;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../../utils/utils';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, siteRoot, isPro, username } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport toaster from '../../../components/toast';\nimport EmptyTip from '../../../components/empty-tip';\nimport SharePermissionEditor from '../../../components/select-editor/share-permission-editor';\n\nconst itemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteItem: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      permission: this.props.item.permission,\n      isOperationShow: false,\n      isShowPermEditor: false,\n    };\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      if (this.props.item.path === '/' && this.props.isRepoOwner) {\n        this.permissions.push('admin');\n      }\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item);\n  };\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    seafileAPI.updateShareToGroupItemPermission(item.repo_id, item.path, 'group', item.share_to, permission).then(() => {\n      this.setState({\n        permission: permission,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onEditPermission = (event) => {\n    event.nativeEvent.stopImmediatePropagation();\n    this.setState({isShowPermEditor: true});\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td>\n          <Link to={objUrl}>{Utils.getFolderName(item.path)}</Link>\n        </td>\n        <td className=\"name\">{item.share_to_name}</td>\n        <td>\n          {!this.state.isShowPermEditor && (\n            <div>\n              <span>{item.permission_name || Utils.sharePerms(this.state.permission)}</span>\n              {this.state.isOperationShow && (\n                <a href=\"#\"\n                  role=\"button\"\n                  aria-label={gettext('Edit')}\n                  title={gettext('Edit')}\n                  className=\"fa fa-pencil-alt attr-action-icon\"\n                  onClick={this.onEditPermission}>\n                </a>\n              )}\n            </div>\n          )}\n          {this.state.isShowPermEditor && (\n            <SharePermissionEditor\n              repoID={item.repo_id}\n              isTextMode={true}\n              isEditIconShow={this.state.isOperationShow}\n              isEditing={true}\n              currentPermission={this.state.permission}\n              permissions={this.permissions}\n              onPermissionChanged={this.changePerm}\n            />\n          )}\n        </td>\n        <td>\n          <span\n            tabIndex=\"0\"\n            role=\"button\"\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            onKeyDown={Utils.onKeyDown}\n            title={gettext('Delete')}\n            aria-label={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = itemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n};\n\nclass RepoShareAdminGroupShares extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoFolderShareInfo(this.props.repo.repo_id, 'group').then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.share_info_list,\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  deleteItem = (item) => {\n    seafileAPI.deleteShareToGroupItem(item.repo_id, item.path, 'group', item.share_to).then(res => {\n      let items = this.state.items.filter(shareItem => {\n        return shareItem.path + shareItem.share_to !== item.path + item.share_to;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { loading, errorMsg, items } = this.state;\n    const { repo } = this.props;\n    const isRepoOwner = repo.owner_email === username;\n    return (\n      <Fragment>\n        {loading && <Loading />}\n        {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n        {!loading && !errorMsg && !items.length &&\n        <EmptyTip forDialog={true}>\n          <p className=\"text-secondary\">{gettext('No group shares')}</p>\n        </EmptyTip>\n        }\n        {!loading && !errorMsg && items.length > 0 &&\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"30%\">{gettext('Group')}</th>\n              <th width=\"30%\">{gettext('Permission')}</th>\n              <th width=\"10%\"></th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <Item\n                  key={index}\n                  item={item}\n                  deleteItem={this.deleteItem}\n                  isRepoOwner={isRepoOwner}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        }\n      </Fragment>\n    );\n  }\n}\n\nRepoShareAdminGroupShares.propTypes = propTypes;\n\nexport default RepoShareAdminGroupShares;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext, canGenerateShareLink, canGenerateUploadLink } from '../../utils/constants';\nimport RepoShareAdminShareLinks from './repo-share-admin/share-links';\nimport RepoShareAdminUploadLinks from './repo-share-admin/upload-links';\nimport RepoShareAdminUserShares from './repo-share-admin/user-shares';\nimport RepoShareAdminGroupShares from './repo-share-admin/group-shares';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass RepoShareAdminDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.enableShareLink = !this.props.repo.encrypted && canGenerateShareLink;\n    this.enableUploadLink = !this.props.repo.encrypted && canGenerateUploadLink;\n    this.state = {\n      activeTab: this.getInitialActiveTab()\n    };\n  }\n\n  getInitialActiveTab = () => {\n    if (this.enableShareLink) {\n      return 'shareLink';\n    } else if (this.enableUploadLink) {\n      return 'uploadLink';\n    } else {\n      return 'shareToUser';\n    }\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  };\n\n  onTabKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      e.target.click();\n    }\n  };\n\n  render() {\n    const { activeTab } = this.state;\n    const { repo_name: repoName } = this.props.repo;\n\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '760px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span className=\"op-target\" title={repoName}>{repoName}</span> {gettext('Share Admin')}\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\" role=\"tablist\">\n            <Fragment>\n              <div className=\"share-dialog-side\">\n                <Nav pills>\n                  {this.enableShareLink &&\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareLink'} aria-controls=\"share-link-panel\">\n                    <NavLink className={activeTab === 'shareLink' ? 'active' : ''} onClick={(this.toggle.bind(this, 'shareLink'))} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Share Links')}\n                    </NavLink>\n                  </NavItem>\n                  }\n                  {this.enableUploadLink &&\n                    <NavItem role=\"tab\" aria-selected={activeTab === 'uploadLink'} aria-controls=\"upload-link-panel\">\n                      <NavLink className={activeTab === 'uploadLink' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLink')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                        {gettext('Upload Links')}\n                      </NavLink>\n                    </NavItem>\n                  }\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToUser'} aria-controls=\"share-to-user-panel\">\n                    <NavLink className={activeTab === 'shareToUser' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToUser')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('User Shares')}\n                    </NavLink>\n                  </NavItem>\n                  <NavItem role=\"tab\" aria-selected={activeTab === 'shareToGroup'} aria-controls=\"share-to-group-panel\">\n                    <NavLink className={activeTab === 'shareToGroup' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareToGroup')} tabIndex=\"0\" onKeyDown={this.onTabKeyDown}>\n                      {gettext('Group Shares')}\n                    </NavLink>\n                  </NavItem>\n                </Nav>\n              </div>\n              <div className=\"share-dialog-main\">\n                <TabContent activeTab={this.state.activeTab}>\n                  {(this.enableShareLink && activeTab === 'shareLink') &&\n                    <TabPane tabId=\"shareLink\" role=\"tabpanel\" id=\"share-link-panel\">\n                      <RepoShareAdminShareLinks\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {(this.enableUploadLink && activeTab === 'uploadLink') &&\n                    <TabPane tabId=\"uploadLink\" role=\"tabpanel\" id=\"upload-link-panel\">\n                      <RepoShareAdminUploadLinks\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {activeTab === 'shareToUser' &&\n                    <TabPane tabId=\"shareToUser\" role=\"tabpanel\" id=\"share-to-user-panel\">\n                      <RepoShareAdminUserShares\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                  {activeTab === 'shareToGroup' &&\n                    <TabPane tabId=\"shareToGroup\" role=\"tabpanel\" id=\"share-to-group-panel\">\n                      <RepoShareAdminGroupShares\n                        repo={this.props.repo}\n                      />\n                    </TabPane>\n                  }\n                </TabContent>\n              </div>\n            </Fragment>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nRepoShareAdminDialog.propTypes = propTypes;\n\nexport default RepoShareAdminDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet;\n\n    if (this.state.isAutoDel) {\n      daysNeedTobeSet = this.state.autoDelDays;\n\n      let reg = /^-?\\d+$/;\n      let isvalid_days = reg.test(daysNeedTobeSet);\n      if (!isvalid_days || daysNeedTobeSet <= 0) {\n        this.setState({\n          errorInfo: gettext('Please enter a positive integer'),\n        });\n        return;\n      }\n\n    } else {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  };\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  };\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                disabled={!this.state.isAutoDel}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyDown}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, storages } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport toaster from '../../components/toast';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport LibHistorySettingDialog from '../../components/dialog/lib-history-setting-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LabelRepoStateDialog from '../../components/dialog/label-repo-state-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport Rename from '../../components/rename';\nimport MylibRepoMenu from './mylib-repo-menu';\nimport RepoAPITokenDialog from '../../components/dialog/repo-api-token-dialog';\nimport RepoSeaTableIntegrationDialog from '../../components/dialog/repo-seatable-integration-dialog';\nimport RepoShareAdminDialog from '../../components/dialog/repo-share-admin-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isSeaTableIntegrationShow: false,\n      isRepoShareAdminDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n    };\n  }\n\n  onFocus = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true\n      });\n    }\n  };\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false\n      });\n    }\n  };\n\n  onMenuItemClick = (item) => {\n    switch(item) {\n      case 'Star':\n      case 'Unstar':\n        this.onToggleStarRepo();\n        break;\n      case 'Share':\n        this.onShareToggle();\n        break;\n      case 'Delete':\n        this.onDeleteToggle();\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Transfer':\n        this.onTransferToggle();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Folder Permission':\n        this.onFolderPermissionToggle();\n        break;\n      case 'Label Current State':\n        this.onLabelToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Admin':\n        this.toggleRepoShareAdminDialog();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      case 'SeaTable integration':\n        this.onSeaTableIntegrationToggle();\n        break;\n      default:\n        break;\n    }\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  };\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onShareToggle = (e) => {\n    // when close share dialog after send share link email,\n    // there is no event\n    if (e != undefined) {\n      e.preventDefault();\n    }\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  };\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onTransferToggle = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  };\n\n  onLabelToggle = () => {\n    this.setState({isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen});\n  };\n\n  onFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow});\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  };\n\n  onSeaTableIntegrationToggle = () => {\n    this.setState({isSeaTableIntegrationShow: !this.state.isSeaTableIntegrationShow});\n  };\n\n  toggleRepoShareAdminDialog = () => {\n    this.setState({isRepoShareAdminDialogOpen: !this.state.isRepoShareAdminDialogOpen});\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  };\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI.renameRepo(repoID, newName).then(() => {\n      this.props.onRenameRepo(repo, newName);\n      this.onRenameCancel();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI.transferRepo(repoID, user.email).then(res => {\n      this.props.onTransferRepo(repoID);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      if (error.response){\n        toaster.danger(error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Failed. Please check the network.'), {duration: 3});\n      }\n    });\n    this.onTransferToggle();\n  };\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.deleteRepo(repo.repo_id).then((res) => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onDeleteRepo(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick} onFocus={this.onFocus}>\n        <td className=\"text-center\">\n          <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n            <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n        </td>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Fragment>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </Fragment>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            (gettext('Broken (please contact your administrator to fix this library)'))\n          }\n        </td>\n        <td>\n          {(repo.repo_name && this.state.isOpIconShow) && (\n            <div>\n              <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onShareToggle}></a>\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onDeleteToggle}></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n      </tr>\n    );\n  };\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = this.repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div>\n              <Link to={repoURL}>{repo.repo_name}</Link>\n              {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n            </div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            <div>(gettext('Broken (please contact your administrator to fix this library)'))</div>\n          }\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  };\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isSeaTableIntegrationShow && (\n          <ModalPortal>\n            <RepoSeaTableIntegrationDialog\n              repo={repo}\n              onSeaTableIntegrationToggle={this.onSeaTableIntegrationToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareAdminDialogOpen && (\n          <ModalPortal>\n            <RepoShareAdminDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareAdminDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n  onMonitorRepo: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  };\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onMonitorRepo={this.props.onMonitorRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  };\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  };\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  };\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  };\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  };\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onMonitorRepo={this.onMonitorRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDeletedRepoTable.propTypes = {\n  deletedRepoList: PropTypes.array.isRequired,\n  refreshDeletedRepoList: PropTypes.func.isRequired,\n};\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  };\n\n  restoreDeletedRepo = (e) => {\n    e.preventDefault();\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr\n        className={this.state.highlight ? 'tr-highlight' : ''}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        tabIndex=\"0\"\n        onFocus={this.onMouseEnter}\n      >\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <a href=\"#\" onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            role=\"button\" aria-label={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDeletedRepoItem.propTypes = {\n  isItemFreezed: PropTypes.bool.isRequired,\n  repo: PropTypes.object.isRequired,\n  refreshDeletedRepoList: PropTypes.func.isRequired,\n};\n\nMyLibsDeleted.propTypes = {\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  };\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  };\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  };\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  };\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@gatsbyjs/reach-router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured, enableRepoAutoDel } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareAdminDialog from '../dialog/repo-share-admin-dialog';\nimport RepoMonitoredIcon from '../../components/repo-monitored-icon';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onMonitorRepo: PropTypes.func\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isAdvancedMenuShown: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareAdminDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isOldFilesAutoDelDialogOpen: false,\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  };\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.clickOperationMenuToggle(e);\n    }\n  };\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  };\n\n  toggleAdvancedMenuShown = (e) => {\n    this.setState({ isAdvancedMenuShown: true });\n  };\n\n  toggleAdvancedMenu = (e) => {\n    e.stopPropagation();\n    this.setState({ isAdvancedMenuShown: !this.state.isAdvancedMenuShown }, () => {\n      this.toggleOperationMenu(e);\n    });\n  };\n\n  onDropDownMouseMove = (e) => {\n    if (this.state.isAdvancedMenuShown && e.target && e.target.className === 'dropdown-item') {\n      this.setState({\n        isAdvancedMenuShown: false\n      });\n    }\n  };\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Admin':\n        this.toggleRepoShareAdminDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Watch File Changes':\n        this.watchFileChanges();\n        break;\n      case 'Unwatch File Changes':\n        this.unwatchFileChanges();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      // no default\n    }\n  };\n\n  watchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.monitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unwatchFileChanges = () => {\n    const { repo } = this.props;\n    seafileAPI.unMonitorRepo(repo.repo_id).then(() => {\n      this.props.onMonitorRepo(repo, false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  };\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  };\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  };\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  };\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  };\n\n  onItemUnshare = (e) => {\n    e.preventDefault();\n    this.props.onItemUnshare(this.props.repo);\n  };\n\n  onItemDeleteToggle = (e) => {\n    e.preventDefault();\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  };\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  };\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  };\n\n  toggleRepoShareAdminDialog = () => {\n    this.setState({isRepoShareAdminDialogOpen: !this.state.isRepoShareAdminDialogOpen});\n  };\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  };\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  };\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  };\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  };\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Admin':\n        translateResult = gettext('Share Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Watch File Changes':\n        translateResult = gettext('Watch File Changes');\n        break;\n      case 'Unwatch File Changes':\n        translateResult = gettext('Unwatch File Changes');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto Deletion Setting');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Advanced':\n        translateResult = gettext('Advanced');\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  };\n\n  getAdvancedOperations = () => {\n    const operations = [];\n    operations.push('API Token');\n    if (enableRepoAutoDel) {\n      operations.push('Old Files Auto Delete');\n    }\n    return operations;\n  };\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Admin', 'Divider');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            if (repo.permission == 'r' || repo.permission == 'rw') {\n              const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n              operations.push(monitorOp);\n            }\n            operations.push('Divider', 'History Setting', 'Details');\n            if (Utils.isDesktop()) {\n              operations.push('Advanced');\n            }\n            return operations;\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n      if (repo.permission == 'r' || repo.permission == 'rw') {\n        const monitorOp = repo.monitored ? 'Unwatch File Changes' : 'Watch File Changes';\n        operations.push(monitorOp);\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  };\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  };\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} role=\"button\" aria-label={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      const advancedOperations = this.getAdvancedOperations();\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              aria-haspopup={true}\n              style={{'minWidth': '0'}}\n              onClick={this.clickOperationMenuToggle}\n              onKeyDown={this.onDropdownToggleKeyDown}\n            />\n            <DropdownMenu onMouseMove={this.onDropDownMouseMove}>\n              {operations.map((item, index)=> {\n                if (item == 'Divider') {\n                  return <DropdownItem key={index} divider />;\n                } else if (item == 'Advanced') {\n                  return (\n                    <Dropdown\n                      key={index}\n                      direction=\"right\"\n                      className=\"w-100\"\n                      isOpen={this.state.isAdvancedMenuShown}\n                      toggle={this.toggleAdvancedMenu}\n                      onMouseMove={(e) => {e.stopPropagation();}}\n                    >\n                      <DropdownToggle\n                        caret\n                        className=\"dropdown-item font-weight-normal rounded-0 d-flex justify-content-between align-items-center pr-2\"\n                        onMouseEnter={this.toggleAdvancedMenuShown}\n                      >\n                        {this.translateMenuItem(item)}\n                      </DropdownToggle>\n                      <DropdownMenu>\n                        {advancedOperations.map((item, index)=> {\n                          return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>);\n                        })}\n                      </DropdownMenu>\n                    </Dropdown>\n                  );\n                } else {\n                  return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>);\n                }\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      return (\n        <Fragment>\n          {operations.map(item => {\n            switch (item) {\n              case 'Share':\n                return <Fragment key={item}>{shareOperation}</Fragment>;\n              case 'Unshare':\n                return <Fragment key={item}>{unshareOperation}</Fragment>;\n              case 'Watch File Changes':\n              case 'Unwatch File Changes':\n                return (\n                  <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu} key={item}>\n                    <DropdownToggle\n                      className=\"sf-dropdown-toggle sf2-icon-caret-down border-0 p-0\"\n                      title={gettext('More Operations')}\n                      data-toggle=\"dropdown\"\n                      aria-expanded={this.state.isItemMenuShow}\n                      aria-haspopup={true}\n                      style={{'minWidth': '0'}}\n                      onClick={this.clickOperationMenuToggle}\n                      onKeyDown={this.onDropdownToggleKeyDown}\n                    />\n                    <DropdownMenu>\n                      {[item].map((item, index) => {\n                        return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{this.translateMenuItem(item)}</DropdownItem>;\n                      })}\n                    </DropdownMenu>\n                  </Dropdown>\n                );\n              // no default\n              default:\n                return null;\n            }\n          })}\n        </Fragment>\n      );\n    }\n  };\n\n  onToggleStarRepo = (e) => {\n    e.preventDefault();\n    const { repo_name: repoName } = this.props.repo;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n          <td className=\"text-center\">\n            <a href=\"#\" role=\"button\" aria-label={this.state.isStarred ? gettext('Unstar') : gettext('Star')} onClick={this.onToggleStarRepo}>\n              <i className={`fa-star ${this.state.isStarred ? 'fas' : 'far star-empty'}`}></i>\n            </a>\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  };\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  };\n\n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Fragment>\n                <Link to={libPath}>{repo.repo_name}</Link>\n                {repo.monitored && <RepoMonitoredIcon repoID={repo.repo_id} />}\n              </Fragment>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareAdminDialogOpen && (\n          <ModalPortal>\n            <RepoShareAdminDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareAdminDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool,\n  onMonitorRepo: PropTypes.func,\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  };\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  };\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n              onMonitorRepo={this.props.onMonitorRepo}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  };\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  };\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  };\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  };\n\n  onItemDelete = () => {\n    // todo need to optimized\n  };\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  };\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  };\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  };\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  };\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\">×</span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyDown={this.handleKeyDown} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false,\n  };\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  };\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} aria-label={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} aria-label={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} aria-label={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        {!this.props.isCustomPermission && (\n          <div className=\"detail-btn btn-group\">\n            <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Properties')} aria-label={gettext('Properties')} onClick={this.switchViewMode}></button>\n          </div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isMarkdownDraft: false,\n      isSdocDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  };\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      const { isMarkdownDraft, isSdocDraft } = this.state;\n      this.props.onAddFile(path, isMarkdownDraft, isSdocDraft);\n      this.props.toggleDialog();\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isMarkdownDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      }\n    }\n\n    if (!this.state.isMarkdownDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      } else {\n        this.setState({\n          isMarkdownDraft: !this.state.isMarkdownDraft\n        });\n      }\n    }\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n    this.newInput.current.setSelectionRange(0,0);\n  };\n\n  toggleMarkSdocDraft = (e) => {\n    this.setState({\n      isSdocDraft: e.target.checked\n    });\n  };\n\n  render() {\n    const { toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={toggleDialog}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyDown={this.handleKeyDown}\n                innerRef={this.newInput}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {/*this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )*/}\n            {/*this.props.fileType == '.sdoc' && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" checked={isSdocDraft} onChange={this.toggleMarkSdocDraft}/>\n                  <span>{gettext('Mark as draft')}</span>\n                </Label>\n              </FormGroup>\n            )*/}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { enableSeadoc, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '.md',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: '',\n      isMobileOpMenuOpen: false\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen});\n  };\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  };\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top  = targetRect.bottom;\n    let style = {position: 'fixed', display: 'block', left: left, top: top};\n    this.setState({operationMenuStyle: style});\n  };\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: !this.state.isUploadMenuShow,\n      isCreateMenuShow: false,\n    });\n  };\n\n  onUploadFile = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFile(e);\n  };\n\n  onUploadFolder = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFolder(e);\n  };\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: !this.state.isCreateMenuShow,\n      isUploadMenuShow: false,\n    });\n  };\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  };\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: ''\n    });\n  };\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.md'\n    });\n  };\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.xlsx'\n    });\n  };\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.pptx'\n    });\n  };\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.docx'\n    });\n  };\n\n  onCreateSeaDocToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.sdoc'\n    });\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === '/' ? 'library' : 'dir';\n    let itemName = path == '/' ? repoName : Utils.getFolderName(path);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canUpload = true;\n    let canCreate = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canUpload = permission.upload;\n      canCreate = permission.create;\n    }\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {canUpload && (\n            <Fragment>\n              {Utils.isSupportUploadFolder() ?\n                <Fragment>\n                  <button className=\"btn btn-secondary operation-item\" onClick={this.onUploadClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"upload-menu\">{gettext('Upload')}</button>\n                  {this.state.isUploadMenuShow && (\n                    <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"upload-menu\">\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFile} role=\"menuitem\">{gettext('Upload Files')}</button>\n                      <button type=\"button\" className=\"dropdown-item\" onClick={this.onUploadFolder} role=\"menuitem\">{gettext('Upload Folder')}</button>\n                    </div>\n                  )}\n                </Fragment>\n                :\n                <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadFile}>{gettext('Upload')}</button>}\n            </Fragment>\n          )}\n          {canCreate &&\n          <Fragment>\n            <button className=\"btn btn-secondary operation-item\" onClick={this.onCreateClick} aria-haspopup=\"true\" aria-expanded={this.state.isUploadMenuShow} aria-controls=\"new-menu\">{gettext('New')}</button>\n            {this.state.isCreateMenuShow && (\n              <div className=\"menu dropdown-menu\" style={this.state.operationMenuStyle} role=\"menu\" id=\"new-menu\">\n                <button className=\"dropdown-item\" onClick={this.onCreateFolderToggle} role=\"menuitem\">{gettext('New Folder')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateFileToggle}>{gettext('New File')}</button>\n                <div className=\"dropdown-divider\"></div>\n                <button className=\"dropdown-item\" onClick={this.onCreateMarkdownToggle} role=\"menuitem\">{gettext('New Markdown File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateExcelToggle} role=\"menuitem\">{gettext('New Excel File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreatePPTToggle} role=\"menuitem\">{gettext('New PowerPoint File')}</button>\n                <button className=\"dropdown-item\" onClick={this.onCreateWordToggle} role=\"menuitem\">{gettext('New Word File')}</button>\n                {enableSeadoc && <button className=\"dropdown-item\" onClick={this.onCreateSeaDocToggle} role=\"menuitem\">{gettext('New SeaDoc File')} (beta)</button>}\n              </div>\n            )}\n          </Fragment>\n          }\n          {showShareBtn && <button className=\"btn btn-secondary operation-item\" title={gettext('Share')} onClick={this.onShareClick}>{gettext('Share')}</button>}\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown isOpen={this.state.isMobileOpMenuOpen} toggle={this.toggleMobileOpMenu}>\n          <DropdownToggle tag=\"span\" className=\"sf2-icon-plus mobile-toolbar-icon\" />\n          <DropdownMenu>\n            {canUpload && (\n              <DropdownItem onClick={this.onUploadFile}>{gettext('Upload')}</DropdownItem>\n            )}\n            {canCreate && (\n              <Fragment>\n                <DropdownItem onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</DropdownItem>\n                <DropdownItem onClick={this.onCreateFileToggle}>{gettext('New File')}</DropdownItem>\n              </Fragment>\n            )}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === 'rw' || userPerm === 'admin' || userPerm === 'cloud-edit' || isCustomPermission) && (\n          <div className=\"dir-operation\">\n            {content}\n          </div>\n        )}\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  };\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  };\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  };\n\n  toggle = () => {\n    this.props.onCancelMove();\n  };\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  };\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  };\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    const { dirent, selectedDirentList } = this.props;\n    const movedDirent = dirent ? dirent : selectedDirentList[0];\n    const { permission } = movedDirent;\n    const { isCustomPermission } = Utils.getUserPermission(permission);\n    if (isCustomPermission) {\n      mode = 'only_current_library';\n    }\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path；\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: { repo_id: this.props.repoID },\n      selectedPath: this.props.path,\n      errMessage: ''\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  };\n\n  copyItems = () => {\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  };\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  };\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  };\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: ''\n    });\n  };\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  };\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { TAG_COLORS } from '../../constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: TAG_COLORS[0],\n      newTag: {},\n      errorMsg: '',\n    };\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  };\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  };\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  };\n\n  render() {\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyDown={this.handleKeyDown} autoFocus={true} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"d-flex justify-content-between\">\n                {TAG_COLORS.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"tag-color-option\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor:item}}>\n                          <i className=\"fas fa-check color-selected\"></i>\n                        </span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  };\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList || [];\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  };\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { repoTag } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"d-flex align-items-center\">\n          <span className=\"tag-color w-4 h-4 rounded-circle\" style={{backgroundColor: repoTag.color}}></span>\n          <span className=\"tag-name mx-2\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody className=\"px-0\">\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a\n            href=\"#\"\n            className=\"add-tag-link px-4 py-2 d-flex align-items-center\"\n            onClick={this.props.createNewTag}\n          >\n            <span className=\"sf2-icon-plus mr-2\"></span>\n            {gettext('Create a new tag')}\n          </a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  };\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} autoFocus={false}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  UNSAFE_componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let { dirent } = this.props;\n    this.changeState(dirent);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  };\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  };\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    this.newInput.current.focus();\n\n    let { dirent } = this.props;\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  };\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyDown={this.handleKeyDown} innerRef={this.newInput} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  };\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  };\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  };\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  };\n\n  onMarkAsDraft = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(dirent, 'is_sdoc_draft', true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnmarkAsDraft = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocUnmarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(dirent, 'is_sdoc_draft', false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onStartRevise = (dirent) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.sdocStartRevise(repoID, filePath).then((res) => {\n      let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(res.data.file_path);\n      window.open(url);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  };\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Mark as draft':\n        this.onMarkAsDraft(dirent);\n        break;\n      case 'Unmark as draft':\n        this.onUnmarkAsDraft(dirent);\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  };\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  };\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  };\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  };\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  };\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  };\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n    const direntPath = this.getDirentPath(dirent);\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    let canDelete = true;\n    let canDownload = true;\n    let canCopy = true;\n    let canModify = true;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDelete = permission.delete;\n      canDownload = permission.download;\n      canCopy = permission.copy;\n      canModify = permission.modify;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin' || isCustomPermission) && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                  {canDownload && <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'cloud-edit' && (\n                <Fragment>\n                  {canModify && <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} aria-label={gettext('Move')} onClick={this.onMoveToggle}></Button>}\n                  {canCopy && <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>}\n                  {canDelete && <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} aria-label={gettext('Delete')} onClick={this.onItemsDelete}></Button>}\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} aria-label={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} aria-label={gettext('Download')} onClick={this.onItemsDownload}></Button>\n                </Fragment>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  };\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  };\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  };\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  };\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  };\n\n  render() {\n    let { filePermission } = this.props;\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport ViewModeToolbar from '../../components/toolbar/view-mode-toolbar';\nimport DirOperationToolBar from '../../components/toolbar/dir-operation-toolbar';\nimport MultipleDirOperationToolbar from '../../components/toolbar/multiple-dir-operation-toolbar';\nimport ViewFileToolbar from '../../components/toolbar/view-file-toolbar';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,  // for file-view-toolbar\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemRename: PropTypes.func,\n  showDirentDetail: PropTypes.func,\n};\n\nclass LibContentToolbar extends React.Component {\n\n  render() {\n\n    const { userPerm } = this.props;\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} isCustomPermission={isCustomPermission} />\n          </div>\n          <CommonToolbar\n            isLibView={true}\n            repoID={this.props.repoID}\n            repoName={this.props.repoName}\n            onSearchedClick={this.props.onSearchedClick}\n            searchPlaceholder={gettext('Search files')}\n          />\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n          {this.props.isDirentSelected ?\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            /> :\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          }\n        </div>\n        <CommonToolbar\n          isLibView={true}\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          onSearchedClick={this.props.onSearchedClick}\n          searchPlaceholder={gettext('Search files')}\n        />\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { InternalLinkOperation } from '../operations';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  };\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  };\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile && (\n          <InternalLinkOperation repoID={this.props.repoID} path={this.props.currentPath}/>\n        )}\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1 d-flex align-items-center\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { TAG_COLORS } from '../../constants';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagColorPropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagColor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.color !== this.props.tag.color) {\n      this.setState({\n        tagColor: nextProps.tag.color,\n      });\n    }\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  };\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, name } = tag;\n    seafileAPI.updateRepoTag(repoID, id, name, newColor).then(() => {\n      this.setState({\n        tagColor: newColor,\n        isPopoverOpen: !this.state.isPopoverOpen\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = [...TAG_COLORS];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"tag-color-popover mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n\nTagColor.propTypes = tagColorPropTypes;\n\nexport default TagColor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nimport '../../css/repo-tag.css';\n\nconst tagNamePropTypes = {\n  tag: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired\n};\n\nclass TagName extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: false\n    };\n    this.input = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.name !== this.props.tag.name) {\n      this.setState({\n        tagName: nextProps.tag.name,\n      });\n    }\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    }, () => {\n      if (this.state.isEditing) {\n        this.input.current.focus();\n      }\n    });\n  };\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    const { repoID, tag } = this.props;\n    const { id, color } = tag;\n    seafileAPI.updateRepoTag(repoID, id, newName, color).then(() => {\n      this.setState({\n        tagName: newName\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n    else if (e.key == 'Escape') {\n      e.nativeEvent.stopImmediatePropagation();\n      this.toggleMode();\n    }\n  };\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  };\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n\nTagName.propTypes = tagNamePropTypes;\n\nexport default TagName;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport TagColor from '../dialog/tag-color';\nimport TagName from '../dialog/tag-name';\n\nimport '../../css/repo-tag.css';\nimport './list-tag-popover.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  onDeleteTag : PropTypes.func.isRequired\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      isTagHighlighted: true\n    });\n  };\n\n  onMouseOut = () => {\n    this.setState({\n      isTagHighlighted: false\n    });\n  };\n\n  deleteTag = () => {\n    this.props.onDeleteTag(this.props.item);\n  };\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <TagColor repoID={repoID} tag={item} />\n        <TagName repoID={repoID} tag={item} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nexport default TagListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Popover, PopoverBody } from 'reactstrap';\nimport { TAG_COLORS } from '../../constants';\n\nimport '../../css/repo-tag.css';\n\nexport default class VirtualTagColor extends React.Component {\n\n  static propTypes = {\n    updateVirtualTag: PropTypes.func.isRequired,\n    tag: PropTypes.object.isRequired,\n    repoID: PropTypes.string.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagColor: this.props.tag.color,\n      isPopoverOpen: false\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.color !== this.props.tag.color) {\n      this.setState({\n        tagColor: nextProps.tag.color,\n      });\n    }\n  }\n\n  togglePopover = () => {\n    this.setState({\n      isPopoverOpen: !this.state.isPopoverOpen\n    });\n  };\n\n  selectTagColor = (e) => {\n    const newColor = e.target.value;\n    this.props.updateVirtualTag(this.props.tag, { color: newColor });\n    this.setState({\n      tagColor: newColor,\n      isPopoverOpen: !this.state.isPopoverOpen,\n    });\n  };\n\n  render() {\n    const { isPopoverOpen, tagColor } = this.state;\n    const { tag } = this.props;\n    const { id, color } = tag;\n\n    let colorList = [...TAG_COLORS];\n    // for color from previous color options\n    if (colorList.indexOf(color) == -1) {\n      colorList.unshift(color);\n    }\n\n    return (\n      <div>\n        <span\n          id={`tag-${id}-color`}\n          className=\"tag-color cursor-pointer rounded-circle d-flex align-items-center justify-content-center\"\n          style={{backgroundColor: tagColor}}\n          onClick={this.togglePopover}\n        >\n          <i className=\"fas fa-caret-down text-white\"></i>\n        </span>\n        <Popover\n          target={`tag-${id}-color`}\n          isOpen={isPopoverOpen}\n          placement=\"bottom\"\n          toggle={this.togglePopover}\n          className=\"tag-color-popover mw-100\"\n        >\n          <PopoverBody className=\"p-2\">\n            <div className=\"d-flex justify-content-between\">\n              {colorList.map((item, index)=>{\n                return (\n                  <div key={index} className=\"tag-color-option mx-1\">\n                    <label className=\"colorinput\">\n                      <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked={item == tagColor} onClick={this.selectTagColor} />\n                      <span className=\"colorinput-color rounded-circle d-flex align-items-center justify-content-center\" style={{backgroundColor: item}}>\n                        <i className=\"fas fa-check color-selected\"></i>\n                      </span>\n                    </label>\n                  </div>\n                );\n              })\n              }\n            </div>\n          </PopoverBody>\n        </Popover>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport '../../css/repo-tag.css';\n\nexport default class VirtualTagName extends React.Component {\n\n  static propTypes = {\n    updateVirtualTag: PropTypes.func.isRequired,\n    tag: PropTypes.object.isRequired,\n    repoID: PropTypes.string.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: this.props.tag.name,\n      isEditing: true,\n    };\n    this.input = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.tag.name !== this.props.tag.name) {\n      this.setState({\n        tagName: nextProps.tag.name,\n      });\n    }\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.input.current.focus();\n    }, 1);\n  }\n\n  toggleMode = () => {\n    this.setState({\n      isEditing: !this.state.isEditing\n    });\n  };\n\n  updateTagName = (e) => {\n    const newName = e.target.value;\n    this.props.updateVirtualTag(this.props.tag, { name: newName });\n    this.setState({\n      tagName: newName\n    });\n  };\n\n  onInputKeyDown = (e) => {\n    if (e.key == 'Enter') {\n      this.toggleMode();\n      this.updateTagName(e);\n    }\n    else if (e.key == 'Escape') {\n      e.nativeEvent.stopImmediatePropagation();\n      this.toggleMode();\n    }\n  };\n\n  onInputBlur = (e) => {\n    this.toggleMode();\n    this.updateTagName(e);\n  };\n\n  render() {\n    const { isEditing, tagName } = this.state;\n    return (\n      <div className=\"mx-2 flex-fill d-flex\">\n        {isEditing ?\n          <input\n            type=\"text\"\n            ref={this.input}\n            defaultValue={tagName}\n            onBlur={this.onInputBlur}\n            onKeyDown={this.onInputKeyDown}\n            className=\"flex-fill form-control-sm form-control\"\n          /> :\n          <span\n            onClick={this.toggleMode}\n            className=\"cursor-pointer flex-fill\"\n            style={{width: 100, height: 20}}\n          >{tagName}</span>\n        }\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport VirtualTagColor from './virtual-tag-color';\nimport VirtualTagName from './virtual-tag-name';\n\nimport '../../css/repo-tag.css';\nimport './list-tag-popover.css';\n\nexport default class VirtualTagListItem extends React.Component {\n\n  static propTypes = {\n    item: PropTypes.object.isRequired,\n    repoID: PropTypes.string.isRequired,\n    deleteVirtualTag: PropTypes.func.isRequired,\n    updateVirtualTag: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isTagHighlighted: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({ isTagHighlighted: true });\n  };\n\n  onMouseOut = () => {\n    this.setState({ isTagHighlighted: false });\n  };\n\n  deleteVirtualTag = () => {\n    this.props.deleteVirtualTag(this.props.item);\n  };\n\n  render() {\n    const { isTagHighlighted } = this.state;\n    const { item, repoID } = this.props;\n    return (\n      <li\n        className={`tag-list-item px-4 d-flex justify-content-between align-items-center ${isTagHighlighted ? 'hl' : ''}`}\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        <VirtualTagColor repoID={repoID} tag={item} updateVirtualTag={this.props.updateVirtualTag} />\n        <VirtualTagName repoID={repoID} tag={item} updateVirtualTag={this.props.updateVirtualTag} />\n        <button\n          className={`tag-delete-icon sf2-icon-delete border-0 px-0 bg-transparent cursor-pointer ${isTagHighlighted ? '' : 'invisible'}`}\n          onClick={this.deleteVirtualTag}\n          aria-label={gettext('Delete')}\n          title={gettext('Delete')}\n        ></button>\n      </li>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Tooltip } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport toaster from '../toast';\n\nexport default class TagListFooter extends Component {\n\n  static propTypes = {\n    repoID: PropTypes.string.isRequired,\n    toggle: PropTypes.func.isRequired,\n    repotagList: PropTypes.array.isRequired,\n    updateTags: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showTooltip: false,\n    };\n  }\n\n  toggleTooltip = () => {\n    this.setState({showTooltip: !this.state.showTooltip});\n  };\n\n  onClickImport = () => {\n    this.importOptionsInput.click();\n  };\n\n  importTagsInputChange = () => {\n    if (!this.importOptionsInput.files || !this.importOptionsInput.files.length) {\n      toaster.warning(gettext('Please select a file'));\n      return;\n    }\n    const fileReader = new FileReader();\n    fileReader.onload = this.onImportTags.bind(this);\n    fileReader.onerror = this.onImportTagsError.bind(this);\n    fileReader.readAsText(this.importOptionsInput.files[0]);\n  };\n\n  getValidTags = (tags) => {\n    let validTags = [];\n    let tagNameMap = {};\n    this.props.repotagList.forEach(tag => tagNameMap[tag.name] = true);\n    for (let i = 0; i < tags.length; i++) {\n      if (!tags[i] || typeof tags[i] !== 'object' || !tags[i].name || !tags[i].color) {\n        continue;\n      }\n      if (!tagNameMap[tags[i].name]) {\n        validTags.push(\n          {\n            name: tags[i].name,\n            color: tags[i].color,\n          }\n        );\n        tagNameMap[tags[i].name] = true;\n      }\n    }\n    return validTags;\n  };\n\n  onImportTags = (event) => {\n    let tags = [];\n    try {\n      tags = JSON.parse(event.target.result); // handle JSON file format is error\n    } catch (error) {\n      toaster.danger(gettext('The imported tags are invalid'));\n      return;\n    }\n    if (!Array.isArray(tags) || tags.length === 0) {\n      toaster.danger(gettext('The imported tags are invalid'));\n      return;\n    }\n    let validTags = this.getValidTags(tags);\n    if (validTags.length === 0) {\n      toaster.warning(gettext('The imported tag already exists'));\n      return;\n    }\n    seafileAPI.createRepoTags(this.props.repoID, validTags).then((res) => {\n      toaster.success(gettext('Tags imported'));\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.props.updateTags(repotagList);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n    this.importOptionsInput.value = null;\n  };\n\n  onImportTagsError = () => {\n    toaster.success(gettext('Failed to import tags. Please reupload.'));\n  };\n\n  getDownloadUrl = () => {\n    const tags = this.props.repotagList.map(item => {\n      return { name: item.name, color: item.color };\n    });\n    return `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(tags))}`;\n  };\n\n  render() {\n    return (\n      <div className=\"tag-list-footer\">\n        <span className=\"fa fa-question-circle mr-2\" style={{color: '#999'}} id=\"import-export-tags-tip\"></span>\n        <Tooltip\n          toggle={this.toggleTooltip}\n          delay={{show: 0, hide: 0}}\n          target='import-export-tags-tip'\n          placement='bottom'\n          isOpen={this.state.showTooltip}\n        >\n          {gettext('Use the import/export function to transfer tags quickly to another library. (The export is in JSON format.)')}\n        </Tooltip>\n        <input\n          type=\"file\"\n          ref={ref => this.importOptionsInput = ref}\n          accept='.json'\n          className=\"d-none\"\n          onChange={this.importTagsInputChange}\n        />\n        <span className=\"item-text\" onClick={this.onClickImport}>{gettext('Import tags')}</span>\n        <span className=\"mx-2\">|</span>\n        <a href={this.getDownloadUrl()} download='tags.json' onClick={this.props.toggle}>\n          <span className=\"item-text\">{gettext('Export tags')}</span>\n        </a>\n      </div>\n    );\n  }\n}\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\nimport TagListItem from './tag-list-item';\nimport VirtualTagListItem from './virtual-tag-list-item';\nimport TagListFooter from './tag-list-footer';\nimport { TAG_COLORS } from '../../constants/';\n\nimport '../../css/repo-tag.css';\nimport './list-tag-popover.css';\n\nexport default class ListTagPopover extends React.Component {\n\n  static propTypes = {\n    repoID: PropTypes.string.isRequired,\n    onListTagCancel: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: []\n    };\n  }\n\n  componentDidMount() {\n    this.loadTags();\n  }\n\n  loadTags = () => {\n    seafileAPI.listRepoTags(this.props.repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({ repotagList });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateTags = (newRepotagList) => {\n    this.setState({\n      repotagList: [...this.state.repotagList, ...newRepotagList],\n    });\n  };\n\n  onDeleteTag = (tag) => {\n    const { repoID } = this.props;\n    const { id: targetTagID } = tag;\n    seafileAPI.deleteRepoTag(repoID, targetTagID).then((res) => {\n      this.setState({\n        repotagList: this.state.repotagList.filter(tag => tag.id != targetTagID)\n      });\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  createVirtualTag = (e) => {\n    e.preventDefault();\n    let { repotagList } = this.state;\n    let virtual_repo_tag = {\n      name: '',\n      color: TAG_COLORS[Math.floor(Math.random() * TAG_COLORS.length)], // generate random tag color for virtual tag\n      id: `virtual-tag-${uuidv4()}`,\n      is_virtual: true,\n    };\n    repotagList.push(virtual_repo_tag);\n    this.setState({ repotagList });\n  };\n\n  deleteVirtualTag = (virtualTag) => {\n    let { repotagList } = this.state;\n    let index = repotagList.findIndex(item => item.id === virtualTag.id);\n    repotagList.splice(index, 1);\n    this.setState({ repotagList });\n  };\n\n  updateVirtualTag = (virtualTag, data) => {\n    const repoID = this.props.repoID;\n    const { repotagList } = this.state;\n    const index = repotagList.findIndex(item => item.id === virtualTag.id);\n    if (index < 0) return null;\n\n    // If virtual tag color is updated and virtual tag name is empty, it will be saved to local state, don't save it to the server\n    if (data.color) {\n      virtualTag.color = data.color;\n      repotagList[index] = virtualTag;\n      this.setState({ repotagList });\n      return;\n    }\n\n    // If virtual tag name is updated and name is not empty, virtual tag color use default, save it to the server\n    if (data.name && data.name.length > 0) {\n      let color = virtualTag.color;\n      let name = data.name;\n      seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n        // After saving sag to the server, replace the virtual tag with newly created tag\n        repotagList[index] = new RepoTag(res.data.repo_tag);\n        this.setState({ repotagList });\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <ul className=\"tag-list tag-list-container my-2\">\n          {this.state.repotagList.map((repoTag, index) => {\n            if (repoTag.is_virtual) {\n              return (\n                <VirtualTagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  deleteVirtualTag={this.deleteVirtualTag}\n                  updateVirtualTag={this.updateVirtualTag}\n                />\n              );\n            } else {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  repoID={this.props.repoID}\n                  onDeleteTag={this.onDeleteTag}\n                />\n              );\n            }\n          })}\n        </ul>\n        <div className=\"add-tag-link px-4 py-2 d-flex align-items-center\" onClick={this.createVirtualTag}>\n          <span className=\"sf2-icon-plus mr-2\"></span>{gettext('Create a new tag')}\n        </div>\n        <TagListFooter\n          toggle={this.props.onListTagCancel}\n          repotagList={this.state.repotagList}\n          updateTags={this.updateTags}\n          repoID={this.props.repoID}\n        />\n      </Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SeahubPopover from '../common/seahub-popover';\nimport ListTagPopover from '../popover/list-tag-popover';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListRepoTagShow: false,\n    };\n    this.tagsIconID = `tags-icon-${uuidv4()}`;\n  }\n\n  onMouseDown = (e) => {\n    e.stopPropagation();\n  };\n\n  toggleRepoTag = (e) => {\n    e.stopPropagation();\n    this.setState({ isListRepoTagShow: !this.state.isListRepoTagShow });\n  };\n\n  hidePopover = (e) => {\n    if (e) {\n      let dom = e.target;\n      while (dom) {\n        if (typeof dom.className === 'string' && dom.className.includes('tag-color-popover')) return;\n        dom = dom.parentNode;\n      }\n    }\n    this.setState({ isListRepoTagShow: false });\n  };\n\n  toggleCancel = () => {\n    this.setState({ isListRepoTagShow: false });\n  };\n\n  isMarkdownFile(filePath) {\n    return Utils.getFileName(filePath).includes('.md');\n  }\n\n  render() {\n    let { repoID, userPerm, currentPath } = this.props;\n    if (userPerm !== 'rw') {\n      return '';\n    }\n    if (this.isMarkdownFile(currentPath)) {\n      return '';\n    }\n    let toolbarDom = null;\n    if (Utils.getFileName(currentPath)) { // name not '' is not root path\n      let trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n      toolbarDom = (\n        <ul className=\"path-toolbar\">\n          <li className=\"toolbar-item\">\n            <a\n              className=\"op-link sf2-icon-tag\"\n              href=\"#\"\n              id={this.tagsIconID}\n              role=\"button\"\n              onClick={this.toggleRepoTag}\n              onMouseDown={this.onMouseDown}\n              title={gettext('Tags')}\n              aria-label={gettext('Tags')}\n            ></a>\n          </li>\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a>\n          </li>\n        </ul>\n      );\n    } else { // currentPath === '/' is root path\n      let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n      let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n      toolbarDom = (\n        <ul className=\"path-toolbar\">\n          <li className=\"toolbar-item\">\n            <a\n              className=\"op-link sf2-icon-tag\"\n              href=\"#\"\n              id={this.tagsIconID}\n              role=\"button\"\n              onClick={this.toggleRepoTag}\n              onMouseDown={this.onMouseDown}\n              title={gettext('Tags')}\n              aria-label={gettext('Tags')}\n            ></a>\n          </li>\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a>\n          </li>\n          <li className=\"toolbar-item\">\n            <a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a>\n          </li>\n        </ul>\n      );\n    }\n    return (\n      <>\n        {toolbarDom}\n        {this.state.isListRepoTagShow &&\n          <SeahubPopover\n            popoverClassName=\"list-tag-popover\"\n            target={this.tagsIconID}\n            hideSeahubPopover={this.hidePopover}\n            hideSeahubPopoverWithEsc={this.hidePopover}\n            canHideSeahubPopover={true}\n            boundariesElement={document.body}\n            placement={'bottom-end'}\n          >\n            <ListTagPopover\n              repoID={repoID}\n              onListTagCancel={this.toggleCancel}\n            />\n          </SeahubPopover>\n        }\n      </>\n    );\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  userPerm: PropTypes.string,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  direntList: PropTypes.array,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          userPerm={this.props.userPerm}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Col } from 'reactstrap';\n\nfunction ColumnName(props) {\n  const { column } = props;\n  const { name } = column;\n\n  return (\n    <Col md={3} className=\"d-flex column-name\">\n      <div className=\"w-100 text-truncate\">\n        {name || ''}\n      </div>\n    </Col>\n  );\n}\n\nColumnName.propTypes = {\n  column: PropTypes.object.isRequired,\n};\n\nexport default ColumnName;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { KeyCodes } from '../../../../constants';\n\nclass SimpleText extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.row[props.column.key] || '',\n    };\n    this.inputRef = React.createRef();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const nextValue = nextProps.row[nextProps.column.key];\n    if (nextValue !== this.state.value) {\n      this.setState({ value: nextValue });\n    }\n  }\n\n  blurInput = () => {\n    setTimeout(() => {\n      this.inputRef.current && this.inputRef.current.blur();\n    }, 1);\n  };\n\n  onBlur = () => {\n    let { column, onCommit } = this.props;\n    const updated = {};\n    updated[column.key] = this.state.value.trim();\n    onCommit(updated, column);\n  };\n\n  onChange = (e) => {\n    let value = e.target.value;\n    if (value === this.state.value) return;\n    this.setState({value});\n  };\n\n  onCut = (e) => {\n    e.stopPropagation();\n  };\n\n  onPaste = (e) => {\n    e.stopPropagation();\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === KeyCodes.Esc) {\n      e.stopPropagation();\n      this.blurInput();\n      return;\n    }\n    let { selectionStart, selectionEnd, value } = e.currentTarget;\n    if (\n      (e.keyCode === KeyCodes.ChineseInputMethod) ||\n      (e.keyCode === KeyCodes.LeftArrow && selectionStart === 0) ||\n      (e.keyCode === KeyCodes.RightArrow && selectionEnd === value.length)\n    ) {\n      e.stopPropagation();\n    }\n  };\n\n  render() {\n    const { column } = this.props;\n    const { value } = this.state;\n\n    return (\n      <input\n        type=\"text\"\n        onBlur={this.onBlur}\n        onCut={this.onCut}\n        onPaste={this.onPaste}\n        onChange={this.onChange}\n        className=\"form-control\"\n        value={value || ''}\n        onKeyDown={this.onKeyDown}\n        disabled={!column.editable}\n        ref={this.inputRef}\n      />\n    );\n  }\n}\n\nSimpleText.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  onCommit: PropTypes.func.isRequired,\n};\n\nexport default SimpleText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FORMULA_RESULT_TYPE } from '../../../../constants';\nimport { getDateDisplayString } from '../../../../utils/extra-attributes';\n\nfunction FormulaFormatter(props) {\n  const { column, row } = props;\n  const value = row[column.key];\n\n  const { data } = column;\n  const { result_type, format } = data || {};\n  if (result_type === FORMULA_RESULT_TYPE.DATE) {\n    return (\n      <div className=\"form-control disabled\">{getDateDisplayString(value, format)}</div>\n    );\n  }\n  if (result_type === FORMULA_RESULT_TYPE.STRING) {\n    return value;\n  }\n  if (typeof value === 'object') {\n    return null;\n  }\n  return <></>;\n}\n\nFormulaFormatter.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n};\n\nexport default FormulaFormatter;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nclass SearchInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchValue: props.value,\n    };\n    this.isInputtingChinese = false;\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  componentDidMount() {\n    if (this.props.autoFocus && this.inputRef && this.inputRef !== document.activeElement) {\n      setTimeout(() => {\n        this.inputRef.focus();\n      }, 0);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.props.value) {\n      this.setState({searchValue: nextProps.value});\n    }\n  }\n\n  componentWillUnmount() {\n    this.timer && clearTimeout(this.timer);\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  onCompositionStart = () => {\n    this.isInputtingChinese = true;\n  };\n\n  onChange = (e) => {\n    this.timer && clearTimeout(this.timer);\n    const { onChange, wait } = this.props;\n    let text = e.target.value;\n    this.setState({searchValue: text || ''}, () => {\n      if (this.isInputtingChinese) return;\n      this.timer = setTimeout(() => {\n        onChange && onChange(this.state.searchValue.trim());\n      }, wait);\n    });\n  };\n\n  onCompositionEnd = (e) => {\n    this.isInputtingChinese = false;\n    this.onChange(e);\n  };\n\n  setFocus = (isSelectAllText) => {\n    if (this.inputRef === document.activeElement) return;\n    this.inputRef.focus();\n    if (isSelectAllText) {\n      const txtLength = this.state.searchValue.length;\n      this.inputRef.setSelectionRange(0, txtLength);\n    }\n  };\n\n  render() {\n    const { placeholder, autoFocus, className, onKeyDown, disabled, style } = this.props;\n    const { searchValue } = this.state;\n\n    return (\n      <input\n        type=\"text\"\n        value={searchValue}\n        className={classnames('form-control', className)}\n        onChange={this.onChange}\n        autoFocus={autoFocus}\n        placeholder={placeholder}\n        onCompositionStart={this.onCompositionStart}\n        onCompositionEnd={this.onCompositionEnd}\n        onKeyDown={onKeyDown}\n        disabled={disabled}\n        style={style}\n        ref={ref => this.inputRef = ref}\n      />\n    );\n  }\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func,\n  wait: PropTypes.number,\n  disabled: PropTypes.bool,\n  style: PropTypes.object,\n  value: PropTypes.string,\n};\n\nSearchInput.defaultProps = {\n  wait: 100,\n  disabled: false,\n  value: '',\n};\n\nexport default SearchInput;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { UncontrolledPopover } from 'reactstrap';\nimport { gettext } from '../../../../../utils/constants';\nimport SearchInput from '../search-input';\nimport { getSelectColumnOptions } from '../../../../../utils/extra-attributes';\n\nclass SingleSelectEditor extends Component {\n\n  constructor(props) {\n    super(props);\n    const options = this.getSelectColumnOptions(props);\n    this.state = {\n      value: props.row[props.column.key],\n      searchVal: '',\n      highlightIndex: -1,\n      maxItemNum: 0,\n      itemHeight: 0,\n      filteredOptions: options,\n    };\n    this.options = options;\n    this.timer = null;\n    this.editorKey = `single-select-editor-${props.column.key}`;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const currentCascadeColumnValue = this.getCascadeColumnValue(this.props);\n    const nextCascadeColumnValue = this.getCascadeColumnValue(nextProps);\n    if (currentCascadeColumnValue !== nextCascadeColumnValue) {\n      this.options = this.getSelectColumnOptions(nextProps);\n      this.setState({ filteredOptions: this.options });\n    }\n  }\n\n  getCascadeColumnValue = (props) => {\n    const { column, row, columns } = props;\n    const { data } = column;\n    const { cascade_column_key } = data || {};\n    if (!cascade_column_key) return '';\n    const cascadeColumn = columns.find(item => item.key === cascade_column_key);\n    if (!cascadeColumn) return '';\n    return row[cascade_column_key];\n  };\n\n  getSelectColumnOptions = (props) => {\n    const { column, row, columns } = props;\n    let options = getSelectColumnOptions(column);\n    const { data } = column;\n    const { cascade_column_key, cascade_settings } = data || {};\n    if (cascade_column_key) {\n      const cascadeColumn = columns.find(item => item.key === cascade_column_key);\n      if (cascadeColumn) {\n        const cascadeColumnValue = row[cascade_column_key];\n        if (!cascadeColumnValue) return [];\n        const cascadeSetting = cascade_settings[cascadeColumnValue];\n        if (!cascadeSetting || !Array.isArray(cascadeSetting) || cascadeSetting.length === 0) return [];\n        return options.filter(option => cascadeSetting.includes(option.id));\n      }\n    }\n    return options;\n  };\n\n  toggle = () => {\n    this.ref.toggle();\n    this.props.onUpdateState();\n  };\n\n  onChangeSearch = (searchVal) => {\n    const { searchVal: oldSearchVal } = this.state;\n    if (oldSearchVal === searchVal) return;\n    const val = searchVal.toLowerCase();\n    const filteredOptions = val ?\n      this.options.filter((item) => item.name && item.name.toLowerCase().indexOf(val) > -1) : this.options;\n    this.setState({ searchVal, filteredOptions });\n  };\n\n  onSelectOption = (optionID) => {\n    const { column } = this.props;\n    this.setState({ value: optionID }, () => {\n      this.props.onCommit({ [column.key]: optionID }, column);\n      this.toggle();\n    });\n  };\n\n  render() {\n    const { value, filteredOptions } = this.state;\n    const { column } = this.props;\n\n    return (\n      <UncontrolledPopover\n        target={this.editorKey}\n        className=\"single-select-editor-popover\"\n        trigger=\"legacy\"\n        placement=\"bottom-start\"\n        hideArrow={true}\n        toggle={this.toggle}\n        ref={ref => this.ref = ref}\n      >\n        <div className=\"single-select-editor-container\">\n          <div className=\"search-single-selects\">\n            <SearchInput\n              placeholder={gettext('Find an option')}\n              onKeyDown={this.onKeyDown}\n              onChange={this.onChangeSearch}\n              autoFocus={true}\n            />\n          </div>\n          <div className=\"single-select-editor-content\">\n            {filteredOptions.map(option => {\n              const isSelected = value === option.id;\n              const style = {\n                backgroundColor: option.color,\n                color: option.textColor || null,\n                maxWidth: Math.max(200 - 62,  column.width ? column.width  -62 : 0)\n              };\n              return (\n                <div className=\"single-select-option-container\" key={option.id} onClick={this.onSelectOption.bind(this, isSelected ? null : option.id)}>\n                  <div className=\"single-select-option\" style={style}>{option.name}</div>\n                  <div className=\"single-select-option-selected\">\n                    {isSelected && (<i ></i>)}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </UncontrolledPopover>\n    );\n  }\n}\n\nSingleSelectEditor.propTypes = {\n  value: PropTypes.string,\n  row: PropTypes.object,\n  column: PropTypes.object,\n  columns: PropTypes.array,\n  onUpdateState: PropTypes.func,\n  onCommit: PropTypes.func,\n};\n\nexport default SingleSelectEditor;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { DELETED_OPTION_BACKGROUND_COLOR, DELETED_OPTION_TIPS } from '../../../../../constants';\nimport { gettext } from '../../../../../utils/constants';\nimport SingleSelectEditor from './single-select-editor';\nimport { getSelectColumnOptions } from '../../../../../utils/extra-attributes';\n\nimport './index.css';\n\nclass SingleSelect extends Component {\n\n  constructor(props) {\n    super(props);\n    const { column } = props;\n    this.options = getSelectColumnOptions(column);\n    this.state = {\n      isShowSingleSelect: false,\n    };\n    this.editorKey = `single-select-editor-${column.key}`;\n  }\n\n  updateState = () => {\n    this.setState({ isShowSingleSelect: !this.state.isShowSingleSelect });\n  };\n\n  onCommit = (value, column) => {\n    this.props.onCommit(value, column);\n  };\n\n  render() {\n    const { isShowSingleSelect } = this.state;\n    const { column, row } = this.props;\n    const currentOptionID = row[column.key];\n    const option = this.options.find(option => option.id === currentOptionID);\n    const optionStyle = option ?\n      { backgroundColor: option.color, color: option.textColor || null } :\n      { backgroundColor: DELETED_OPTION_BACKGROUND_COLOR };\n    const optionName = option ? option.name : gettext(DELETED_OPTION_TIPS);\n\n    return (\n      <>\n        <div\n          id={this.editorKey}\n          className={classnames('selected-single-select-container', { 'disable': !column.editable, 'focus': isShowSingleSelect })}\n        >\n          <div className=\"single-select-inner w-100 h-100 d-flex align-items-center justify-content-between\">\n            <div>\n              {currentOptionID && (\n                <div\n                  className=\"single-select-option\"\n                  style={optionStyle}\n                  title={optionName}\n                >{optionName}</div>\n              )}\n            </div>\n            {column.editable && (\n              <i className=\"fas fa-caret-down\"></i>\n            )}\n          </div>\n        </div>\n        {column.editable && (\n          <SingleSelectEditor\n            column={column}\n            row={this.props.row}\n            columns={this.props.columns}\n            onCommit={this.onCommit}\n            onUpdateState={this.updateState}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nSingleSelect.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  columns: PropTypes.array,\n  onCommit: PropTypes.func,\n};\n\nexport default SingleSelect;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getNumberDisplayString, replaceNumberNotAllowInput, formatStringToNumber, isMac } from '../../../../utils/extra-attributes';\nimport { KeyCodes, DEFAULT_NUMBER_FORMAT } from '../../../../constants';\n\nclass NumberEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const { row, column } = props;\n    const value = row[column.key];\n    this.state = {\n      value: getNumberDisplayString(value, column.data),\n    };\n  }\n\n  onChange = (event) => {\n    const { data } = this.props.column; // data maybe 'null'\n    const format = (data && data.format) ? data.format : DEFAULT_NUMBER_FORMAT;\n    let currency_symbol = null;\n    if (data && data.format === 'custom_currency') {\n      currency_symbol = data['currency_symbol'];\n    }\n    const initValue = event.target.value.trim();\n\n    //Prevent the repetition of periods bug in the Chinese input method of the Windows system\n    if (!isMac() && initValue.indexOf('.。') > -1) return;\n    let value = replaceNumberNotAllowInput(initValue, format, currency_symbol);\n    if (value === this.state.value) return;\n    this.setState({ value });\n  };\n\n  onKeyDown = (event) => {\n    let { selectionStart, selectionEnd, value } = event.currentTarget;\n    if (event.keyCode === KeyCodes.Enter || event.keyCode === KeyCodes.Esc) {\n      event.preventDefault();\n      this.input.blur();\n    } else if ((event.keyCode === KeyCodes.LeftArrow && selectionStart === 0) ||\n      (event.keyCode === KeyCodes.RightArrow && selectionEnd === value.length)\n    ) {\n      event.stopPropagation();\n    }\n  };\n\n  onBlur = () => {\n    const { value } = this.state;\n    const { column } = this.props;\n    this.props.onCommit({ [column.key]: formatStringToNumber(value, column.data) }, column);\n  };\n\n  setInputRef = (input) => {\n    this.input = input;\n    return this.input;\n  };\n\n  onPaste = (e) => {\n    e.stopPropagation();\n  };\n\n  onCut = (e) => {\n    e.stopPropagation();\n  };\n\n  render() {\n    const { column } = this.props;\n\n    return (\n      <input\n        ref={this.setInputRef}\n        type=\"text\"\n        className=\"form-control\"\n        value={this.state.value}\n        onBlur={this.onBlur}\n        onPaste={this.onPaste}\n        onCut={this.onCut}\n        onKeyDown={this.onKeyDown}\n        onChange={this.onChange}\n        disabled={!column.editable}\n      />\n    );\n  }\n}\n\nNumberEditor.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  onCommit: PropTypes.func,\n};\n\nexport default NumberEditor;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateDisplayString } from '../../../../utils/extra-attributes';\n\n\nclass DateEditor extends Component {\n  render() {\n    const { column, row } = this.props;\n    const { data, key } = column;\n    const value = getDateDisplayString(row[key], data ? data.format : '');\n\n    return (\n      <input\n        type=\"text\"\n        className=\"form-control\"\n        value={value}\n        disabled={true}\n      />\n    );\n  }\n}\n\nDateEditor.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n};\n\nexport default DateEditor;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { getDateDisplayString } from '../../../../utils/extra-attributes';\n\nclass CtimeFormatter extends Component {\n  render() {\n    const { column, row } = this.props;\n    const { key } = column;\n    const value = getDateDisplayString(row[key], 'YYYY-MM-DD HH:mm:ss') || '';\n\n    return (\n      <div className=\"form-control\" style={{ width: 320 }}>{value}</div>\n    );\n  }\n}\n\nCtimeFormatter.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n};\n\nexport default CtimeFormatter;\n","import SimpleText from './simple-text';\nimport FormulaFormatter from './formula-formatter';\nimport SingleSelect from './single-select';\nimport NumberEditor from './number-editor';\nimport DateEditor from './date-editor';\nimport CtimeFormatter from './ctime-formatter';\nimport { EXTRA_ATTRIBUTES_COLUMN_TYPE } from '../../../../constants';\n\n\nconst CONFIG = {\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.TEXT]: SimpleText,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.FORMULA]: FormulaFormatter,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.SINGLE_SELECT]: SingleSelect,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.NUMBER]: NumberEditor,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.DATE]: DateEditor,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.CTIME]: CtimeFormatter,\n  [EXTRA_ATTRIBUTES_COLUMN_TYPE.MTIME]: CtimeFormatter,\n};\n\nexport default CONFIG;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Col } from 'reactstrap';\nimport ColumnName from './column-name';\nimport CONFIG from '../editor';\n\nimport './index.css';\n\nclass Column extends Component {\n  render() {\n    const { column, row, columns } = this.props;\n    const Editor = CONFIG[column.type] || CONFIG['text'];\n\n    return (\n      <div className=\"pb-4 row column-item\">\n        <ColumnName column={column} />\n        <Col md={9} className='d-flex align-items-center extra-attribute-item-info'>\n          <Editor\n            column={column}\n            row={row}\n            columns={columns}\n            onCommit={this.props.onCommit}\n          />\n        </Col>\n      </div>\n    );\n  }\n}\n\nColumn.propTypes = {\n  column: PropTypes.object,\n  row: PropTypes.object,\n  columns: PropTypes.array,\n  onCommit: PropTypes.func,\n};\n\nexport default Column;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport isHotkey from 'is-hotkey';\nimport { zIndexes, DIALOG_MAX_HEIGHT, EXTRA_ATTRIBUTES_COLUMN_TYPE } from '../../../constants';\nimport { gettext } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport { getSelectColumnOptions, getValidColumns } from '../../../utils/extra-attributes';\nimport Column from './column';\nimport Loading from '../../loading';\nimport toaster from '../../toast';\n\nimport './index.css';\n\nclass ExtraAttributesDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    const { direntDetail, direntType } = props;\n    this.state = {\n      animationEnd: false,\n      isLoading: true,\n      update: {},\n      row: {},\n      columns: [],\n      errorMsg: '',\n    };\n    if (direntType === 'dir') {\n      this.isEmptyFile = false;\n    } else {\n      const direntDetailId = direntDetail?.id || '';\n      this.isEmptyFile = direntDetailId === '0'.repeat(direntDetailId.length);\n    }\n    this.isExist = false;\n    this.modalRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.startAnimation(this.getData);\n    window.addEventListener('keydown', this.onHotKey);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onHotKey);\n  }\n\n  startAnimation = (callback) => {\n    if (this.state.animationEnd === true) {\n      callback && callback();\n    }\n\n    // use setTimeout to make sure real dom rendered\n    setTimeout(() => {\n      let dom = this.modalRef.current.firstChild;\n      const { width, maxWidth, marginLeft, height } = this.getDialogStyle();\n      dom.style.width = `${width}px`;\n      dom.style.maxWidth = `${maxWidth}px`;\n      dom.style.marginLeft = `${marginLeft}px`;\n      dom.style.height = `${height}px`;\n      dom.style.marginRight = 'unset';\n      dom.style.marginTop = '28px';\n\n      // after animation, change style and run callback\n      setTimeout(() => {\n        this.setState({ animationEnd: true }, () => {\n          dom.style.transition = 'none';\n          callback && callback();\n        });\n      }, 280);\n    }, 1);\n  };\n\n  getFormatUpdateData = (update = {}) => {\n    const { columns } = this.state;\n    const updateData = {};\n    for (let key in update) {\n      const column = columns.find(column => column.key === key);\n      if (column && column.editable) {\n        const { type, name } = column;\n        const value = update[key];\n        if (type === EXTRA_ATTRIBUTES_COLUMN_TYPE.SINGLE_SELECT) {\n          const options = getSelectColumnOptions(column);\n          const option = options.find(item => item.id === value);\n          updateData[name] = option ? option.name : '';\n        } else {\n          updateData[column.name] = update[key];\n        }\n      }\n    }\n    return updateData;\n  };\n\n  getData = () => {\n    const { repoID, filePath } = this.props;\n    seafileAPI.getFileExtendedProperties(repoID, filePath).then(res => {\n      const { row, metadata, editable_columns } = res.data;\n      this.isExist = Boolean(row._id);\n      this.setState({ row: row, columns: getValidColumns(metadata, editable_columns, this.isEmptyFile), isLoading: false, errorMsg: '' });\n    }).catch(error => {\n      const errorMsg =Utils.getErrorMsg(error);\n      this.setState({ isLoading: false, errorMsg });\n    });\n  };\n\n  createData = (data) => {\n    const { repoID, filePath } = this.props;\n    seafileAPI.newFileExtendedProperties(repoID, filePath, data).then(res => {\n      this.isExist = true;\n      const { row } = res.data;\n      this.setState({ row: row, isLoading: false, errorMsg: '' });\n    }).catch(error => {\n      const errorMsg =Utils.getErrorMsg(error);\n      toaster.danger(gettext(errorMsg));\n    });\n  };\n\n  updateData = (update, column) => {\n    const newRow = { ...this.state.row, ...update };\n    this.setState({ row: newRow }, () => {\n      const data = this.getFormatUpdateData(update);\n      const { repoID, filePath } = this.props;\n      if (this.isExist) {\n        seafileAPI.updateFileExtendedProperties(repoID, filePath, data).then(res => {\n          this.setState({ update: {}, row: res.data.row });\n        }).catch(error => {\n          const errorMsg = Utils.getErrorMsg(error);\n          toaster.danger(gettext(errorMsg));\n        });\n      } else {\n        this.createData(data);\n      }\n    });\n  };\n\n  onHotKey = (event) => {\n    if (isHotkey('esc', event)) {\n      this.onToggle();\n      return;\n    }\n  };\n\n  onToggle = () => {\n    this.props.onToggle();\n  };\n\n  getDialogStyle = () => {\n    const width = 800;\n    return {\n      width,\n      maxWidth: width,\n      marginLeft: (window.innerWidth - width) / 2,\n      height: DIALOG_MAX_HEIGHT,\n    };\n  };\n\n  getInitStyle = () => {\n    const transition = 'all .3s';\n    const defaultMargin = 80; // sequence cell width\n    const defaultHeight = 100;\n    const marginTop = '30%';\n    const width = window.innerWidth;\n    return {\n      width: `${width - defaultMargin}px`,\n      maxWidth: `${width - defaultMargin}px`,\n      marginLeft: `${defaultMargin}px`,\n      height: `${defaultHeight}px`,\n      marginRight: `${defaultMargin}px`,\n      marginTop,\n      transition,\n    };\n  };\n\n  renderColumns = () => {\n    const { isLoading, errorMsg, columns, row, update } = this.state;\n    if (isLoading) {\n      return (\n        <div className=\"w-100 h-100 d-flex align-items-center justify-content-center\">\n          <Loading />\n        </div>\n      );\n    }\n\n    if (errorMsg) {\n      return (\n        <div className=\"w-100 h-100 d-flex align-items-center justify-content-center error-message\">\n          {gettext(errorMsg)}\n        </div>\n      );\n    }\n\n    const newRow = { ...row, ...update };\n\n    return (\n      <>\n        {columns.map(column => {\n          return (\n            <Column\n              key={column.key}\n              column={column}\n              row={newRow}\n              columns={columns}\n              onCommit={this.updateData}\n            />\n          );\n        })}\n      </>\n    );\n\n  };\n\n  renderContent = () => {\n    if (!this.state.animationEnd) return null;\n\n    return (\n      <>\n        <ModalHeader toggle={this.onToggle}>{gettext('Edit extra properties')}</ModalHeader>\n        <ModalBody>\n          {this.renderColumns()}\n        </ModalBody>\n      </>\n    );\n  };\n\n  render() {\n    const { animationEnd } = this.state;\n\n    return (\n      <Modal\n        isOpen={true}\n        className=\"extra-attributes-dialog\"\n        style={animationEnd ? this.getDialogStyle() : this.getInitStyle()}\n        zIndex={zIndexes.EXTRA_ATTRIBUTES_DIALOG_MODAL}\n        contentClassName=\"extra-attributes-content-container\"\n        modalClassName=\"extra-attributes-modal\"\n        wrapClassName=\"extra-attributes\"\n        fade={false}\n        innerRef={this.modalRef}\n        toggle={this.onToggle}\n      >\n        {this.renderContent()}\n      </Modal>\n    );\n  }\n}\n\nExtraAttributesDialog.propTypes = {\n  repoID: PropTypes.string,\n  filePath: PropTypes.string,\n  direntType: PropTypes.string,\n  direntDetail: PropTypes.object,\n  onToggle: PropTypes.func,\n};\n\nexport default ExtraAttributesDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport '../../css/apply-folder-properties.css';\n\nconst propTypes = {\n  toggle: PropTypes.func,\n  repoID: PropTypes.string,\n  path: PropTypes.string\n};\n\nclass ConfirmApplyFolderPropertiesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      submitting: false\n    };\n  }\n\n  submit = () => {\n    const { repoID, path } = this.props;\n    this.setState({ submitting: true });\n    seafileAPI.applyFolderExtendedProperties(repoID, path).then(() => {\n      toaster.success(gettext('Successfully applied the properties.'));\n      this.props.toggle();\n    }).catch(error => {\n      let errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({ submitting: false });\n    });\n  };\n\n  render() {\n    const { submitting } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggle} className=\"apply-properties-dialog\">\n        <ModalHeader toggle={this.props.toggle}>\n          {gettext('Apply properties')}\n        </ModalHeader>\n        <ModalBody>\n          <p>\n            {gettext('Are you sure you want to apply the properties to all the files inside the folder?')}\n          </p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color='secondary' onClick={this.props.toggle} disabled={submitting}>{gettext('Cancel')}</Button>\n          <Button color='primary' className='flex-shrink-0 apply-properties' disabled={submitting} onClick={this.submit}>\n            {submitting ? (<Loading />) : (<>{gettext('Submit')}</>)}\n          </Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n\n}\n\nConfirmApplyFolderPropertiesDialog.propTypes = propTypes;\n\nexport default ConfirmApplyFolderPropertiesDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { v4 as uuidv4 } from 'uuid';\nimport Icon from '../icon';\nimport { gettext, canSetExProps } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagPopover from '../popover/edit-filetag-popover';\nimport ExtraAttributesDialog from '../dialog/extra-attributes-dialog';\nimport FileTagList from '../file-tag-list';\nimport ConfirmApplyFolderPropertiesDialog from '../dialog/confirm-apply-folder-properties-dialog';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false,\n      isShowExtraProperties: false,\n      isShowApplyProperties: false\n    };\n    this.tagListTitleID = `detail-list-view-tags-${uuidv4()}`;\n  }\n\n  getDirentPosition = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  };\n\n  toggleExtraPropertiesDialog = () => {\n    this.setState({ isShowExtraProperties: !this.state.isShowExtraProperties });\n  };\n\n  toggleApplyPropertiesDialog = () => {\n    this.setState({ isShowApplyProperties: !this.state.isShowApplyProperties });\n  };\n\n  renderTags = () => {\n    const { direntType, direntDetail } = this.props;\n    const position = this.getDirentPosition();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n            {direntDetail.permission === 'rw' && canSetExProps && (\n              <Fragment>\n                <tr className=\"file-extra-attributes\">\n                  <th colSpan={2}>\n                    <div className=\"edit-file-extra-attributes-btn\" onClick={this.toggleExtraPropertiesDialog}>\n                      {gettext('Edit extra properties')}\n                    </div>\n                  </th>\n                </tr>\n                <tr className=\"file-extra-attributes\">\n                  <th colSpan={2}>\n                    <div\n                      className=\"edit-file-extra-attributes-btn text-truncate\"\n                      onClick={this.toggleApplyPropertiesDialog}\n                      title={gettext('Apply properties to files inside the folder')}\n                    >\n                      {gettext('Apply properties to files inside the folder')}\n                    </div>\n                  </th>\n                </tr>\n              </Fragment>\n            )}\n          </tbody>\n        </table>\n      );\n    }\n    return (\n      <table className=\"table-thead-hidden\">\n        <thead>\n          <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n        </thead>\n        <tbody>\n          <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n          <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n          <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n          <tr className=\"file-tag-container\">\n            <th>{gettext('Tags')}</th>\n            <td>\n              <FileTagList fileTagList={this.props.fileTagList} />\n              <span onClick={this.onEditFileTagToggle} id={this.tagListTitleID}><Icon symbol='tag' /></span>\n            </td>\n          </tr>\n          {direntDetail.permission === 'rw' && canSetExProps && (\n            <tr className=\"file-extra-attributes\">\n              <th colSpan={2}>\n                <div className=\"edit-file-extra-attributes-btn\" onClick={this.toggleExtraPropertiesDialog}>\n                  {gettext('Edit extra properties')}\n                </div>\n              </th>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    );\n  };\n\n  render() {\n    const { direntType, direntDetail, fileTagList } = this.props;\n    const direntPath = this.getDirentPath();\n\n    return (\n      <Fragment>\n        {this.renderTags()}\n        {this.state.isEditFileTagShow &&\n          <EditFileTagPopover\n            repoID={this.props.repoID}\n            filePath={direntPath}\n            fileTagList={fileTagList}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n            target={this.tagListTitleID}\n            isEditFileTagShow={this.state.isEditFileTagShow}\n          />\n        }\n        {this.state.isShowExtraProperties && (\n          <ExtraAttributesDialog\n            repoID={this.props.repoID}\n            filePath={direntPath}\n            direntType={direntType}\n            direntDetail={direntDetail}\n            onToggle={this.toggleExtraPropertiesDialog}\n          />\n        )}\n        {this.state.isShowApplyProperties && (\n          <ConfirmApplyFolderPropertiesDialog\n            toggle={this.toggleApplyPropertiesDialog}\n            repoID={this.props.repoID}\n            path={direntPath}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDetailListView.defaultProps = {\n  fileTagList: [],\n};\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\n\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  fileTags: PropTypes.array,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      folderDirent: null,\n    };\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  };\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    const { dirent, fileTags } = this.props;\n    return (\n      <div className=\"detail-body dirent-info\">\n        <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n        {this.state.direntDetail &&\n          <div className=\"dirent-table-container\">\n            <DetailListView\n              repoInfo={this.props.currentRepoInfo}\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent || folderDirent}\n              direntType={this.state.direntType}\n              direntDetail={this.state.direntDetail}\n              fileTagList={dirent ? dirent.file_tags : fileTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </div>\n        }\n      </div>\n    );\n  };\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    const isVideo = dirent ? Utils.videoCheck(dirent.name) : Utils.videoCheck(folderDirent.name);\n    if (isImg || (enableVideoThumbnail && isVideo)) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n    return (\n      <div className=\"detail-container\">\n        {this.renderHeader(smallIconUrl, direntName)}\n        {this.renderDetailBody(bigIconUrl, folderDirent)}\n      </div>\n    );\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { enableSeadoc, gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  };\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  };\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  };\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file\">\n          <p className=\"text-secondary text-center\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary text-center\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n          <br />\n          {enableSeadoc && <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.sdoc')}>\n            {'+ SeaDoc'}</button>}\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              toggleDialog={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\nimport { UncontrolledTooltip } from 'reactstrap';\n\nexport default class FileTag extends React.PureComponent {\n\n  static propTypes = {\n    fileTag: PropTypes.object.isRequired,\n    length: PropTypes.number.isRequired,\n    index: PropTypes.number.isRequired,\n  };\n\n  render() {\n    const { fileTag, length, index } = this.props;\n    const fileTagID = `file-tag-${fileTag.id}-${uuidv4()}`;\n    return (\n      <>\n        <span\n          className=\"file-tag\"\n          id={fileTagID}\n          key={fileTag.id}\n          style={{zIndex:length - index, backgroundColor:fileTag.color}}\n        ></span>\n        <UncontrolledTooltip target={fileTagID} placement=\"bottom\">\n          {fileTag.name}\n        </UncontrolledTooltip>\n      </>\n    );\n  }\n}\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { v4 as uuidv4 } from 'uuid';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl, username, useGoFileserver, fileServerRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport Rename from '../rename';\nimport ModalPortal from '../modal-portal';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport EditFileTagPopover from '../popover/edit-filetag-popover';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\nimport FileTag from './file-tag';\n\nimport '../../css/dirent-list-item.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n  loadDirentList: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      canDrag: this.canDrag,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false // for mobile\n    };\n    this.tagListTitleID = `tag-list-title-${uuidv4()}`;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.isItemFreezed !== this.props.isItemFreezed && !nextProps.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      }, () => {\n        if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n          this.setState({isOperationShow: true});\n        }\n      });\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({isDragTipShow: true});\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    if (this.state.canDrag) {\n      this.setState({isDragTipShow: true});\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({isDragTipShow: false});\n  };\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  };\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  };\n\n  onItemStarred = (e) => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    e.preventDefault();\n\n    if (dirent.starred) {\n      seafileAPI.unstarItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', false);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', true);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == 'TD') {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onItemDelete = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  };\n\n  onItemShare = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  exportDocx = () => {\n    const serviceUrl = window.app.config.serviceURL;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let exportToDocxUrl = serviceUrl + '/repo/sdoc_export_to_docx/' + repoID + '/?file_path=' + filePath;\n    window.location.href = exportToDocxUrl;\n  };\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute('data-op');\n    this.onMenuItemClick(operation, e);\n  };\n\n  onMenuItemClick = (operation, event) => {\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem();\n        break;\n      case 'Lock':\n        this.onLockItem();\n        break;\n      case 'Freeze Document':\n        this.onFreezeDocument();\n        break;\n      case 'Convert to Markdown':\n        this.onItemConvert(event, 'markdown');\n        break;\n      case 'Convert to docx':\n        this.onItemConvert(event, 'docx');\n        break;\n      case 'Export docx':\n        this.exportDocx();\n        break;\n      case 'Convert to sdoc':\n        this.onItemConvert(event, 'sdoc');\n        break;\n      case 'Mark as draft':\n        this.onMarkAsDraft();\n        break;\n      case 'Unmark as draft':\n        this.onUnmarkAsDraft();\n        break;\n      case 'History':\n        this.onHistory();\n        break;\n      case 'Access Log':\n        this.onAccessLog();\n        break;\n      case 'Properties':\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient();\n        break;\n      case 'Convert with ONLYOFFICE':\n        this.onConvertWithONLYOFFICE();\n        break;\n      default:\n        break;\n    }\n  };\n\n  onItemConvert = (e, dstType)=> {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemConvert(this.props.dirent, dstType);\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  };\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  };\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n      canDrag: false\n    });\n  };\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  };\n\n  onRenameCancel = () => {\n    this.setState({\n      isRenameing: false,\n      canDrag: this.canDrag // set it back to the initial value\n    });\n    this.unfreezeItem();\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  };\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', true);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onFreezeDocument = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.lockfile(repoID, filePath, -1).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_freezed', true);\n      this.props.updateDirent(this.props.dirent, 'is_locked', true);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', false);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', false);\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMarkAsDraft = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(this.props.dirent, 'is_sdoc_draft', true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnmarkAsDraft = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.sdocUnmarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(this.props.dirent, 'is_sdoc_draft', false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onConvertWithONLYOFFICE = ()=> {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.onlyofficeConvert(repoID, filePath).then(res => {\n      this.props.loadDirentList(res.data.parent_dir);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemDownload = (e) => {\n    e.preventDefault();\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        seafileAPI.zipDownload(repoID, this.props.path, this.props.dirent.name).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  };\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({isShowTagTooltip: !this.state.isShowTagTooltip});\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = 'move';\n    let { selectedDirentList } = this.props;\n    if (selectedDirentList.length > 0 && selectedDirentList.includes(this.props.dirent)) { // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList =  selectedDirentList.map(item => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {nodeDirent: item, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData('applicaiton/drag-item-info', selectedList);\n      return ;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  };\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n      this.setState({isDropTipshow: true});\n    }\n  };\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    }\n    this.setState({isDropTipshow: false});\n  };\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.state.canDrag) {\n      return false;\n    }\n    this.setState({isDropTipshow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) { //move items\n      let direntPaths =  dragStartItemData.map(draggedItem => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n\n      if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) { //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return ;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === 'dir' && nodeDirent.type === 'dir') {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  };\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  };\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  };\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n    let canDownload = true;\n    let canDelete = true;\n    const { isCustomPermission, customPermission } = this;\n    if (isCustomPermission) {\n      const { permission } = customPermission;\n      canDownload = permission.download;\n      canDelete = permission.delete;\n    }\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, dirent.permission, dirent);\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ?\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected &&\n              <div className=\"operations\">\n                {(dirent.permission === 'rw' || dirent.permission === 'r' || (isCustomPermission && canDownload)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} role=\"button\" aria-label={gettext('Download')} onClick={this.onItemDownload}></a>\n                )}\n                {showShareBtn && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>\n                )}\n                {(dirent.permission === 'rw' || dirent.permission === 'cloud-edit' || (isCustomPermission && canDelete)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDelete}></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={'sf2-icon-caret-down'}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            }\n          </Fragment> :\n          <Fragment>\n            {this.state.isOperationShow &&\n              <div className=\"operations\">\n                {(dirent.permission === 'rw' || dirent.permission === 'r' || (isCustomPermission && canDownload)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} role=\"button\" aria-label={gettext('Download')} onClick={this.onItemDownload}></a>\n                )}\n                {showShareBtn && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} role=\"button\" aria-label={gettext('Share')} onClick={this.onItemShare}></a>\n                )}\n                {(dirent.permission === 'rw' || dirent.permission === 'cloud-edit' || (isCustomPermission && canDelete)) && (\n                  <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} role=\"button\" aria-label={gettext('Delete')} onClick={this.onItemDelete}></a>\n                )}\n                <ItemDropdownMenu\n                  item={this.props.dirent}\n                  toggleClass={'sf2-icon-caret-down'}\n                  isHandleContextMenuEvent={true}\n                  getMenuList={this.props.getDirentItemMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  unfreezeItem={this.unfreezeItem}\n                  freezeItem={this.props.freezeItem}\n                />\n              </div>\n            }\n          </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n    if (dirent.is_sdoc_revision && dirent.revision_id) {\n      fileHref = siteRoot + 'lib/' + this.props.repoID + '/revisions/' + dirent.revision_id + '/';\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? 'tr-highlight ' : '';\n    trClass += this.state.isDropTipshow ? 'tr-drop-effect' : '';\n    trClass += (activeDirent && activeDirent.name === dirent.name)  ? 'tr-active' : '';\n    trClass += dirent.isSelected? 'tr-active' : '';\n\n    let lockedInfo = dirent.is_freezed ? gettext('Frozen by {name}'): gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    const isDesktop = Utils.isDesktop();\n    const { canDrag } = this.state;\n    const lockedImageUrl = `${mediaUrl}img/file-${dirent.is_freezed ? 'freezed' : 'locked'}-32.png`;\n    const lockedMessage = dirent.is_freezed ? gettext('freezed') : gettext('locked');\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable={canDrag}\n        onFocus={this.onMouseEnter}\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td className={`pl10 ${this.state.isDragTipShow ? 'tr-drag-effect' : ''}`}>\n          <input type=\"checkbox\" className=\"vam\" onChange={this.onItemSelected} checked={dirent.isSelected}/>\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined &&\n          <a href=\"#\" role=\"button\" aria-label={dirent.starred ? gettext('Unstar') : gettext('Star')} onClick={this.onItemStarred}>\n            <i className={`fa-star ${dirent.starred ? 'fas' : 'far star-empty'}`}></i>\n          </a>\n          }\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img ref='drag_icon' src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" onClick={this.onItemClick} alt=\"\" /> :\n              <img ref='drag_icon' src={iconUrl} width=\"24\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={lockedImageUrl} alt={lockedMessage} title={lockedInfo}/>}\n            <div ref=\"empty_content\" style={{position: 'absolute', width: '1px', height: '1px'}}></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing && <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} />}\n          {!this.state.isRenameing && (\n            <Fragment>\n              {(!dirent.isDir() && !this.canPreview) ?\n                <a className=\"sf-link\" onClick={this.onItemClick}>{dirent.name}</a> :\n                <a href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemClick}>{dirent.name}</a>\n              }\n              {/*(Utils.isSdocFile(dirent.name) && dirent.is_sdoc_draft) &&\n                <span className=\"dirent-sdoc-draft-identifier\">{gettext('Draft')}</span>\n              */}\n            </Fragment>\n          )}\n        </td>\n        <td className=\"tag-list-title\">\n          {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n            <div id={this.tagListTitleID} className=\"dirent-item tag-list tag-list-stacked\">\n              {dirent.file_tags.map((fileTag, index) => {\n                return (\n                  <FileTag fileTag={fileTag} length={dirent.file_tags.length} key={index} index={index}/>\n                );\n              })}\n            </div>\n          )}\n          {(dirent.type !== 'dir' && (!dirent.file_tags || dirent.file_tags.length == 0)) && (\n            <div id={this.tagListTitleID} className=\"dirent-item tag-list tag-list-stacked\"></div>\n          )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td className=\"last-update\" title={moment.unix(dirent.mtime).format('llll')}>{dirent.mtime_relative}</td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={lockedImageUrl} alt={lockedMessage} title={lockedInfo}/>}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing && <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> }\n          {!this.state.isRenameing && (\n            <Fragment>\n              {(!dirent.isDir() && !this.canPreview) ?\n                <a className=\"sf-link\">{dirent.name}</a> :\n                <a href={dirent.type === 'dir' ? dirHref : fileHref}>{dirent.name}</a>\n              }\n            </Fragment>\n          )}\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined &&\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onItemStarred}>{dirent.starred ? gettext('Unstar') : gettext('Star')}</DropdownItem>}\n                {this.props.getDirentItemMenuList(dirent, true).map((item, index) => {\n                  if (item != 'Divider' && item.key != 'Open via Client') {\n                    return (\n                      <DropdownItem className=\"mobile-menu-item\" key={index} data-op={item.key} onClick={this.onMobileMenuItemClick}>{item.value}</DropdownItem>\n                    );\n                  } else {\n                    return null;\n                  }\n                })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow &&\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.state.isEditFileTagShow &&\n            <EditFileTagPopover\n              repoID={this.props.repoID}\n              fileTagList={dirent.file_tags}\n              filePath={direntPath}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.onFileTagChanged}\n              target={this.tagListTitleID}\n              isEditFileTagShow={this.state.isEditFileTagShow}\n            />\n          }\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.state.isEditFileTagShow &&\n            <EditFileTagDialog\n              repoID={this.props.repoID}\n              fileTagList={dirent.file_tags}\n              filePath={direntPath}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.onFileTagChanged}\n            />\n          }\n        </MediaQuery>\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  };\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  };\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  };\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, username, enableSeadoc } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n  fullDirentList: PropTypes.array,\n  posX: PropTypes.string,\n  posY: PropTypes.string,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs。\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  };\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  };\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  };\n\n  onDirentClick = (dirent) => {\n    hideMenu();\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  };\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  };\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const name = item.name;\n    const repoID = this.props.repoID;\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const src = `${siteRoot}repo/${repoID}/raw${path}`;\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  };\n\n  onCreateFileToggle = (fileType) => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: fileType || ''\n    });\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  };\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  };\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  };\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    hideMenu();\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  };\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(this.props.userPerm);\n    if (permission !== 'admin' && permission !== 'rw' && !isCustomPermission) {\n      return;\n    }\n\n    const {\n      NEW_FOLDER, NEW_FILE,\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE,\n      NEW_SEADOC_FILE\n    } = TextTranslation;\n\n    const direntsContainerMenuList = [\n      NEW_FOLDER, NEW_FILE, 'Divider',\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE\n    ];\n    if (enableSeadoc) {\n      direntsContainerMenuList.push(NEW_SEADOC_FILE);\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n\n      // custom permission judgement\n      if (isCustomPermission) {\n        const { create: canCreate } = customPermission.permission;\n        if (!canCreate) return;\n      }\n\n      let menuList = direntsContainerMenuList;\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n\n          // custom permission judgement\n          if (isCustomPermission) {\n            const { modify } = customPermission.permission;\n            if (!modify) return;\n          }\n\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n\n            let menuList = direntsContainerMenuList;\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [];\n        if (isCustomPermission) {\n          const { modify: canModify, copy: canCopy, download: canDownload, delete: canDelete } = customPermission.permission;\n          canModify && menuList.push(TextTranslation.MOVE);\n          canCopy && menuList.push(TextTranslation.COPY);\n          canDownload && menuList.push(TextTranslation.DOWNLOAD);\n          canDelete && menuList.push(TextTranslation.DELETE);\n        } else {\n          menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        }\n\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  };\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      case 'New Markdown File':\n        this.onCreateFileToggle('.md');\n        break;\n      case 'New Excel File':\n        this.onCreateFileToggle('.xlsx');\n        break;\n      case 'New PowerPoint File':\n        this.onCreateFileToggle('.pptx');\n        break;\n      case 'New Word File':\n        this.onCreateFileToggle('.docx');\n        break;\n      case 'New SeaDoc File':\n        this.onCreateFileToggle('.sdoc');\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  };\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  };\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  };\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  };\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  };\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  };\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  };\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  };\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  };\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  };\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  };\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  };\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  };\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  };\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  };\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${(this.state.isListDropTipShow && this.canDrop) ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected} />\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  onItemConvert={this.props.onItemConvert}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                  loadDirentList={this.props.loadDirentList}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.props.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                toggleDialog={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  loadDirentList: PropTypes.func,\n  fullDirentList: PropTypes.array,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemConvert={this.props.onItemConvert}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n          loadDirentList={this.props.loadDirentList}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n\n    const { dirent } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(dirent.permission);\n    this.isCustomPermission = isCustomPermission;\n    this.customPermission = customPermission;\n    this.canPreview = true;\n    this.canDrag = dirent.permission === 'rw';\n    if (isCustomPermission) {\n      const { preview, modify } = customPermission.permission;\n      this.canPreview = preview || modify;\n      this.canDrag = modify;\n    }\n\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { dirent, activeDirent } = this.props;\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (dirent === activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  };\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n\n    if (dirent.isDir()) {\n      this.props.onItemClick(dirent);\n      return;\n    }\n\n    // is have preview permission\n    if (!this.canPreview) {\n      return;\n    }\n\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  };\n\n  onGridItemDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  };\n\n  onGridItemDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  };\n\n  onGridItemDragOver = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onGridItemDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n  };\n\n  onGridItemDragDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  };\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  };\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  };\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  };\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n    if (dirent.is_sdoc_revision && dirent.revision_id) {\n      fileHref = siteRoot + 'lib/' + this.props.repoID + '/revisions/' + dirent.revision_id + '/';\n    }\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = dirent.is_freezed ? gettext('Frozen by {name}') : gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    const lockedImageUrl = `${mediaUrl}img/file-${dirent.is_freezed ? 'freezed' : 'locked'}-32.png`;\n    const lockedMessage = dirent.is_freezed ? gettext('freezed') : gettext('locked');\n    return (\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable={this.canDrag}\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {(this.canPreview && dirent.encoded_thumbnail_src) ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={lockedImageUrl} alt={lockedMessage} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable={this.canDrag} >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            {(!dirent.isDir() && !this.canPreview) ?\n              <a className={`sf-link grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} onClick={this.onItemLinkClick}>{dirent.name}</a> :\n              <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n            }\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, username, enableSeadoc } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  fullDirentList: PropTypes.array,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  posX: PropTypes.number,\n  posY: PropTypes.number,\n};\n\nclass DirentGridView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      fileType: '',\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = (fileType) => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: fileType || ''\n    });\n  };\n\n  onGridItemClick = (dirent) => {\n    hideMenu();\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  };\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  };\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  };\n\n  onItemConvert = (currentObject, e, dstType) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemConvert(currentObject, dstType);\n  };\n\n  exportDocx = () => {\n    const serviceUrl = window.app.config.serviceURL;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let exportToDocxUrl = serviceUrl + '/repo/sdoc_export_to_docx/' + repoID + '/?file_path=' + filePath;\n    window.location.href = exportToDocxUrl;\n  };\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Freeze Document':\n        this.onFreezeDocument(currentObject);\n        break;\n      case 'Convert to Markdown':\n        this.onItemConvert(currentObject, event, 'markdown');\n        break;\n      case 'Convert to docx':\n        this.onItemConvert(currentObject, event, 'docx');\n        break;\n      case 'Export docx':\n        this.exportDocx();\n        break;\n      case 'Convert to sdoc':\n        this.onItemConvert(currentObject, event, 'sdoc');\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Mark as draft':\n        this.onMarkAsDraft(currentObject);\n        break;\n      case 'Unmark as draft':\n        this.onUnmarkAsDraft(currentObject);\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle('');\n        break;\n      case 'New Markdown File':\n        this.onCreateFileToggle('.md');\n        break;\n      case 'New Excel File':\n        this.onCreateFileToggle('.xlsx');\n        break;\n      case 'New PowerPoint File':\n        this.onCreateFileToggle('.pptx');\n        break;\n      case 'New Word File':\n        this.onCreateFileToggle('.docx');\n        break;\n      case 'New SeaDoc File':\n        this.onCreateFileToggle('.sdoc');\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Properties':\n        this.props.showDirentDetail('info');\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  };\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  };\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  };\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  };\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  };\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  };\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  };\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  };\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  };\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onFreezeDocument = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath, -1).then(() => {\n      this.props.updateDirent(currentObject, 'is_freezed', true);\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMarkAsDraft = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(currentObject, 'is_sdoc_draft', true);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUnmarkAsDraft = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.sdocUnmarkAsDraft(repoID, filePath).then((res) => {\n      this.props.updateDirent(currentObject, 'is_sdoc_draft', false);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  };\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  };\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  };\n\n  prepareImageItem = (item) => {\n    const name = item.name;\n    const repoID = this.props.repoID;\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n\n    const src = `${siteRoot}repo/${repoID}/raw${path}`;\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  };\n\n  showImagePopup = (curItem) => {\n    let items = this.props.fullDirentList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  };\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  };\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  };\n\n  gridContainerClick = () => {\n    hideMenu();\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  };\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    const {\n      NEW_FOLDER, NEW_FILE,\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE,\n      NEW_SEADOC_FILE\n    } = TextTranslation;\n\n    const menuList = [\n      NEW_FOLDER, NEW_FILE, 'Divider',\n      NEW_MARKDOWN_FILE,\n      NEW_EXCEL_FILE,\n      NEW_POWERPOINT_FILE,\n      NEW_WORD_FILE\n    ];\n    if (enableSeadoc) {\n      menuList.push(NEW_SEADOC_FILE);\n    }\n    this.handleContextClick(event, id, menuList);\n  };\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  };\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  };\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  };\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.props.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n  fullDirentList: PropTypes.array,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          fullDirentList={this.props.fullDirentList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onItemConvert={this.props.onItemConvert}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  UNSAFE_componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    const { currentNode } = this.props;\n    this.changeState(currentNode);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  };\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  };\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  };\n\n  onAfterModelOpened = () => {\n    if (!this.newInput.current) return;\n    const { currentNode } = this.props;\n    let type = currentNode.object.type;\n    this.newInput.current.focus();\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.current.setSelectionRange(0, -1);\n    }\n  };\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle} onOpened={this.onAfterModelOpened}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyDown={this.handleKeyDown} innerRef={this.newInput} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  };\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  };\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  };\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  };\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  };\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  };\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  };\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  };\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  };\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  };\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  };\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  };\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  };\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  };\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  };\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  };\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  };\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  };\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              userPerm={this.props.userPerm}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.props.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleDialog={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport SeafileMarkdownViewer from '../seafile-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  };\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  };\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  };\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <SeafileMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </SeafileMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n  fullDirentList: PropTypes.array,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  };\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  };\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  };\n\n  UNSAFE_componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          userPerm={this.props.userPerm}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              fullDirentList={this.props.fullDirentList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onItemConvert={this.props.onItemConvert}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemConvert: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n  loadDirentList: PropTypes.func,\n  fullDirentList: PropTypes.array,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  };\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  };\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  };\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  };\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  };\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  };\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  };\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  };\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  };\n\n  render() {\n    let { path, repoID, usedRepoTags, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              userPerm={this.props.userPerm}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onItemConvert={this.props.onItemConvert}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                    loadDirentList={this.props.loadDirentList}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onItemConvert={this.props.onItemConvert}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    fullDirentList={this.props.fullDirentList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onItemConvert={this.props.onItemConvert}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  fileTags={this.props.isViewFile ? this.props.fileTags : []}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  };\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  };\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  };\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    const fileName = resumableFile.newFileName;\n    const size = this.formatFileSize(resumableFile.size);\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={fileName}>{fileName}</div>\n        </td>\n        <td className=\"ellipsis\">\n          <span className=\"file-size\" title={size}>{size}</span>\n        </td>\n        <td className=\"upload-progress ellipsis\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation ellipsis\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\" title={file.name}>{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  };\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  };\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  };\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '% (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view mw-100\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <div className=\"text-right mt-2\">\n            {retryFileList.length > 0 ?\n              <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n              :\n              <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n            }\n            {!allFilesUploaded ?\n              <span className=\"cursor-pointer ml-3\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n              :\n              <span className=\"cursor-pointer ml-3 disabled-link\" >{gettext('Cancel All')}</span>\n            }\n          </div>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"30%\">{gettext('name')}</th>\n                <th width=\"20%\">{gettext('size')}</th>\n                <th width=\"30%\">{gettext('progress')}</th>\n                <th width=\"20%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  };\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  };\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  };\n\n  render() {\n    const { fileName } = this.props.currentResumableFile;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>\n          <span>{gettext('Replace file {filename}?').replace('{filename}', fileName)}</span>\n        </ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n  isCustomPermission: PropTypes.bool,\n};\n\nclass FileUploader extends React.Component {\n\n  static defaultProps = {\n    isCustomPermission: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  };\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  };\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  };\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  };\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  };\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  };\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  };\n\n  onFileAdded = (resumableFile, files) => {\n    const { isCustomPermission } = this.props;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      if (!isCustomPermission) {\n        let direntList = this.props.direntList;\n        for (let i = 0; i < direntList.length; i++) {\n          if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n            hasRepetition = true;\n            break;\n          }\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  };\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  };\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  };\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  };\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  };\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  };\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  };\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    };\n    return errorMessage[key] || key;\n  };\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  };\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  };\n\n  onPause = () => {\n\n  };\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  };\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  };\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  };\n\n  onCancel = () => {\n\n  };\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  };\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  };\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  };\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  };\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  };\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  };\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  };\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  };\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  };\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  };\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  };\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file；\n    this.setState({isUploadRemindDialogShow: false});\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  deleteFolder: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass DeleteFolderDialog extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      sharedToUserCount: 0,\n      sharedToGroupCount: 0\n    };\n  }\n\n  componentDidMount() {\n    const { repoID, path } = this.props;\n    seafileAPI.getRepoFolderShareInfo(repoID, path).then((res) => {\n      this.setState({\n        sharedToUserCount: res.data['shared_user_emails'].length,\n        sharedToGroupCount: res.data['shared_group_ids'].length\n      });\n    });\n  }\n\n  deleteFolder = () => {\n    this.props.deleteFolder();\n    this.props.toggleDialog();\n  };\n\n  render() {\n    const { sharedToUserCount, sharedToGroupCount } = this.state;\n    const { path, toggleDialog } = this.props;\n    const folderName = Utils.getFileName(path);\n    const opTarget = '<span class=\"op-target\">' + Utils.HTMLescape(folderName) + '</span>';\n    const message = gettext('Are you sure you want to delete %s ?').replace('%s', opTarget);\n\n    let alert_message = '';\n    if (sharedToUserCount > 0 || sharedToGroupCount > 0) {\n      alert_message = gettext('This folder has been shared to {user_amount} user(s) and {group_amount} group(s).')\n        .replace('{user_amount}', sharedToUserCount)\n        .replace('{group_amount}', sharedToGroupCount);\n    }\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Delete Folder')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: message}}></p>\n          {alert_message && <p className=\"error\">{alert_message}</p>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.deleteFolder}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nDeleteFolderDialog.propTypes = propTypes;\n\nexport default DeleteFolderDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { navigate } from '@gatsbyjs/reach-router';\nimport { gettext, siteRoot, username, isDocs, enableVideoThumbnail } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\nimport DeleteFolderDialog from '../../components/dialog/delete-folder-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      isDeleteFolderDialogOpen: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  };\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  };\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  };\n\n  UNSAFE_componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  async componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('?')[0]; // '?': to remove the effect of '?notifications=all', which is added to the URL when the 'view all notifications' dialog is open.\n    location = decodeURIComponent(location);\n    let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n    path = path.slice(path.indexOf('/')); // get current path\n    // If the path isn't a root path and ends with '/', delete the ending '/'\n    if (path.length > 1 && path[path.length - 1] === '/') {\n      path = path.slice(0, path.length - 1);\n    }\n\n    try {\n      const repoRes = await seafileAPI.getRepoInfo(repoID);\n      const repoInfo = new RepoInfo(repoRes.data);\n      const isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n\n      this.setState({\n        currentRepoInfo: repoInfo,\n      });\n\n      if (repoInfo.permission.startsWith('custom-')) {\n        const permissionID = repoInfo.permission.split('-')[1];\n        const permissionRes = await seafileAPI.getCustomPermission(repoID, permissionID);\n        window.custom_permission = permissionRes.data.permission;\n      }\n\n      this.isNeedUpdateHistoryState = false;\n      this.setState({\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        isGroupOwnedRepo: isGroupOwnedRepo,\n        path: path\n      });\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    } catch (error) {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else if (error.response.status == 404) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Library share permission not found.')\n          });\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  };\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updateColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  updateColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  };\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and review counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  };\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        const { dirent_list, user_perm } = res.data;\n        let tree = this.state.treeData;\n        this.addResponseListToNode(dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree,\n          userPerm: user_perm,\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  };\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  };\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  };\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      res.data.dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n\n      if (this.state.currentRepoInfo.is_admin) {\n        if (this.foldersSharedOut) {\n          this.identifyFoldersSharedOut();\n        } else {\n          this.foldersSharedOut = [];\n          seafileAPI.getAllRepoFolderShareInfo(repoID).then(res => {\n            res.data.share_info_list.forEach(item => {\n              if (this.foldersSharedOut.indexOf(item.path) === -1) {\n                this.foldersSharedOut.push(item.path);\n              }\n            });\n            this.identifyFoldersSharedOut();\n          });\n        }\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  };\n\n  identifyFoldersSharedOut = () => {\n    const { path, direntList } = this.state;\n    if (this.foldersSharedOut.length == 0) {\n      return;\n    }\n    direntList.forEach(dirent => {\n      if (dirent.type == 'dir' && this.foldersSharedOut.indexOf(Utils.joinPath(path, dirent.name) + '/') !== -1) {\n        dirent.has_been_shared_out = true;\n      }\n    });\n    this.setState({\n      direntList: direntList\n    });\n  };\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  };\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  };\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return (Utils.imageCheck(item.name) || (enableVideoThumbnail && Utils.videoCheck(item.name))) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  };\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    // for node not loaded, such as a deep folder '/vv/aa'\n    if (!node) { // node: null\n      return false;\n    }\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.forEach(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  };\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  };\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  };\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  restoreDeletedDirents = (commitID, paths, e) => {\n    const { repoID } = this.props;\n    e.preventDefault();\n    toaster.closeAll();\n    seafileAPI.restoreDirents(repoID, commitID, paths).then(res => {\n      const { success, failed } = res.data;\n      success.forEach(dirent => {\n        let name = Utils.getFileName(dirent.path);\n        let parentPath = Utils.getDirName(dirent.path);\n        if (!dirent.is_dir) {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'file');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'file');\n          }\n        } else {\n          if (this.state.currentMode === 'column') {\n            this.addNodeToTree(name, parentPath, 'dir');\n          }\n          if (parentPath === this.state.path && !this.state.isViewFile) {\n            this.addDirent(name, 'dir');\n          }\n        }\n      });\n\n      if (success.length) {\n        let msg = success.length > 1 ? gettext('Restored {name} and {n} other items') :\n          gettext('Restored {name}');\n        msg = msg.replace('{name}', success[0].path.split('/').pop())\n          .replace('{n}', success.length - 1);\n        toaster.success(msg);\n      }\n\n      if (failed.length) {\n        let msg = failed.length > 1 ? gettext('Failed to restore {name} and {n} other items') :\n          gettext('Failed to restore {name}');\n        msg = msg.replace('{name}', failed[0].path.split('/').pop())\n          .replace('{n}', failed.length - 1);\n        toaster.danger(msg);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and {n} other items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, direntPaths)}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and {n} other items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onAddFile = (filePath, isMarkdownDraft, isSdocDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isMarkdownDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        if (isSdocDraft) { // the new file is marked to be draft\n          seafileAPI.sdocMarkAsDraft(repoID, filePath).then((res) => {\n            this.addDirent(name, 'file', res.data.size, isSdocDraft);\n          }).catch(error => {\n            let errMessage = Utils.getErrorMsg(error);\n            toaster.danger(errMessage);\n            this.addDirent(name, 'file', res.data.size);\n          });\n          return;\n        }\n\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  };\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        // eslint-disable-next-line\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  };\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  };\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  };\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  };\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  };\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  };\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  };\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = '';\n        if (error.response.status == 403 && error.response.data && error.response.data['error_msg']) {\n          errMessage = error.response.data['error_msg'];\n        } else {\n          errMessage = Utils.getErrorMsg(error);\n        }\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  toggleDeleteFolderDialog = () => {\n    this.setState({isDeleteFolderDialogOpen: !this.state.isDeleteFolderDialogOpen});\n  };\n\n  deleteFolder = () => {\n    const { repoID } = this.props;\n    const { folderToDelete: path } = this.state;\n    seafileAPI.deleteDir(repoID, path).then((res) => {\n      this.deleteItemAjaxCallback(path, true);\n      let name = Utils.getFileName(path);\n      var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n      const successTipWithUndo = (\n        <>\n          <span>{msg}</span>\n          <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n        </>\n      );\n      toaster.success(successTipWithUndo, {duration: 5});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      this.setState({ folderToDelete: path }, () => {\n        this.toggleDeleteFolderDialog();\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then((res) => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        const successTipWithUndo = (\n          <>\n            <span>{msg}</span>\n            <a className=\"action-link p-0 ml-1\" href=\"#\" onClick={this.restoreDeletedDirents.bind(this, res.data.commit_id, [path])}>{gettext('Undo')}</a>\n          </>\n        );\n        toaster.success(successTipWithUndo, {duration: 5});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  };\n\n  onConvertItem = (dirent, dstType) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    let repoID = this.props.repoID;\n    toaster.notifyInProgress(gettext('Converting, please wait...'));\n    seafileAPI.convertFile(repoID, path, dstType).then((res) => {\n      let newFileName = res.data.obj_name;\n      let parentDir = res.data.parent_dir;\n      let new_path = parentDir + '/' + newFileName;\n      let parentPath = Utils.getDirName(new_path);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(newFileName, parentPath, 'file');\n      }\n\n      this.addDirent(newFileName, 'file', res.data.size);\n      let message = gettext('Successfully converted the file.');\n      toaster.success(message);\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = Utils.getFileName(path);\n        errMessage = gettext('Failed to convert {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n    });\n\n  };\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  };\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n        if (dirent.is_sdoc_revision && dirent.revision_id) {\n          url = siteRoot + 'lib/' + repoID + '/revisions/' + dirent.revision_id + '/';\n        }\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  };\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  };\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  };\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      if (this.state.isViewFile) {\n        this.setState({fileTags: fileTags});\n      } else {\n        this.updateDirent(dirent, 'file_tags', fileTags);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  };\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      // use current dirent parent's permission as it's permission\n      direntObject.permission = this.state.userPerm;\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n      }\n    }\n  };\n\n  addDirent = (name, type, size, isSdocDraft) => {\n    let item = this.createDirent(name, type, size, isSdocDraft);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n  };\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  };\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n  };\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n  };\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    //this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({\n      direntList: direntList,\n      selectedDirentList: [],\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  };\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  };\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  };\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      const { dirent_list: direntList, user_perm } = res.data;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree,\n        userPerm: user_perm,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  };\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        let dirent = node.object;\n        if (dirent.is_sdoc_revision && dirent.revision_id) {\n          url = siteRoot + 'lib/' + repoID + '/revisions/' + dirent.revision_id + '/';\n        }\n        window.open(url);\n      }\n    }\n  };\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  };\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  };\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  };\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  };\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  };\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  };\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  };\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  };\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size, isSdocDraft) {\n    // use current dirent parent's permission as it's permission\n    const { userPerm: permission } = this.state;\n    const mtime = new Date().getTime()/1000;\n    const obj = { name, type, mtime, size, permission };\n    if (isSdocDraft) {\n      obj.is_sdoc_draft = isSdocDraft;\n    }\n    const dirent = new Dirent(obj);\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  };\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  };\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  };\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  };\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  };\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  };\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  };\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  };\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  };\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  };\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  };\n\n\n  handleSubmit = (e) => {\n    let options = {\n      'share_type': 'personal',\n      'from': this.state.currentRepoInfo.owner_email\n    };\n    seafileAPI.leaveShareRepo(this.props.repoID, options).then(res => {\n      navigate(siteRoot + 'shared-libs/');\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error, true);\n      toaster.danger(errorMsg);\n    });\n\n    e.preventDefault();\n  };\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (this.state.errorMsg) {\n      return (\n        <Fragment>\n          <p className=\"error mt-6 text-center\">{this.state.errorMsg}</p>\n          <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Leave Share')}</button>\n        </Fragment>\n      );\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow, isDeleteFolderDialogOpen } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    let canUpload = true;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { upload } = customPermission.permission;\n      canUpload = upload;\n    }\n\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <LibContentToolbar\n            isViewFile={this.state.isViewFile}\n            filePermission={this.state.filePermission}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            onFileTagChanged={this.onToolbarFileTagChanged}\n            onSideNavMenuClick={this.props.onMenuClick}\n            repoID={this.props.repoID}\n            path={this.state.path}\n            isDirentSelected={this.state.isDirentSelected}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            onItemRename={this.onMainPanelItemRename}\n            direntList={this.state.direntList}\n            repoName={this.state.repoName}\n            repoEncrypted={this.state.repoEncrypted}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            userPerm={this.state.userPerm}\n            showShareBtn={showShareBtn}\n            enableDirPrivateShare={enableDirPrivateShare}\n            onAddFile={this.onAddFile}\n            onAddFolder={this.onAddFolder}\n            onUploadFile={this.onUploadFile}\n            onUploadFolder={this.onUploadFolder}\n            currentMode={this.state.currentMode}\n            switchViewMode={this.switchViewMode}\n            onSearchedClick={this.onSearchedClick}\n            isRepoOwner={isRepoOwner}\n            currentRepoInfo={this.state.currentRepoInfo}\n            updateDirent={this.updateDirent}\n            onDirentSelected={this.onDirentSelected}\n            showDirentDetail={this.showDirentDetail}\n            unSelectDirent={this.unSelectDirent}\n            onFilesTagChanged={this.onFileTagChanged}\n          />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <LibContentContainer\n            pathPrefix={this.props.pathPrefix}\n            currentMode={this.state.currentMode}\n            path={this.state.path}\n            pathExist={this.state.pathExist}\n            currentRepoInfo={this.state.currentRepoInfo}\n            repoID={this.props.repoID}\n            enableDirPrivateShare={enableDirPrivateShare}\n            userPerm={userPerm}\n            isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n            onTabNavClick={this.props.onTabNavClick}\n            onMainNavBarClick={this.onMainNavBarClick}\n            isViewFile={this.state.isViewFile}\n            hash={this.state.hash}\n            isDraft={this.state.isDraft}\n            hasDraft={this.state.hasDraft}\n            fileTags={this.state.fileTags}\n            goDraftPage={this.goDraftPage}\n            isFileLoading={this.state.isFileLoading}\n            isFileLoadedErr={this.state.isFileLoadedErr}\n            filePermission={this.state.filePermission}\n            content={this.state.content}\n            lastModified={this.state.lastModified}\n            latestContributor={this.state.latestContributor}\n            onLinkClick={this.onLinkClick}\n            isTreeDataLoading={this.state.isTreeDataLoading}\n            treeData={this.state.treeData}\n            currentNode={this.state.currentNode}\n            onNodeClick={this.onTreeNodeClick}\n            onNodeCollapse={this.onTreeNodeCollapse}\n            onNodeExpanded={this.onTreeNodeExpanded}\n            onAddFolderNode={this.onAddFolder}\n            onAddFileNode={this.onAddFile}\n            onRenameNode={this.onRenameTreeNode}\n            onDeleteNode={this.onDeleteTreeNode}\n            draftCounts={this.state.draftCounts}\n            usedRepoTags={this.state.usedRepoTags}\n            updateUsedRepoTags={this.updateUsedRepoTags}\n            isDirentListLoading={this.state.isDirentListLoading}\n            direntList={direntItemsList}\n            fullDirentList={this.state.direntList}\n            sortBy={this.state.sortBy}\n            sortOrder={this.state.sortOrder}\n            sortItems={this.sortItems}\n            updateDirent={this.updateDirent}\n            onDirentClick={this.onDirentClick}\n            onItemClick={this.onItemClick}\n            onItemSelected={this.onDirentSelected}\n            onItemDelete={this.onMainPanelItemDelete}\n            onItemRename={this.onMainPanelItemRename}\n            onItemMove={this.onMoveItem}\n            onItemCopy={this.onCopyItem}\n            onItemConvert={this.onConvertItem}\n            onAddFolder={this.onAddFolder}\n            onAddFile={this.onAddFile}\n            onFileTagChanged={this.onFileTagChanged}\n            isDirentSelected={this.state.isDirentSelected}\n            isAllDirentSelected={this.state.isAllDirentSelected}\n            onAllDirentSelected={this.onAllDirentSelected}\n            isDirentDetailShow={this.state.isDirentDetailShow}\n            selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n            selectedDirentList={this.state.selectedDirentList}\n            onItemsMove={this.onMoveItems}\n            onItemsCopy={this.onCopyItems}\n            onItemsDelete={this.onDeleteItems}\n            closeDirentDetail={this.closeDirentDetail}\n            showDirentDetail={this.showDirentDetail}\n            direntDetailPanelTab={this.state.direntDetailPanelTab}\n            onDeleteRepoTag={this.onDeleteRepoTag}\n            onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n            updateDetail={this.state.updateDetail}\n            onListContainerScroll={this.onListContainerScroll}\n            loadDirentList={this.loadDirentList}\n          />\n          {canUpload && this.state.pathExist && !this.state.isViewFile && (\n            <FileUploader\n              ref={uploader => this.uploader = uploader}\n              dragAndDrop={true}\n              path={this.state.path}\n              repoID={this.props.repoID}\n              direntList={this.state.direntList}\n              onFileUploadSuccess={this.onFileUploadSuccess}\n              isCustomPermission={isCustomPermission}\n            />\n          )}\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n        {isDeleteFolderDialogOpen && (\n          <DeleteFolderDialog\n            repoID={this.props.repoID}\n            path={this.state.folderToDelete}\n            deleteFolder={this.deleteFolder}\n            toggleDialog={this.toggleDeleteFolderDialog}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  };\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  };\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  };\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  };\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  };\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: ''\n    };\n    this.fileInputRef = React.createRef();\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  };\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  };\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  };\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Table } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport RoleSelector from './single-selector';\nimport toaster from './toast';\nimport OpIcon from './op-icon';\n\nconst propTypes = {\n  groupMembers: PropTypes.array.isRequired,\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired\n};\n\nclass GroupMembers extends React.Component {\n\n  render() {\n    const { groupMembers, changeMember, deleteMember, groupID, isOwner, isItemFreezed, toggleItemFreezed } = this.props;\n    return (\n      <Table size=\"sm\" className=\"manage-members-table\">\n        <thead>\n          <tr>\n            <th width=\"15%\"></th>\n            <th width=\"45%\">{gettext('Name')}</th>\n            <th width=\"30%\">{gettext('Role')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n        <tbody>\n          {groupMembers.map((item, index) => {\n            return (\n              <Member\n                key={index}\n                item={item}\n                changeMember={changeMember}\n                deleteMember={deleteMember}\n                groupID={groupID}\n                isOwner={isOwner}\n                isItemFreezed={isItemFreezed}\n                toggleItemFreezed={toggleItemFreezed}\n              />\n            );\n          })\n          }\n        </tbody>\n      </Table>\n    );\n  }\n}\n\nGroupMembers.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  toggleItemFreezed: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roleOptions = [\n      { value: 'Admin', text: gettext('Admin'), isSelected: false },\n      { value: 'Member', text: gettext('Member'), isSelected: false }\n    ];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (roleOption) => {\n    let isAdmin = roleOption.value === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  };\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  };\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  };\n\n  render() {\n    const { highlight } = this.state;\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n\n    const { role: curRole } = item;\n    this.roleOptions = this.roleOptions.map(item => {\n      item.isSelected = item.value == curRole;\n      return item;\n    });\n    const currentSelectedOption = this.roleOptions.filter(item => item.isSelected)[0];\n\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'tr-highlight' : ''} tabIndex=\"0\" onFocus={this.handleMouseOver}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleSelector\n              isDropdownToggleShown={highlight}\n              currentSelectedOption={currentSelectedOption}\n              options={this.roleOptions}\n              selectOption={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && this.state.highlight) &&\n          <OpIcon\n            className=\"action-icon sf2-icon-x3\"\n            title={gettext('Delete')}\n            op={this.deleteMember}\n          />\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default GroupMembers;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, InputGroup, InputGroupText, Input } from 'reactstrap';\nimport { Utils } from '../utils/utils';\nimport { gettext } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport UserSelect from './user-select';\nimport toaster from './toast';\nimport Loading from './loading';\nimport GroupMembers from './group-members';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false,\n      searchActive: false,\n      keyword: '',\n      membersFound: []\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members)\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  };\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  };\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  };\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1);\n        });\n      }\n    }\n  };\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  };\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  };\n\n  searchMembers = (e) => {\n    const { groupMembers } = this.state;\n    const keyword = e.target.value;\n    const value = keyword.trim().toLowerCase();\n    const membersFound = groupMembers.filter(item => item.name.toLowerCase().indexOf(value) > -1);\n    this.setState({ keyword, membersFound });\n  };\n\n  clearSearch = () => {\n    this.setState({\n      keyword: '',\n      membersFound: []\n    });\n  };\n\n  onSearchInputFocus = () => {\n    this.setState({\n      searchActive: true\n    });\n  };\n\n  onSearchInputBlur = () => {\n    this.setState({\n      searchActive: false\n    });\n  };\n\n  render() {\n    const {\n      isLoading, hasNextPage, groupMembers,\n      keyword, membersFound,\n      searchActive\n    } = this.state;\n    return (\n      <Fragment>\n        <p className=\"mb-2\">{gettext('Add group member')}</p>\n        <div className='add-members'>\n          <UserSelect\n            placeholder={gettext('Search users')}\n            onSelectChange={this.onSelectChange}\n            ref=\"userSelect\"\n            isMulti={true}\n            className=\"add-members-select\"\n          />\n          {this.state.selectedOption ?\n            <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n            <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n          }\n        </div>\n        {\n          this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n        }\n        {groupMembers.length > 10 &&\n          <InputGroup className={`search-group-members rounded ${searchActive ? 'active' : ''}`}>\n            <InputGroupText>\n              <i className=\"fas fa-search\" aria-hidden={true}></i>\n            </InputGroupText>\n            <Input\n              type=\"text\"\n              className=\"input-group-input px-0\"\n              placeholder={gettext('Search group members')}\n              value={keyword}\n              onChange={this.searchMembers}\n              onFocus={this.onSearchInputFocus}\n              onBlur={this.onSearchInputBlur}\n            />\n            {keyword && (\n              <InputGroupText>\n                <i className=\"sf2-icon-x1\" aria-hidden={true} onClick={this.clearSearch}></i>\n              </InputGroupText>\n            )}\n          </InputGroup>\n        }\n        <div className=\"manage-members\" onScroll={keyword.trim() ? () => {} : this.handleScroll}>\n          {isLoading ? <Loading /> : (\n            <Fragment>\n              <GroupMembers\n                groupMembers={keyword.trim() ? membersFound : groupMembers}\n                changeMember={this.changeMember}\n                deleteMember={this.deleteMember}\n                groupID={this.props.groupID}\n                isOwner={this.props.isOwner}\n                isItemFreezed={this.state.isItemFreezed}\n                toggleItemFreezed={this.toggleItemFreezed}\n              />\n              {(!keyword.trim() && hasNextPage) && <Loading />}\n            </Fragment>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport ListAndAddGroupMembers from '../list-and-add-group-members';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string,\n  isOwner: PropTypes.bool.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  render() {\n    const { groupID, isOwner, toggleManageMembersDialog: toggle } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggle} className=\"group-manage-members-dialog\">\n        <ModalHeader toggle={toggle}>{gettext('Manage group members')}</ModalHeader>\n        <ModalBody className=\"pb-0\">\n          <ListAndAddGroupMembers\n            groupID={groupID}\n            isOwner={isOwner}\n          />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@gatsbyjs/reach-router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport OpIcon from '../../components/op-icon';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 300,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  };\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  };\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  };\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  };\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  };\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  };\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  };\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  };\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.forEach(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  };\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  };\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  };\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  };\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  };\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  };\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  };\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  };\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  };\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  };\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <OpIcon\n                        className=\"sf2-icon-cog1 action-icon group-top-action-icon\"\n                        title={gettext('Settings')}\n                        op={this.toggleGroupDropdown}\n                      />\n                      {this.state.showGroupDropdown &&\n                        <div className=\"sf-popover\" id=\"group-setting-popover\">\n                          <div className=\"sf-popover-hd sf-popover-title\">\n                            <span>{gettext('Settings')}</span>\n                            <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                              role=\"button\"\n                              aria-label={gettext('Close')}\n                              onClick={this.toggleGroupDropdown}></a>\n                          </div>\n                          <div className=\"sf-popover-con\">\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog}>{gettext('Rename')}</a></li>\n                              {\n                                this.state.isOwner &&\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                              }\n                            </ul>\n                            }\n                            {(this.state.isStaff || this.state.isOwner) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                            </ul>\n                            }\n                            {\n                              this.state.isOwner &&\n                              <ul className=\"sf-popover-list\">\n                                <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                              </ul>\n                            }\n                            {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                            {(!this.state.isOwner && !isDepartmentGroup) &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                            </ul>\n                            }\n                          </div>\n                        </div>}\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    {this.state.showGroupMembersPopover &&\n                    <div className=\"sf-popover\" id=\"group-members-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </div>}\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                  onMonitorRepo={this.onMonitorRepo}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  };\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  };\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal} autoFocus={false}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n            autoFocus={true}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onMonitorRepo = (repo, monitored) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.monitored = monitored;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  };\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n            onMonitorRepo={this.onMonitorRepo}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  };\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  };\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  };\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  };\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n  searchPlaceholder: PropTypes.string.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  };\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  };\n\n  deleteItem = (e) => {\n    e.preventDefault();\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  };\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  };\n\n  toggleRevokeDialog = (e) => {\n    e.preventDefault();\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  };\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter} tabIndex=\"0\">\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                aria-label={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </a> :\n              <a href=\"#\"\n                role=\"button\"\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                aria-label={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </a>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  data: PropTypes.object.isRequired,\n  invitation: PropTypes.object.isRequired,\n  isDesktop: PropTypes.bool.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  };\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  };\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} autoFocus={false} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyDown={this.handleKeyDown} autoFocus={true} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  };\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  };\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  };\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  };\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = (e) => {\n    e.preventDefault();\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  };\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  };\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  };\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank' rel=\"noreferrer\">{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <a href=\"#\" role=\"button\" aria-label={gettext('Unpublish')} title={gettext('Unpublish')} className={deleteIcon} onClick={this.onDeleteToggle}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\" rel=\"noreferrer\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canPublishRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  };\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  };\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  };\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  };\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  };\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  };\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  };\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  };\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            {canPublishRepo &&\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n            }\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDom from 'react-dom';\nimport { Router, navigate } from '@gatsbyjs/reach-router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport MyFileActivities from './pages/dashboard/my-file-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMViaWebdav from './pages/ocm-via-webdav/ocm-via-webdav';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst MyFileActivitiesWrapper = MainContentWrapper(MyFileActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst OCMViaWebdavWrapper = MainContentWrapper(OCMViaWebdav);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  };\n\n  UNSAFE_componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  };\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  };\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  };\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  };\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  };\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  };\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  };\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  };\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  };\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyFileActivitiesWrapper path={siteRoot + 'my-activities'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinks path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinks path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <OCMViaWebdavWrapper path={siteRoot + 'ocm-via-webdav'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDom.render(<App />, document.getElementById('wrapper'));\n","import React from 'react';\nimport { Popover } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport { KeyCodes } from '../../constants';\n\nconst propTypes = {\n  target: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n  boundariesElement: PropTypes.object,\n  innerClassName: PropTypes.string,\n  popoverClassName: PropTypes.string,\n  children: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  hideSeahubPopover: PropTypes.func.isRequired,\n  hideSeahubPopoverWithEsc: PropTypes.func,\n  hideArrow: PropTypes.bool,\n  canHideSeahubPopover: PropTypes.bool,\n  placement: PropTypes.string,\n  modifiers: PropTypes.object\n};\n\nclass SeahubPopover extends React.Component {\n\n  SeahubPopoverRef = null;\n  isSelectOpen = false;\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.onMouseDown);\n    document.addEventListener('keydown', this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.onMouseDown);\n    document.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  getEventClassName = (e) => {\n    // svg mouseEvent event.target.className is an object\n    if (!e || !e.target) return '';\n    return e.target.getAttribute('class') || '';\n  };\n\n  onKeyDown = (e) => {\n    const { canHideSeahubPopover, hideSeahubPopoverWithEsc } = this.props;\n    if (e.keyCode === KeyCodes.Escape && typeof hideSeahubPopoverWithEsc === 'function' && !this.isSelectOpen) {\n      e.preventDefault();\n      hideSeahubPopoverWithEsc();\n    } else if (e.keyCode === KeyCodes.Enter) {\n      // Resolve the default behavior of the enter key when entering formulas is blocked\n      if (canHideSeahubPopover) return;\n      e.stopImmediatePropagation();\n    }\n  };\n\n  onMouseDown = (e) => {\n    if (!this.props.canHideSeahubPopover) return;\n    if (this.SeahubPopoverRef && e && this.getEventClassName(e).indexOf('popover') === -1 && !this.SeahubPopoverRef.contains(e.target)) {\n      this.props.hideSeahubPopover(e);\n    }\n  };\n\n  onPopoverInsideClick = (e) => {\n    e.stopPropagation();\n  };\n\n  render() {\n    const {\n      target, boundariesElement, innerClassName, popoverClassName, hideArrow, modifiers,\n      placement,\n    } = this.props;\n    let additionalProps = {};\n    if (boundariesElement) {\n      additionalProps.boundariesElement = boundariesElement;\n    }\n    return (\n      <Popover\n        placement={placement}\n        isOpen={true}\n        target={target}\n        fade={false}\n        hideArrow={hideArrow}\n        innerClassName={innerClassName}\n        className={popoverClassName}\n        modifiers={modifiers}\n        {...additionalProps}\n      >\n        <div ref={ref => this.SeahubPopoverRef = ref} onClick={this.onPopoverInsideClick}>\n          {this.props.children}\n        </div>\n      </Popover>\n    );\n  }\n}\n\nSeahubPopover.defaultProps = {\n  placement: 'bottom-start',\n  hideArrow: true,\n  canHideSeahubPopover: true\n};\n\nSeahubPopover.propTypes = propTypes;\n\nexport default SeahubPopover;\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n  hideOnLeave: PropTypes.bool,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  };\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  };\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  };\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  };\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  };\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  };\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  };\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  };\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  };\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  };\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  };\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  };\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  };\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  };\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  };\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  };\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  };\n}\n\nconst globalEventListener = new GlobalEventListener();\n\nexport default globalEventListener;\n","export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  };\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  };\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  };\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle} autoFocus={false}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                onKeyDown={this.handleKeyDown}\n                onChange={this.handleChange}\n                autoFocus={true}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const name = imageItems[imageIndex].name;\n    const imageTitle = `${name} (${imageIndex + 1}/${imageItemsLength})`;\n\n    return (\n      <Lightbox\n        imageTitle={imageTitle}\n        mainSrc={imageItems[imageIndex].src}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  copyToClipboard = () => {\n    copy(this.props.link);\n    this.props.toggleDialog();\n    toaster.success(gettext('The link is copied to the clipboard.'), {duration: 2});\n  };\n\n  render() {\n    const { link, toggleDialog } = this.props;\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n        <ModalBody>\n          <a href={link}>{link}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { mediaUrl, gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  data: PropTypes.object,\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      if (data.failed == 1) {\n        clearInterval(interval);\n        let errorMsg;\n        switch (data.failed_reason) { // returned from seaserv\n          case 'size too large':\n            errorMsg = gettext('Failed to download. The total size of the files exceeded the limit.');\n            break;\n          case 'internal error':\n            errorMsg = gettext('Internal Server Error');\n            break;\n          default:\n            errorMsg = gettext('Error');\n        }\n        this.setState({\n          isLoading: false,\n          errorMsg: errorMsg\n        });\n      } else {\n        this.setState({\n          zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n        });\n        if (data['total'] == data['zipped']) {\n          clearInterval(interval);\n          this.props.toggleDialog();\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  };\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  };\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return (\n        <div className=\"text-center mt-7 mb-8\">\n          <img src={`${mediaUrl}img/error-tip.png`} alt=\"\" width=\"100\" />\n          <p className=\"mt-3\">{errorMsg}</p>\n        </div>\n      );\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nContent.propTypes = {\n  data: PropTypes.object,\n};\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  };\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  };\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  };\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} className=\"vam\">\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport '../../css/common-add-tool.css';\n\nfunction CommonAddTool(props) {\n  const { callBack, footerName, className, addIconClassName } = props;\n  return (\n    <div className={`add-item-btn ${className ? className : ''}`} onClick={(e) => {callBack(e);}}>\n      <span className={`fas fa-plus mr-2 ${addIconClassName || ''}`}></span>\n      <span className='add-new-option' title={footerName}>{footerName}</span>\n    </div>\n  );\n}\n\nCommonAddTool.propTypes = {\n  className: PropTypes.string,\n  addIconClassName: PropTypes.string,\n  footerName: PropTypes.string.isRequired,\n  callBack: PropTypes.func.isRequired,\n};\n\nexport default CommonAddTool;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nconst propTypes = {\n  placeholder: PropTypes.string,\n  autoFocus: PropTypes.bool,\n  className: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  onKeyDown: PropTypes.func,\n  wait: PropTypes.number,\n  disabled: PropTypes.bool,\n  style: PropTypes.object,\n  isClearable: PropTypes.bool,\n  clearValue: PropTypes.func,\n  clearClassName: PropTypes.string,\n  components: PropTypes.object,\n  value: PropTypes.string,\n};\n\nclass SearchInput extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchValue: props.value,\n    };\n    this.isInputtingChinese = false;\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  componentDidMount() {\n    if (this.props.autoFocus && this.inputRef && this.inputRef !== document.activeElement) {\n      setTimeout(() => {\n        this.inputRef.focus();\n      }, 0);\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.props.value) {\n      this.setState({searchValue: nextProps.value});\n    }\n  }\n\n  componentWillUnmount() {\n    this.timer && clearTimeout(this.timer);\n    this.timer = null;\n    this.inputRef = null;\n  }\n\n  onCompositionStart = () => {\n    this.isInputtingChinese = true;\n  };\n\n  onChange = (e) => {\n    this.timer && clearTimeout(this.timer);\n    const { onChange, wait } = this.props;\n    let text = e.target.value;\n    this.setState({searchValue: text || ''}, () => {\n      if (this.isInputtingChinese) return;\n      this.timer = setTimeout(() => {\n        onChange && onChange(this.state.searchValue.trim());\n      }, wait);\n    });\n  };\n\n  onCompositionEnd = (e) => {\n    this.isInputtingChinese = false;\n    this.onChange(e);\n  };\n\n  clearSearch = () => {\n    const { clearValue } = this.props;\n    this.setState({searchValue: ''}, () => {\n      clearValue && clearValue();\n    });\n  };\n\n  setFocus = (isSelectAllText) => {\n    if (this.inputRef === document.activeElement) return;\n    this.inputRef.focus();\n    if (isSelectAllText) {\n      const txtLength = this.state.searchValue.length;\n      this.inputRef.setSelectionRange(0, txtLength);\n    }\n  };\n\n  isFunction = (functionToCheck) => {\n    const getType = {};\n    return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n  };\n\n  renderClear = () => {\n    const { isClearable, clearClassName, components = {} } = this.props;\n    const { searchValue } = this.state;\n    if (!isClearable || !searchValue) return null;\n    const { ClearIndicator } = components;\n    if (React.isValidElement(ClearIndicator)) {\n      return React.cloneElement(ClearIndicator, {clearValue: this.clearSearch});\n    } else if (this.isFunction(ClearIndicator)) {\n      return <ClearIndicator clearValue={this.clearSearch} />;\n    }\n    return (\n      <i className={classnames('search-text-clear input-icon-addon', clearClassName)} onClick={this.clearSearch}>×</i>\n    );\n  };\n\n  render() {\n    const { placeholder, autoFocus, className, onKeyDown, disabled, style } = this.props;\n    const { searchValue } = this.state;\n\n    return (\n      <Fragment>\n        <input\n          type=\"text\"\n          value={searchValue}\n          className={classnames('form-control', className)}\n          onChange={this.onChange}\n          autoFocus={autoFocus}\n          placeholder={placeholder}\n          onCompositionStart={this.onCompositionStart}\n          onCompositionEnd={this.onCompositionEnd}\n          onKeyDown={onKeyDown}\n          disabled={disabled}\n          style={style}\n          ref={ref => this.inputRef = ref}\n        />\n        {this.renderClear()}\n      </Fragment>\n    );\n  }\n}\n\nSearchInput.propTypes = propTypes;\n\nSearchInput.defaultProps = {\n  wait: 100,\n  disabled: false,\n  value: '',\n};\n\nexport default SearchInput;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass TagItem extends React.Component {\n\n  onMouseEnter = () => {\n    this.props.setHighlightIndex(this.props.index);\n  };\n\n  onMouseLeave = () => {\n    this.props.setHighlightIndex(-1);\n  };\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList || [];\n    repoTagIdList = fileTagList.map((fileTag) => fileTag.repo_tag_id);\n    return repoTagIdList;\n  };\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  render() {\n    const { repoTag, highlightIndex, index } = this.props;\n    const repoTagIdList = this.getRepoTagIdList();\n    const isTagSelected = repoTagIdList.indexOf(repoTag.id) != -1;\n    return (\n      <li\n        className={`tag-list-item cursor-pointer px-3 d-flex justify-content-between align-items-center ${highlightIndex === index ? 'hl' : ''}`}\n        onClick={this.onEditFileTag}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n      >\n        <div className=\"tag-item d-flex align-items-center\" style={{backgroundColor: repoTag.color}}>\n          <span className=\"tag-name\">{repoTag.name}</span>\n        </div>\n        {isTagSelected && <i className=\"fas fa-check tag-selected-icon\"></i>}\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = {\n  index: PropTypes.number.isRequired,\n  highlightIndex: PropTypes.number.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  setHighlightIndex: PropTypes.func.isRequired,\n};\n\nexport default TagItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport toaster from '../toast';\nimport CommonAddTool from '../common/common-add-tool';\nimport SearchInput from '../common/search-input';\nimport SeahubPopover from '../common/seahub-popover';\nimport TagItem from './tag-item';\nimport { KeyCodes, TAG_COLORS } from '../../constants';\n\nimport '../../css/repo-tag.css';\nimport '../../css/edit-filetag-popover.css';\n\nclass EditFileTagPopover extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n      searchVal: '',\n      highlightIndex: -1,\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  setHighlightIndex = (highlightIndex) => {\n    this.setState({ highlightIndex });\n  };\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  generateRandomColor = () => {\n    return TAG_COLORS[Math.floor(Math.random() * TAG_COLORS.length)];\n  };\n\n  createNewTag = () => {\n    let name = this.state.searchVal.trim();\n    if (!name) return;\n    let color = this.generateRandomColor();\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      this.onRepoTagCreated(repoTagID);\n      this.setState({\n        searchVal: '',\n        highlightIndex: -1,\n      });\n      this.getRepoTagList();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  getRepoTagIdList = () => {\n    return (this.props.fileTagList || []).map((fileTag) => fileTag.repo_tag_id);\n  };\n\n  onEditFileTag = (repoTag) => {\n    let { repoID, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      seafileAPI.addFileTag(repoID, filePath, repoTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === KeyCodes.ChineseInputMethod || e.keyCode === KeyCodes.LeftArrow || e.keyCode === KeyCodes.RightArrow) {\n      e.stopPropagation();\n    }\n    else if (e.keyCode === KeyCodes.Enter) {\n      const searchText = this.state.searchVal.trim();\n      const repotagList = this.state.repotagList.filter(item => item.name.includes(searchText));\n      const tag = repotagList[this.state.highlightIndex];\n      if (tag) {\n        this.onEditFileTag(tag);\n      }\n    }\n    else if (e.keyCode === KeyCodes.UpArrow) {\n      if (this.state.highlightIndex > -1) {\n        this.setHighlightIndex(this.state.highlightIndex - 1);\n      }\n    }\n    else if (e.keyCode === KeyCodes.DownArrow) {\n      const searchText = this.state.searchVal.trim();\n      const repotagList = this.state.repotagList.filter(item => item.name.includes(searchText));\n      if (this.state.highlightIndex < repotagList.length) {\n        this.setHighlightIndex(this.state.highlightIndex + 1);\n      }\n    }\n  };\n\n  onChangeSearch = (searchVal) => {\n    this.setState({ searchVal });\n    this.setHighlightIndex(-1);\n  };\n\n  render() {\n    const searchText = this.state.searchVal.trim();\n    const repotagList = this.state.repotagList.filter(item => item.name.includes(searchText));\n    const showAddTool = searchText && !this.state.repotagList.find(item => item.name === searchText);\n    return (\n      <SeahubPopover\n        popoverClassName=\"edit-filetag-popover\"\n        target={this.props.target}\n        hideSeahubPopover={this.props.toggleCancel}\n        hideSeahubPopoverWithEsc={this.props.toggleCancel}\n        canHideSeahubPopover={true}\n      >\n        <SearchInput\n          className=\"edit-filetag-popover-input\"\n          placeholder={gettext('Find a tag')}\n          onKeyDown={this.onKeyDown}\n          onChange={this.onChangeSearch}\n          autoFocus={true}\n        />\n        <ul className=\"tag-list-container\">\n          {repotagList.length === 0 &&\n            <div className='tag-not-found mt-2 mb-4 mx-1'>{gettext('Tag not found')}</div>\n          }\n          {repotagList.length > 0 && repotagList.map((repoTag, index) => {\n            return (\n              <TagItem\n                index={index}\n                highlightIndex={this.state.highlightIndex}\n                setHighlightIndex={this.setHighlightIndex}\n                key={repoTag.id}\n                repoTag={repoTag}\n                repoID={this.props.repoID}\n                filePath={this.props.filePath}\n                fileTagList={this.props.fileTagList}\n                onFileTagChanged={this.props.onFileTagChanged}\n              />\n            );\n          })}\n        </ul>\n        {showAddTool &&\n          <CommonAddTool\n            callBack={this.createNewTag}\n            footerName={`${gettext('Create a new tag')} '${searchText}'`}\n          />\n        }\n      </SeahubPopover>\n    );\n  }\n}\n\nEditFileTagPopover.propTypes = {\n  target: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nexport default EditFileTagPopover;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.inputRef.current.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.inputRef.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.inputRef.current.setSelectionRange(0, -1);\n    }\n    // ensure real dom has been rendered, then listen the click event\n    setTimeout(() => {\n      document.addEventListener('click', this.onClick);\n    }, 1);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onClick);\n  }\n\n  onClick = (e) => {\n    if (!this.inputRef.current.contains(e.target)) {\n      this.onRenameConfirm();\n    }\n  };\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === Utils.keyCodes.enter) {\n      this.onRenameConfirm(e);\n    } else if (e.keyCode === Utils.keyCodes.esc) {\n      this.onRenameCancel(e);\n    }\n    e.nativeEvent.stopImmediatePropagation();\n  };\n\n  onRenameConfirm = (e) => {\n    e && e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n      this.props.onRenameCancel();\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  };\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  };\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref={this.inputRef}\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyDown={this.onKeyDown}\n        />\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  };\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag, shareLinkToken } = this.props;\n    let request = shareLinkToken ?\n      seafileAPI.getShareLinkTaggedFiles(shareLinkToken, currentTag.id) :\n      seafileAPI.listTaggedFiles(repoID, currentTag.id);\n    request.then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  };\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true} style={{maxWidth: '678px'}}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Size')}</th>\n                <th width='22%'>{gettext('Last Update')}</th>\n                <th width='8%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                    shareLinkToken={this.props.shareLinkToken}\n                    enableFileDownload={this.props.enableFileDownload}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  };\n\n  deleteFile = (e) => {\n    e.preventDefault();\n    this.props.onDeleteTaggedFile(this.props.taggedFile);\n  };\n\n  render() {\n    const { taggedFile, shareLinkToken, enableFileDownload } = this.props;\n\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = shareLinkToken ?\n      siteRoot + 'd/' + shareLinkToken + '/files/?p=' + Utils.encodePath(path) :\n      siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onFocus={this.onMouseEnter}>\n        {taggedFile.file_deleted ?\n          <Fragment>\n            <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n              <span style={{color:'red'}}>{gettext('deleted')}</span>\n            </td>\n          </Fragment>\n          :\n          <Fragment>\n            <td><a href={href} target='_blank' className=\"d-inline-block w-100 ellipsis\" title={taggedFile.filename} rel=\"noreferrer\">{taggedFile.filename}</a></td>\n            <td>{Utils.bytesToSize(taggedFile.size)}</td>\n            <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n          </Fragment>\n        }\n        <td>\n          {!shareLinkToken &&\n            <a href=\"#\" role=\"button\" aria-label={gettext('Delete')} title={gettext('Delete')} className={`action-icon sf2-icon-x3${this.state.active ? '' : ' invisible'}`} onClick={this.deleteFile}></a>\n          }\n          {(shareLinkToken && enableFileDownload) &&\n            <a className={`action-icon sf2-icon-download${this.state.active ? '' : ' invisible'}`} href={`${href}&dl=1`} title={gettext('Download')} aria-label={gettext('Download')}></a>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  };\n\n  toggle = () => {\n    this.props.toggle();\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  };\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  };\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank' rel=\"noreferrer\">{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  className: PropTypes.string,\n  shareLinkToken: PropTypes.string,\n  enableFileDownload: PropTypes.bool\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow\n    });\n  };\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  };\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  };\n\n  render() {\n    let { repoID, usedRepoTags, draftCounts, className } = this.props;\n\n    // to be compatible with the existing code\n    if (draftCounts === undefined) {\n      draftCounts = 0;\n    }\n\n    return (\n      <div className={`repo-info-bar ${className ? className : ''}`}>\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </button>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        {/*<div className={usedRepoTags.length > 0 ? 'file-info-list mt-1' : 'file-info-list'}>\n          {draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <button type=\"button\" className=\"used-tag-files border-0 bg-transparent\" onClick={this.toggleDrafts}>\n                {draftCounts > 1 ? draftCounts + ' files' : draftCounts + ' file'}\n              </button>\n            </span>\n          }\n        </div>*/}\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n              shareLinkToken={this.props.shareLinkToken}\n              enableFileDownload={this.props.enableFileDownload}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { EXTERNAL_EVENTS, EventBus, MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, mediaUrl, serviceURL, sharedToken, slug } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nimport './style.css';\n\nconst propTypes = {\n  isWiki: PropTypes.bool,\n  path: PropTypes.string,\n  repoID: PropTypes.string,\n  isTOCShow: PropTypes.bool,\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  containerClassName: PropTypes.string,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass SeafileMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.scrollRef = React.createRef();\n  }\n\n  componentDidMount() {\n    const eventBus = EventBus.getInstance();\n    this.unsubscribeLinkClick = eventBus.subscribe(EXTERNAL_EVENTS.ON_LINK_CLICK, this.onLinkClick);\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeLinkClick();\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    let target = event.target;\n    while (!target.dataset || !target.dataset.url) {\n      target = target.parentNode;\n    }\n    if (!target) return;\n    link = target.dataset.url;\n    this.props.onLinkClick(link);\n  };\n\n  changeInlineNode = (item) => {\n    const { repoID } = this.props;\n    let url, imagePath;\n    // isPublicWiki: in the old version, only public wiki need replace image url\n    if (item.type == 'image') { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.url;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.url = serviceURL + '/published/' + slug + path;\n        } else {\n          item.url = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.url = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  };\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  };\n\n  renderMarkdown = () => {\n    const { isTOCShow = true, isWiki, markdownContent } = this.props;\n    const props = {\n      isShowOutline: isTOCShow,\n      mathJaxSource: `${mediaUrl}js/mathjax/tex-svg.js`,\n      value: markdownContent,\n      scrollRef: this.scrollRef,\n      ...(isWiki && {beforeRenderCallback: this.modifyValueBeforeRender})\n    };\n\n    return <MarkdownViewer {...props} />;\n  };\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    const { isWiki, containerClassName = '' } = this.props;\n    const containerClass = `wiki-page-container ${containerClassName}`;\n    // In dir-column-file width is 100%;\n    // In wiki-viewer width isn't 100%\n    const contentClassName = `wiki-page-content ${!isWiki ?  + 'w-100' : ''}`;\n    return (\n      <div ref={this.scrollRef} className={containerClass}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nSeafileMarkdownViewer.propTypes = propTypes;\nSeafileMarkdownViewer.defaultProps = defaultProps;\n\nexport default SeafileMarkdownViewer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  };\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    }\n    this.props.onNodeClick(this.props.node);\n  };\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  };\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  };\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  };\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  };\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  };\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  };\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  };\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  };\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  };\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  };\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  };\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') {\n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  };\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  };\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n  posX: PropTypes.number,\n  posY: PropTypes.number,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  };\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  };\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  };\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  };\n\n  onContainerClick = (event) => {\n    hideMenu();\n  };\n\n  onNodeClick = (node) => {\n    hideMenu();\n    this.props.onNodeClick(node);\n  };\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  };\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  };\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  };\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  };\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  };\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') {\n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  };\n\n  onShowMenu = () => {\n    this.freezeItem();\n  };\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  };\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n        onClick={this.onContainerClick}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('./xmlhttprequest');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('./xmlhttprequest');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('../globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, it’s not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  size: PropTypes.string,\n  bordered: PropTypes.bool,\n  borderless: PropTypes.bool,\n  striped: PropTypes.bool,\n  dark: PropTypes.bool,\n  hover: PropTypes.bool,\n  responsive: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  tag: tagPropType,\n  responsiveTag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.string, PropTypes.object])\n};\nvar defaultProps = {\n  tag: 'table',\n  responsiveTag: 'div'\n};\n\nvar Table = function Table(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      size = props.size,\n      bordered = props.bordered,\n      borderless = props.borderless,\n      striped = props.striped,\n      dark = props.dark,\n      hover = props.hover,\n      responsive = props.responsive,\n      Tag = props.tag,\n      ResponsiveTag = props.responsiveTag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"size\", \"bordered\", \"borderless\", \"striped\", \"dark\", \"hover\", \"responsive\", \"tag\", \"responsiveTag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'table', size ? 'table-' + size : false, bordered ? 'table-bordered' : false, borderless ? 'table-borderless' : false, striped ? 'table-striped' : false, dark ? 'table-dark' : false, hover ? 'table-hover' : false), cssModule);\n  var table = /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n    ref: innerRef,\n    className: classes\n  }));\n\n  if (responsive) {\n    var responsiveClassName = mapToCssModules(responsive === true ? 'table-responsive' : \"table-responsive-\" + responsive, cssModule);\n    return /*#__PURE__*/React.createElement(ResponsiveTag, {\n      className: responsiveClassName\n    }, table);\n  }\n\n  return table;\n};\n\nTable.propTypes = propTypes;\nTable.defaultProps = defaultProps;\nexport default Table;","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emitBuffered();\n  this.emit('connect');\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder === true) {\n    var isIndexValid =\n      typeof data.num === \"number\" &&\n      data.num >= 0 &&\n      data.num < buffers.length;\n    if (isIndexValid) {\n      return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    } else {\n      throw new Error(\"illegal attachments\");\n    }\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    if (this.reconstructor) {\n      throw new Error(\"got plaintext data when reconstructing a packet\");\n    }\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","// extracted by mini-css-extract-plugin\nexport default {};"],"names":["SystemNotification","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","close","setState","isClosed","navigator","cookieEnabled","date","Date","cookies","document","cookie","split","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","i","len","length","state","_createClass","key","value","curNoteMsg","this","_jsxs","id","className","children","_jsx","dangerouslySetInnerHTML","__html","title","gettext","onClick","React","Group","object","name","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","MainSideNav","_this2","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","_assertThisInitialized","seafileAPI","listGroups","then","res","groupList","data","map","item","groupsHeight","listHeight","groupItems","sort","a","b","toLowerCase","catch","error","errMessage","Utils","getErrorMsg","toaster","danger","tabItemClick","e","param","window","uploader","isUploadProgressDialogShow","totalProgress","confirm","preventDefault","getActiveClass","tab","currentTab","closeSideBar","adminHeight","_this3","style","height","concat","Link","to","_this4","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","href","link","desc","icon","_this5","showActivity","isDocs","isPro","isDBSqlite3","canViewOrg","renderSharedGroups","enableOCM","enableOCMViaWebdav","canInvitePeople","renderSharedAdmin","renderCustomNavItems","AboutDialog","_len","arguments","args","Array","_key","apply","renderExternalAboutLinks","additionalAboutDialogLinks","Object","keys","index","lang","toggleDialog","onCloseAboutDialog","aboutDialogCustomHtml","Modal","isOpen","toggle","ModalBody","type","src","mediaUrl","logoPath","logoHeight","width","logoWidth","siteTitle","alt","seafileVersion","getFullYear","target","rel","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","renderExternalAppLinks","additionalAppBottomLinks","sideNavFooterCustomHtml","Fragment","enableTC","ModalPortal","SidePanel","isSidePanelClosed","Logo","onCloseSidePanel","draftCounts","MainPanel","_Component","Component","DraftsView","moment","DraftListItem","onMouseEnter","isItemFreezed","isMenuIconShow","highlight","onMouseLeave","onDropdownToggleClick","toggleOperationMenu","stopPropagation","isItemMenuShow","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","repoID","origin_repo_id","filePath","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","encodeURIComponent","repo_name","localTime","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","Dropdown","DropdownToggle","tag","DropdownMenu","DropdownItem","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","replace","success","publishDraft","getDrafts","isLoadingDraft","Loading","EmptyTip","Acticity","json","repo_id","obj_type","commit_id","path","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","toggleCancel","ModalHeader","Table","fileURL","encodePath","serviceURL","fileLink","ModalFooter","Button","color","bind","app","config","ActivityItem","onListCreatedFilesToggle","isListCreatedFiles","op","details","isDesktop","_this$props","items","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FileActivitiesContent","isLoadingMore","desktopThead","mobileThead","UserSelector","handleOutsideClick","isPopoverOpen","userSelector","contains","togglePopover","selectedUsers","availableUsers","filter","isSelected","setTargetUsers","onToggleClick","onQueryChange","query","toggleSelectItem","targetItem","toggleSelectUser","addEventListener","removeEventListener","_this$state","currentSelectedUsers","filteredAvailableUsers","trim","contact_email","indexOf","_Fragment","join","ref","Input","placeholder","onChange","FilesActivities","mergePublishEvents","events","forEach","curPathList","push","oldPathList","actuallyEvents","splice","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","filterEvents","onlyMine","targetUsers","username","email","allItems","hasMore","getMore","user","handleScroll","event","clientHeight","scrollHeight","scrollTop","errorMsg","isFirstLoading","currentPage","avatarSize","availableUserEmails","Set","listActivities","has","add","_this$state2","filteredEvents","_toConsumableArray","_this$state3","onScroll","MyFilesActivities","Content","_this$props$data","loading","emptyTip","TableBody","_Component2","_super2","getThumbnails","imageCheck","obj_name","enableVideoThumbnail","videoCheck","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","_Component3","_super3","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","open","opClasses","linkUrl","desktopItem","onMouseOver","onMouseOut","onFocus","role","mobileItem","_Component4","Starred","_super4","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","FormGroup","check","Label","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","msg","device_name","last_login_ip","last_accessed","ConfirmUnlinkDeviceDialog","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","share_permission_name","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","group_id","group_name","PermSelect","listCustomPermissions","customPermissions","permission_list","CustomPermission","isLoading","switchOption","currentOption","changePerm","translatePermission","permission","sharePerms","find","translateExplanation","explanation","sharePermsExplanation","description","getPermissions","newPermissions","permissions","slice","currentPerm","maxHeight","overflow","htmlFor","sortByName","sortOrder","sortItems","sortBy","sortIcon","table","togglePermSelectDialog","isPermSelectDialogOpen","options","updateRepoSharePerm","unshare","unshareRepo","unshared","message","onEditPermission","nativeEvent","stopImmediatePropagation","isShowPermEditor","showAdmin","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","startsWith","SharePermissionEditor","isTextMode","isEditing","autoFocus","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","SortOptions","_e$target$value$split","_e$target$value$split2","_slicedToArray","sortOptions","TopToolbar","onShowSidePanel","onSearchedClick","CommonToolbar","searchPlaceholder","toggleItemFreezed","isFreezed","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","handleMouseEnter","handleMouseLeave","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","changePermission","permOption","permissionDetails","updateShareLink","token","JSON","stringify","permOptions","objUrl","currentSelectedPermOption","deletedTip","obj_id","Selector","isDropdownToggleShown","currentSelectedOption","selectOption","view_cnt","ShareAdminLink","ShareAdminShareLinks","page","listShareLinks","moreItems","ShareLink","deleteShareLink","uploadItem","toggleSortOptionsDialog","isSortOptionsDialogOpen","toggleCleanInvalidShareLinksDialog","isCleanInvalidShareLinksDialogOpen","cleanInvalidShareLinks","newItems","listUserShareLinks","SortOptionsDialog","CommonOperationConfirmationDialog","confirmBtnText","ShareAdminUploadLinks","deleteUploadLink","toggleCleanInvalidUploadLinksDialog","isCleanInvalidUploadLinksDialogOpen","cleanInvalidUploadLinks","listUserUploadLinks","UploadLink","Repo","size_original","size","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","monitored","storage_name","undefined","RepoMonitoredIcon","Icon","symbol","UncontrolledTooltip","placement","freezeItem","freezed","sortBySize","LibsMobileThead","onMonitorRepo","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onToggleStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","watchFileChanges","repo","monitorRepo","unwatchFileChanges","unMonitorRepo","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","enableMonitorRepo","tabIndex","ModalPotal","ShareDialog","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","OCMViaWebdav","getAllReceivedShares","url","server","req","get","shareID","received_share_list","delete","openFolder","parent_dir","onPathClick","DirPath","currentPath","downloadFile","downloadUrl","location","shared_by","getEventData","turnPathToLink","pathList","nodePath","pathElem","MainPanelTopbar","Account","isAdminPanel","onTabNavClick","DirentItem","dirent","downloadDirent","getDirentIcon","is_file","_React$Component2","DirContent","direntList","deleteDirent","Dirent","obj","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","_res$data","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","err","openFileInput","fileInput","current","click","onFileInputChange","files","file","_this$props2","getOCMRepoUploadURL","formData","FormData","append","axios","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","DirPathBar","CreateRepoDialog","handleRepoNameChange","isSubmitBtnActive","handlePassword1Change","password1","handlePassword2Change","password2","handleSubmit","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","handleKeyDown","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","disabled","password","passwd","storages","libraryTemplates","templateOptions","storageOptions","isArray","label","repoPasswordMinLength","Form","for","onKeyDown","SeahubSelect","defaultValue","opt","enableEncryptedLibrary","autoComplete","Alert","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","onDropdownToggleKeyDown","visitDeletedviaKey","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","nextProps","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","test","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","generateDialogTitle","action","method","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","handleChange","CreatableSelect","isMulti","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","setPermission","addUserFolderPerm","folderPath","users","isDepartmentRepo","addDepartmentRepoUserFolderPerm","failed","userFolderPermItems","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","FileChooser","mode","onDirentItemClick","thead","UserSelect","onSelectChange","InputGroup","InputGroupAddon","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","LibSubFolderSetGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","_this2$props","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","components","NoOptionsMessage","NoGroupMessage","LibSubFolderPermissionDialog","activeTab","renderContent","Nav","pills","NavItem","NavLink","TabContent","TabPane","tabId","folderName","maxWidth","MylibRepoMenu","onMenuItemClick","operation","onMenuItemKeyDown","dataset","toggleAdvancedMenuShown","isAdvancedMenuShown","toggleAdvancedMenu","onDropDownMouseMove","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","operations","folderPermEnabled","monitorOp","getAdvancedOperations","isPC","enableRepoSnapshotLabel","enableRepoAutoDel","enableSeaTableIntegration","translateOperations","translateResult","advancedOperations","onMouseMove","divider","direction","caret","pop","unshift","RepoAPITokenPermissionEditor","onHideSelect","onSelectHandler","optionTranslation","OpIcon","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","keyCode","addAPIToken","_this2$state","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","detail","duration","renderAPITokenList","minHeight","HTMLescape","onRepoAPITokenToggle","DeleteSeatablesDialog","accountName","closeDialog","onDeleteSeatables","SeatableAccountItem","openDialog","isShowDialog","setting","deleteStableAccountSetting","t","base_api_token","base_name","seatable_server_url","editSeatableSettingAccount","SeatableAccountSettingList","seatableSettings","outline","changeStatus","AddSeatableAccountSetting","onChangeBaseName","onChangeSeatableUrl","seatable_url","successMessage","stage","onChangeSeatableApiToken","seatable_api_token","addSeatableAccountSetting","onSubmit","testSeatableAPIToken","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$seafileAPI$req","_yield$seafileAPI$req2","wrap","_context","prev","next","defaults","headers","Authorization","sent","stop","togglePasswordShow","passwordType","currentDtableInfo","transform","InputGroupText","STATUS","RepoSeaTableIntegrationDialog","getSeatableSettings","_ref","_yield$seafileAPI$get","_yield$seafileAPI$get2","downloadLinkRes","fileInfoRes","getFileDownloadLink","internalFilePath","getFileContent","_x","changeTab","getFile","fileList","content","findIndex","fileContent","File","baseApiToken","_ref2","_callee2","_yield$seafileAPI$get3","_yield$seafileAPI$get4","newFile","updateLink","_context2","getUpdateLink","updateFile","_x2","_x3","_ref3","_callee3","_yield$seafileAPI$get5","_yield$seafileAPI$get6","uploadLink","_newFile","_context3","getFileServerUploadLink","dirPath","uploadImage","_x4","_x5","isPasswordVisible","onSeaTableIntegrationToggle","onDeleteLink","deleteItem","creator_name","RepoShareAdminShareLinks","deleteRepoShareLink","linkItem","listRepoShareLinks","forDialog","RepoShareAdminUploadLinks","deleteRepoUploadLink","listRepoUploadLinks","updateShareToUserItemPermission","share_to","isRepoOwner","getFolderName","share_to_name","permission_name","RepoShareAdminUserShares","deleteShareToUserItem","shareItem","getAllRepoFolderShareInfo","share_info_list","updateShareToGroupItemPermission","RepoShareAdminGroupShares","deleteShareToGroupItem","RepoShareAdminDialog","getInitialActiveTab","enableShareLink","enableUploadLink","onTabKeyDown","LibOldFilesAutoDelDialog","daysNeedTobeSet","isAutoDel","autoDelDays","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareAdminDialog","toggleOldFilesAutoDelDialog","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isSeaTableIntegrationShow","isRepoShareAdminDialogOpen","isOldFilesAutoDelDialogOpen","onRenameConfirm","newName","renameRepo","onRenameRepo","onRenameCancel","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","Rename","renderMobileUI","MediaQuery","DeleteRepoDialog","TransferDialog","LibHistorySettingDialog","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","menuItem","isStaff","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","_this$getRepoComputeP","_this$getRepoComputeP2","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","_this$getSortMetaData","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","socket","seafileCollabServer","io","CollabServer","fn","emit","on","off","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","isCustomPermission","defaultProps","CreateFile","childName","isDuplicated","checkDuplicatedName","parentPath","isMarkdownDraft","isSdocDraft","onAddFile","handleCheck","pos","lastIndexOf","p","substring","fileType","onAfterModelOpened","newInput","focus","setSelectionRange","toggleMarkSdocDraft","onOpened","innerRef","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","getBoundingClientRect","position","display","left","top","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","onCreateSeaDocToggle","onAddFolder","_Utils$getUserPermiss","getUserPermission","customPermission","canUpload","canCreate","upload","create","showShareBtn","isSupportUploadFolder","enableSeadoc","CreateFolder","addFolderCancel","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","CreateTagDialog","inputNewName","tagName","selectTagcolor","tagColor","createTag","createRepoTag","repoTagID","repo_tag","repo_tag_id","onRepoTagCreated","TAG_COLORS","newTag","canSave","onClose","defaultChecked","backgroundColor","require","getRandomValues","TagItem","isTagHighlighted","getRepoTagIdList","fileTagList","fileTag","onEditFileTag","repoTag","repoTagIdList","addFileTag","onFileTagChanged","deleteFileTag","isTagSelected","TagList","getRepoTagList","listRepoTags","repotagList","repo_tags","RepoTag","createNewTag","_React$Component3","EditFileTagDialog","isCreateRepoTagShow","isListRepoTagShow","_this4$props","_this$validateInput","validateInput","isValid","onRename","changeState","endIndex","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","zipDownload","zipToken","fileServerRoot","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onMarkAsDraft","getDirentPath","sdocMarkAsDraft","updateDirent","onUnmarkAsDraft","sdocUnmarkAsDraft","onStartRevise","sdocStartRevise","file_path","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","onHistory","onAccessLog","showDirentDetail","onOpenViaClient","lockfile","is_locked","unSelectDirent","unlockfile","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","multiFileTagList","canDelete","canDownload","canCopy","canModify","download","modify","ButtonGroup","ItemDropdownMenu","toggleClass","getMenuList","MoveDirentDialog","CopyDirentDialog","ZipDownloadDialog","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","Tooltip","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","isDirentSelected","DirOperationToolBar","tabName","tagTitle","pathPrefix","showName","InternalLinkOperation","zIndex","randomUUID","crypto","rnds8","Uint8Array","rng","Error","byteToHex","toString","unsafeStringify","arr","offset","buf","native","rnds","random","TagColor","selectTagColor","newColor","updateRepoTag","colorList","Popover","PopoverBody","TagName","toggleMode","input","updateTagName","onInputKeyDown","onInputBlur","onBlur","TagListItem","deleteTag","onDeleteTag","VirtualTagColor","updateVirtualTag","VirtualTagName","setTimeout","VirtualTagListItem","deleteVirtualTag","TagListFooter","toggleTooltip","showTooltip","onClickImport","importOptionsInput","importTagsInputChange","fileReader","FileReader","onload","onImportTags","onerror","onImportTagsError","readAsText","warning","getValidTags","tags","validTags","tagNameMap","parse","result","createRepoTags","updateTags","getDownloadUrl","delay","show","hide","accept","ListTagPopover","loadTags","newRepotagList","targetTagID","deleteRepoTag","createVirtualTag","virtual_repo_tag","Math","floor","uuidv4","is_virtual","virtualTag","onListTagCancel","DirTool","onMouseDown","toggleRepoTag","hidePopover","dom","parentNode","tagsIconID","isMarkdownFile","toolbarDom","trashUrl","SeahubPopover","popoverClassName","hideSeahubPopover","hideSeahubPopoverWithEsc","canHideSeahubPopover","boundariesElement","body","CurDirPath","updateUsedRepoTags","onDeleteRepoTag","column","Col","md","SimpleText","blurInput","inputRef","blur","onCommit","updated","onCut","onPaste","KeyCodes","Esc","_e$currentTarget","currentTarget","selectionStart","selectionEnd","ChineseInputMethod","LeftArrow","RightArrow","row","nextValue","editable","result_type","FORMULA_RESULT_TYPE","DATE","getDateDisplayString","STRING","SearchInput","onCompositionStart","isInputtingChinese","timer","clearTimeout","wait","searchValue","onCompositionEnd","setFocus","isSelectAllText","activeElement","txtLength","classnames","SingleSelectEditor","getCascadeColumnValue","columns","cascade_column_key","getSelectColumnOptions","cascade_settings","cascadeColumnValue","cascadeSetting","onUpdateState","onChangeSearch","searchVal","val","filteredOptions","onSelectOption","optionID","_defineProperty","highlightIndex","maxItemNum","itemHeight","editorKey","UncontrolledPopover","trigger","hideArrow","textColor","max","SingleSelect","updateState","isShowSingleSelect","currentOptionID","optionStyle","DELETED_OPTION_BACKGROUND_COLOR","optionName","DELETED_OPTION_TIPS","NumberEditor","DEFAULT_NUMBER_FORMAT","currency_symbol","initValue","isMac","replaceNumberNotAllowInput","_event$currentTarget","Enter","formatStringToNumber","setInputRef","getNumberDisplayString","DateEditor","CtimeFormatter","_CONFIG","EXTRA_ATTRIBUTES_COLUMN_TYPE","TEXT","FORMULA","FormulaFormatter","SINGLE_SELECT","NUMBER","CTIME","MTIME","Column","Editor","CONFIG","ColumnName","ExtraAttributesDialog","startAnimation","callback","animationEnd","modalRef","firstChild","_this$getDialogStyle","getDialogStyle","marginLeft","marginRight","marginTop","transition","getFormatUpdateData","update","updateData","_loop","getData","getFileExtendedProperties","metadata","editable_columns","Boolean","_id","getValidColumns","isEmptyFile","createData","newFileExtendedProperties","newRow","_objectSpread","_this$props3","updateFileExtendedProperties","onHotKey","isHotkey","onToggle","innerWidth","DIALOG_MAX_HEIGHT","getInitStyle","renderColumns","direntDetail","direntType","direntDetailId","repeat","zIndexes","contentClassName","modalClassName","wrapClassName","fade","ConfirmApplyFolderPropertiesDialog","submitting","applyFolderExtendedProperties","DetailListView","getDirentPosition","repoInfo","isEditFileTagShow","toggleExtraPropertiesDialog","isShowExtraProperties","toggleApplyPropertiesDialog","isShowApplyProperties","renderTags","canSetExProps","FileTagList","tagListTitleID","EditFileTagPopover","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","getFileInfo","getDirInfo","renderHeader","direntName","onItemDetailsClose","renderDetailBody","isImg","isVideo","DirentNodeView","onCreateNewFile","isDirentListLoading","FileTag","_React$PureComponent","fileTagID","DirentListItem","canDrag","isDragTipShow","unfreezeItem","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","canPreview","showImagePopup","exportDocx","exportToDocxUrl","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","onFreezeDocument","onItemConvert","onConvertWithONLYOFFICE","dstType","lockName","onlyofficeConvert","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","draggedItem","_dragStartItemData","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","_assertThisInitialize","isHasPermissionToShare","isHandleContextMenuEvent","getDirentItemMenuList","_customPermission$per","preview","activeDirent","dirHref","fileHref","is_sdoc_revision","revision_id","trClass","lockedInfo","is_freezed","lock_owner_name","lockedImageUrl","lockedMessage","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onContextMenu","hasSuffix","DirentsDraggedPreview","handleDragEnd","element","opacity","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","pointerEvents","documentElement","DirentListView","hideMenu","prepareImageItem","fullDirentList","imageItems","isImagePopupOpen","imageIndex","moveToPrevImage","imageItemsLength","prevState","moveToNextImage","closeImagePopup","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","menuList","currentObject","x","touches","pageX","y","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","NEW_FOLDER","TextTranslation","NEW_FILE","NEW_MARKDOWN_FILE","NEW_EXCEL_FILE","NEW_POWERPOINT_FILE","NEW_WORD_FILE","NEW_SEADOC_FILE","direntsContainerMenuList","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","onShowMenu","onHideMenu","isContextmenu","onTableDragEnter","canDrop","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","_Utils$getUserPermiss2","onAllItemSelected","isAllItemSelected","ContextMenu","dragStartPosition","ImageDialog","DirListView","DirentNoneView","isRepoInfoBarShow","RepoInfoBar","usedRepoTags","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","toolTipID","MD5","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","node","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","newUrl","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","useThumbnail","isGIF","substr","thumbnailSizeForOriginal","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","TreeView","onNodeExpanded","onNodeCollapse","onUnFreezedItem","onAddFileNode","Copy","Move","DirColumnFile","goDraftPage","hash","isFileLoadedErr","SeafileMarkdownViewer","isTOCShow","isFileLoading","markdownContent","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","c","onResizeMove","mainFlex","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","direntDetailPanelTab","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","toFixed","uploadState","remainingTime","isSaved","progress","round","newFileName","isUploading","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","isFile","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","resumableUpload","isUploadLinkLoaded","_this$props4","getFileUploadedBytes","uploadedBytes","blockSize","parseInt","resumableUploadFileBlockSize","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","_this$props5","bootstrap","firedRetry","resumableObj","_this$props6","_this$props7","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","DeleteFolderDialog","deleteFolder","sharedToUserCount","sharedToGroupCount","getRepoFolderShareInfo","opTarget","alert_message","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updateColumnMarkdownData","dirMetaData","usedRepoTag","last_modifier_name","is_draft","has_draft","draftID","loadDirData","collabServer","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","_res$data2","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","_res$data3","errMsg","sortDirents","dir_id","foldersSharedOut","identifyFoldersSharedOut","_this2$state2","has_been_shared_out","itemsShowLength","curItemPath","updateMoveCopyTreeNode","clone","getNodeByPath","nodeChildrenNames","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","asyncOperationProgress","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperatedFilesLength","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","restoreDeletedDirents","commitID","paths","closeAll","restoreDirents","_res$data4","addDirent","onDeleteItems","deleteMutipleDirents","deleteDirents","successTipWithUndo","createDir","createFile","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","toggleDeleteFolderDialog","isDeleteFolderDialogOpen","folderToDelete","deleteDir","deleteItemAjaxCallback","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","onConvertItem","notifyInProgress","convertFile","new_path","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","_res$data5","results","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","nodeName","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","deletedTagID","buildTree","oldonpopstate","_componentDidMount","repoRes","permissionID","permissionRes","decodeURIComponent","RepoInfo","getCustomPermission","custom_permission","lib_need_decrypt","t0","unwatchRepo","_getAsyncCopyMoveProgress","_message","queryAsyncOperationProgress","abrupt","successful","total","done","deleteFile","is_sdoc_draft","isVirtual","direntItemsList","onMenuClick","CopyMoveDirentProgressDialog","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","GroupMembers","groupMembers","changeMember","deleteMember","isOwner","Member","onChangeUserRole","roleOption","setGroupAdmin","deleteGroupMember","translateRole","roleOptions","deleteAuthority","curRole","scope","RoleSelector","ManageMembersDialog","listGroupMembers","perPage","members","addGroupMember","emails","addGroupMembers","newMembers","targetMember","searchMembers","keyword","membersFound","clearSearch","onSearchInputFocus","searchActive","onSearchInputBlur","toggleManageMembersDialog","ListAndAddGroupMembers","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","owner_nickname","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","canPublishRepo","GeneralToolbar","WrapperedComponent","Wrapper","GeneralToolBar","FilesActivitiesWrapper","MainContentWrapper","MyFileActivitiesWrapper","MyFileActivities","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","OCMViaWebdavWrapper","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","App","_event$state","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","Router","MyLibDeleted","OCMRepoDir","Groups","ReactDom","getElementById","SeahubPopoverRef","isSelectOpen","getEventClassName","Escape","onPopoverInsideClick","innerClassName","modifiers","additionalProps","MENU_SHOW","MENU_HIDE","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","store","registerHandlers","handleHide","handleKeyNavigation","unregisterHandlers","handleShow","_e$detail$position","_e$detail","isVisible","callIfExists","menu","hideOnLeave","handleContextMenu","getMenuPosition","menuStyles","_window","innerHeight","rect","getRTLMenuPosition","_window2","listenId","listener","register","wrapper","requestAnimationFrame","rtl","unregister","globalEventListener","GlobalEventListener","handleShowEvent","callbacks","hasOwnProp","handleHideEvent","showCallback","hideCallback","uniqueId","canUseDOM","func","prop","prototype","hasOwnProperty","createElement","progressStyle","lineHeight","textAlign","CreateForder","imageTitle","Lightbox","mainSrc","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","copyToClipboard","interval","queryZipProgress","clearInterval","failed_reason","zipProgress","zipped","cancelZipTask","getShareLinkDirentsZipTask","getShareLinkZipTask","setInterval","listenerId","ButtonDropdown","callBack","footerName","addIconClassName","clearValue","isFunction","functionToCheck","renderClear","isClearable","clearClassName","_this$props2$componen","ClearIndicator","setHighlightIndex","generateRandomColor","searchText","UpArrow","DownArrow","showAddTool","CommonAddTool","keyCodes","enter","esc","ListTaggedFilesDialog","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","getTaggedFiles","file_deleted","currentTag","shareLinkToken","getShareLinkTaggedFiles","listTaggedFiles","taggedFileList","tagged_files","enableFileDownload","active","Draft","created","createdStr","ownerNickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","DraftItem","draftItem","onListTaggedFiles","isListTaggedFileShow","toggleDrafts","showRepoDrafts","changeInlineNode","imagePath","RegExp","index2","originalPath","pathNormalize","isInternalFileLink","match","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","_this$props$isTOCShow","isWiki","isShowOutline","mathJaxSource","scrollRef","beforeRenderCallback","MarkdownViewer","eventBus","EventBus","getInstance","unsubscribeLinkClick","subscribe","EXTERNAL_EVENTS","ON_LINK_CLICK","_this$props2$containe","containerClassName","containerClass","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","calculateMenuList","RENAME","OPEN_VIA_CLIENT","_customPermission$per2","renderChildren","paddingLeft","hasChildren","_Utils$getUserPermiss3","_this$getNodeTypeAndI","hlClass","dragStartNodeData","isTreeViewDropTipShow","_dragStartNodeData","dropNodeData","noop","module","exports","count","err_cb","bail","proxy","arraybuffer","start","end","bytes","byteLength","ArrayBuffer","abv","ii","buffer","Backoff","ms","factor","jitter","attempts","pow","rand","deviation","reset","setMin","setMax","setJitter","chars","encode","base64","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","Blob","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","ary","chunk","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","Emitter","mixin","_callbacks","once","removeListener","removeAllListeners","cb","listeners","hasListeners","constructor","self","Function","parser","transports","debug","parseuri","parseqs","Socket","uri","hostname","host","secure","protocol","port","agent","upgrade","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transportOptions","readyState","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","product","extraHeaders","localAddress","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","Transport","createTransport","o","EIO","transport","sid","requestTimeout","protocols","shift","setTransport","onDrain","packet","onPacket","probe","onTransportOpen","upgradeLosesBinary","supportsBinary","send","upgrading","pause","cleanup","flush","freezeTransport","onTransportClose","onclose","onupgrade","onOpen","l","onHandshake","setPing","code","filterUpgrades","onHeartbeat","timeout","ping","sendPacket","writable","write","compress","waitForUpgrade","cleanupAndClose","reason","filteredUpgrades","j","doOpen","doClose","packets","onData","decodePacket","XMLHttpRequest","XHR","JSONP","websocket","polling","xd","xs","isSSL","xdomain","xscheme","Polling","inherit","globalThis","JSONPPolling","rNewline","rEscapedNewline","empty","___eio","script","removeChild","form","iframe","doPoll","async","insertAt","getElementsByTagName","insertBefore","head","appendChild","userAgent","doWrite","area","iframeId","complete","initIframe","html","attachEvent","onreadystatechange","Request","isBinary","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","contentType","getResponseHeader","responseType","requestsCount","requests","onSuccess","fromError","abort","XDomainRequest","unloadHandler","yeast","hasXHR2","poll","decodePayload","callbackfn","encodePayload","schema","b64","Number","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","binary","addEventListeners","onopen","onmessage","ev","encodePacket","Buffer","hasCORS","load","r","storage","process","DEBUG","log","console","formatArgs","useColors","namespace","humanize","diff","lastC","save","namespaces","removeItem","WebkitAppearance","firebug","exception","$1","chrome","local","localStorage","localstorage","colors","formatters","v","enable","createDebug","prevTime","enabled","curr","coerce","formatter","charCodeAt","abs","selectColor","destroy","init","instances","stack","disable","skips","instance","s","m","h","d","plural","n","ceil","str","String","exec","isNaN","long","fmtShort","base64encoder","hasBinary","sliceBuffer","after","utf8","isAndroid","isPhantomJS","dontSendBlobs","pong","packetslist","each","eachWithIndex","el","utf8encode","encodeBase64Packet","contentArray","resultBuffer","encodeArrayBuffer","fr","readAsArrayBuffer","encodeBlobAsArrayBuffer","blob","encodeBlob","encodeBase64Object","encoded","strict","b64data","readAsDataURL","fromCharCode","typed","basic","btoa","utf8decode","charAt","decodeBase64Packet","tryDecode","rest","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","decodePayloadAsBinary","chr","encodedPackets","totalLength","reduce","acc","resultArray","bufferIndex","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","buffers","tailArray","msgLength","byteArray","byteCount","byteIndex","stringFromCharCode","ucs2decode","string","extra","output","counter","checkScalarValue","codePoint","toUpperCase","createByte","encodeCodePoint","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","ucs2encode","withNativeBlob","withNativeFile","isBuffer","toJSON","qs","qry","pairs","pair","re","parts","source","authority","ipv6uri","pathNames","regx","queryKey","$0","$2","propTypes","PropTypes","cssModule","bordered","borderless","striped","dark","hover","responsive","tagPropType","responsiveTag","Tag","ResponsiveTag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","_extends","responsiveClassName","Manager","lookup","cache","managers","parsed","sameNamespace","nsps","forceNew","multiplex","connect","eio","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","connecting","lastPing","encoding","packetBuffer","_parser","encoder","Encoder","decoder","Decoder","autoConnect","emitAll","nsp","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","reconnecting","reconnect","skipReconnect","openSub","errorSub","onping","onpong","ondata","ondecoded","onConnecting","processPacketQueue","pack","subsLength","disconnect","onreconnect","attempt","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","BINARY_EVENT","EVENT","CONNECT","onpacket","rootNamespaceError","ERROR","onconnect","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","ack","emitBuffered","loc","isBuf","_deconstructPacket","_placeholder","newData","_reconstructPacket","deconstructPacket","packetData","attachments","reconstructPacket","removeBlobs","pendingBlobs","bloblessData","_removeBlobs","curKey","containingObject","types","ERROR_PACKET","encodeAsString","payload","tryStringify","reconstructor","BinaryReconstructor","reconPack","writeEncoding","deconstruction","encodeAsBinary","tryParse","decodeString","takeBinaryData","finishedReconstruction","binData","withNativeBuffer","withNativeArrayBuffer","isView","alphabet","seed","decoded"],"sourceRoot":""}