{"version":3,"file":"static/js/sdocFileHistory.8baae03e.js","mappings":"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","sources":["components/rename.js","components/common/go-back/index.js","pages/sdoc/sdoc-file-history/history-version.js","pages/sdoc/sdoc-file-history/side-panel.js","pages/sdoc/sdoc-file-history/index.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n    this.inputRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.inputRef.current.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.inputRef.current.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.inputRef.current.setSelectionRange(0, -1);\n    }\n    // ensure real dom has been rendered, then listen the click event\n    setTimeout(() => {\n      document.addEventListener('click', this.onClick);\n    }, 1);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onClick);\n  }\n\n  onClick = (e) => {\n    if (!this.inputRef.current.contains(e.target)) {\n      this.onRenameConfirm();\n    }\n  };\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === Utils.keyCodes.enter) {\n      this.onRenameConfirm(e);\n    } else if (e.keyCode === Utils.keyCodes.esc) {\n      this.onRenameCancel(e);\n    }\n    e.nativeEvent.stopImmediatePropagation();\n  };\n\n  onRenameConfirm = (e) => {\n    e && e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n      this.props.onRenameCancel();\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  };\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  };\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  };\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref={this.inputRef}\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyDown={this.onKeyDown}\n        />\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Component } from 'react';\n\nimport './index.css';\n\nclass GoBack extends Component {\n\n  onBackClick = (event) => {\n    event.preventDefault();\n    window.history.back();\n  };\n\n  render() {\n    return (\n      <div className=\"go-back\" onClick={this.onBackClick}>\n        <span className=\"fas fa-chevron-left\"></span>\n      </div>\n    );\n  }\n}\n\nexport default GoBack;\n","import moment from 'moment';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem} from 'reactstrap';\nimport classnames from 'classnames';\nimport { gettext, filePath } from '../../../utils/constants';\nimport URLDecorator from '../../../utils/url-decorator';\nimport Rename from '../../../components/rename';\n\nimport '../../../css/history-record-item.css';\n\nmoment.locale(window.app.config.lang);\n\nclass HistoryVersion extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isShowOperationIcon: false,\n      isMenuShow: false,\n      isRenameShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    const { currentVersion, historyVersion } = this.props;\n    if (currentVersion.commit_id === historyVersion.commit_id) return;\n    this.setState({ isShowOperationIcon: true });\n  };\n\n  onMouseLeave = () => {\n    const { currentVersion, historyVersion } = this.props;\n    if (currentVersion.commit_id === historyVersion.commit_id) return;\n    this.setState({ isShowOperationIcon: false });\n  };\n\n  onToggleClick = (e) => {\n    this.setState({ isMenuShow: !this.state.isMenuShow });\n  };\n\n  onClick = () => {\n    this.setState({ isShowOperationIcon: false });\n    const { currentVersion, historyVersion, path } = this.props;\n    if (currentVersion.commit_id === historyVersion.commit_id) return;\n    this.props.onSelectHistoryVersion(path);\n  };\n\n  onRestore = () => {\n    const { historyVersion } = this.props;\n    this.props.onRestore(historyVersion);\n  };\n\n  onItemDownload = () => {\n    // nothing todo\n  };\n\n  onItemCopy = () => {\n    const { historyVersion } = this.props;\n    historyVersion.ctime_format = moment(historyVersion.ctime).format('YYYY-MM-DD HH:mm');\n    this.props.onCopy(historyVersion);\n  };\n\n  toggleRename = () => {\n    this.setState({isRenameShow: !this.state.isRenameShow});\n  };\n\n  onRenameConfirm = (newName) => {\n    const { obj_id } = this.props.historyVersion;\n    this.props.renameHistoryVersion(obj_id, newName);\n    this.toggleRename();\n  };\n\n  onRenameCancel = () => {\n    this.toggleRename();\n  };\n\n  showDailyHistory = (event) => {\n    event.stopPropagation();\n    event.nativeEvent.stopImmediatePropagation();\n    const { path } = this.props;\n    this.props.showDailyHistory(path, () => {\n      this.props.onSelectHistoryVersion(path);\n    });\n  };\n\n  render() {\n    const { currentVersion, historyVersion, path, showDaily } = this.props;\n    if (!currentVersion || !historyVersion) return null;\n    const { ctime, commit_id, creator_name, obj_id, name, count } = historyVersion;\n    const isHighlightItem = commit_id === currentVersion.commit_id;\n    const url = URLDecorator.getUrl({ type: 'download_historic_file', filePath: filePath, objID: obj_id });\n    return (\n      <li\n        className={`history-list-item ${isHighlightItem ? 'item-active' : ''} ${path[2] > 0 ? 'daily-history-detail' : ''}`}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onClick}\n      >\n        {path[2] === 0 && (\n          <div className=\"daily-history-detail-toggle-container\">\n            {count > 1 && (\n              <div className={classnames('daily-history-detail-toggle', { 'daily-history-detail-show': showDaily })} onClick={this.showDailyHistory}>\n                <i className=\"dropdown-toggle\"></i>\n              </div>\n            )}\n          </div>\n        )}\n        {path[2] > 0 && (<div className=\"daily-history-detail-no-more\"></div>)}\n        <div className=\"history-info\">\n          {this.state.isRenameShow ?\n            <Rename name={name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/>\n            :<div className=\"name\">{name}</div>\n          }\n          <div className=\"time\">{moment(ctime).format('YYYY-MM-DD HH:mm')}</div>\n          <div className=\"owner\">\n            <span className=\"squire-icon\"></span>\n            <span>{creator_name}</span>\n          </div>\n        </div>\n        <div className=\"history-operation\">\n          <Dropdown isOpen={this.state.isMenuShow} toggle={this.onToggleClick}>\n            <DropdownToggle\n              tag='a'\n              className={`fas fa-ellipsis-v ${(this.state.isShowOperationIcon || isHighlightItem) ? '' : 'invisible'}`}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isMenuShow}\n              alt={gettext('More Operations')}\n            />\n            <DropdownMenu>\n              {/* {(this.props.index !== 0) && <DropdownItem onClick={this.onItemRestore}>{gettext('Restore')}</DropdownItem>} */}\n              <DropdownItem tag='a' href={url} onClick={this.onItemDownLoad}>{gettext('Download')}</DropdownItem>\n              {(path[0] !== 0 && path[1] !== 0 && path[2] !== 0) && <DropdownItem onClick={this.onItemCopy}>{gettext('Copy')}</DropdownItem>}\n              <DropdownItem onClick={this.toggleRename}>{gettext('Rename')}</DropdownItem>\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n      </li>\n    );\n  }\n}\n\nHistoryVersion.propTypes = {\n  showDaily: PropTypes.bool,\n  path: PropTypes.array,\n  currentVersion: PropTypes.object.isRequired,\n  historyVersion: PropTypes.object,\n  onSelectHistoryVersion: PropTypes.func.isRequired,\n  onRestore: PropTypes.func.isRequired,\n  onCopy: PropTypes.func.isRequired,\n  renameHistoryVersion: PropTypes.func.isRequired,\n  showDailyHistory: PropTypes.func.isRequired,\n};\n\nexport default HistoryVersion;\n","import React, { Component, Fragment } from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport Loading from '../../../components/loading';\nimport { gettext, historyRepoID, PER_PAGE } from '../../../utils/constants';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { Utils } from '../../../utils/utils';\nimport editUtilities from '../../../utils/editor-utilities';\nimport toaster from '../../../components/toast';\nimport HistoryVersion from './history-version';\nimport Switch from '../../../components/common/switch';\n\nmoment.locale(window.app.config.lang);\n\nconst { docUuid } = window.fileHistory.pageOptions;\n\nclass SidePanel extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      historyGroups: [],\n      errorMessage: '',\n      hasMore: false,\n      isReloadingData: false,\n    };\n    this.currentPage = 1;\n  }\n\n  // listSdocDailyHistoryDetail\n\n  componentDidMount() {\n    this.firstLoadSdocHistory();\n  }\n\n  firstLoadSdocHistory() {\n    this.currentPage = 1;\n    seafileAPI.listSdocHistory(docUuid, this.currentPage, PER_PAGE).then(res => {\n      const result = res.data;\n      const resultCount = result.histories.length;\n      const historyGroups = this.formatHistories(result.histories);\n      this.setState({\n        historyGroups: this.formatHistories(result.histories),\n        hasMore: resultCount >= PER_PAGE,\n        isLoading: false,\n      }, () => {\n        if (historyGroups.length > 0) {\n          this.onSelectHistoryVersion([0, 0, 0]);\n        }\n      });\n    }).catch((error) => {\n      this.setState({isLoading: false});\n      throw Error('there has an error in server');\n    });\n  }\n\n  formatHistories(histories) {\n    const oldHistoryGroups = this.state.historyGroups;\n    if (!Array.isArray(histories) || histories.length === 0) return oldHistoryGroups;\n    const newHistoryGroups = oldHistoryGroups.slice(0);\n    histories.forEach(history => {\n      const { date } = history;\n      const momentDate = moment(date);\n      const month = momentDate.format('YYYY-MM');\n      const monthItem = newHistoryGroups.find(item => item.month === month);\n      if (monthItem) {\n        monthItem.children.push({ day: momentDate.format('YYYY-MM-DD'), showDaily: false, children: [ history ] });\n      } else {\n        newHistoryGroups.push({\n          month,\n          children: [\n            { day: momentDate.format('YYYY-MM-DD'), showDaily: false, children: [ history ] }\n          ]\n        });\n      }\n    });\n    return newHistoryGroups;\n  }\n\n  updateResultState(result) {\n    const resultCount = result.histories.length;\n    this.setState({\n      historyGroups: this.formatHistories(result.histories),\n      hasMore: resultCount >= PER_PAGE,\n      isLoading: false,\n    });\n  }\n\n  loadMore = () => {\n    if (!this.state.isReloadingData) {\n      this.currentPage = this.currentPage + 1;\n      this.setState({ isReloadingData: true }, () => {\n        seafileAPI.listSdocHistory(docUuid, this.currentPage, PER_PAGE).then(res => {\n          this.updateResultState(res.data);\n          this.setState({isReloadingData: false});\n        });\n      });\n    }\n  };\n\n  renameHistoryVersion = (objID, newName) => {\n    seafileAPI.renameSdocHistory(docUuid, objID, newName).then((res) => {\n      this.setState({\n        historyGroups: this.state.historyGroups.map(item => {\n          if (item.obj_id == objID) {\n            item.name = newName;\n          }\n          return item;\n        })\n      });\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      this.setState({ isLoading: false, errorMessage: errorMessage });\n    });\n  };\n\n  onScrollHandler = (event) => {\n    const clientHeight = event.target.clientHeight;\n    const scrollHeight = event.target.scrollHeight;\n    const scrollTop = event.target.scrollTop;\n    const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n    if (isBottom && this.state.hasMore) {\n      this.loadMore();\n    }\n  };\n\n  restoreVersion = (currentItem) => {\n    const { commit_id, path } = currentItem;\n    editUtilities.revertFile(path, commit_id).then(res => {\n      if (res.data.success) {\n        this.setState({isLoading: true}, () => {\n          this.firstLoadSdocHistory();\n        });\n      }\n      let message = gettext('Successfully restored.');\n      toaster.success(message);\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      toaster.danger(gettext(errorMessage));\n    });\n  };\n\n  getLastVersion = (path, isShowChanges) => {\n    const { historyGroups } = this.state;\n    const [monthIndex, dayIndex, dailyIndex] = path;\n    const monthHistoryGroup = historyGroups[monthIndex];\n    const dayHistoryGroup = monthHistoryGroup.children[dayIndex];\n    let lastVersion = '';\n    if (isShowChanges) {\n      if (dayHistoryGroup.showDaily) {\n        lastVersion = dayHistoryGroup.children[dailyIndex + 1];\n      }\n      if (!lastVersion) {\n        lastVersion = monthHistoryGroup.children[dayIndex + 1]?.children[0];\n      }\n      if (!lastVersion) {\n        lastVersion = historyGroups[monthIndex + 1]?.children[0]?.children[0];\n      }\n      if (monthIndex === 0 && !lastVersion) {\n        lastVersion = 'init';\n      }\n    }\n    return lastVersion;\n  };\n\n  onSelectHistoryVersion = (path) => {\n    const { historyGroups } = this.state;\n    const { isShowChanges } = this.props;\n    const [monthIndex, dayIndex, dailyIndex] = path;\n    const monthHistoryGroup = historyGroups[monthIndex];\n    const dayHistoryGroup = monthHistoryGroup.children[dayIndex];\n    const currentVersion = dayHistoryGroup.children[dailyIndex];\n    const lastVersion = this.getLastVersion(path, isShowChanges);\n    this.props.onSelectHistoryVersion(currentVersion, lastVersion);\n  };\n\n  copyHistoryFile = (historyVersion) => {\n    const { path, obj_id, ctime_format } = historyVersion;\n    seafileAPI.sdocCopyHistoryFile(historyRepoID, path, obj_id, ctime_format).then(res => {\n      let message = gettext('Successfully copied %(name)s.');\n      let filename = res.data.file_name;\n      message = message.replace('%(name)s', filename);\n      toaster.success(message);\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      toaster.danger(gettext(errorMessage));\n    });\n  };\n\n  showDailyHistory = (path, callback) => {\n    const { historyGroups } = this.state;\n    const newHistoryGroups = historyGroups.slice(0);\n    const dayHistoryGroup = newHistoryGroups[path[0]].children[path[1]];\n    if (dayHistoryGroup.showDaily) {\n      dayHistoryGroup.showDaily = false;\n      this.setState({ historyGroups: newHistoryGroups }, () => {\n        callback && callback();\n      });\n      return;\n    }\n    if (dayHistoryGroup.children.length > 1) {\n      dayHistoryGroup.showDaily = true;\n      this.setState({ historyGroups: newHistoryGroups }, () => {\n        callback && callback();\n      });\n      return;\n    }\n\n    seafileAPI.listSdocDailyHistoryDetail(docUuid, dayHistoryGroup.children[0].ctime).then(res => {\n      const histories = res.data.histories;\n      dayHistoryGroup.children.push(...histories);\n      dayHistoryGroup.showDaily = true;\n      this.setState({ historyGroups: newHistoryGroups }, () => {\n        callback && callback();\n      });\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      toaster.danger(gettext(errorMessage));\n    });\n  };\n\n  renderHistoryVersions = () => {\n    const { isLoading, historyGroups, errorMessage } = this.state;\n    if (historyGroups.length === 0) {\n      if (isLoading) {\n        return (\n          <div className=\"h-100 w-100 d-flex align-items-center justify-content-center\">\n            <Loading />\n          </div>\n        );\n      }\n      if (errorMessage) {\n        return (\n          <div className=\"h-100 w-100 d-flex align-items-center justify-content-center error-message\">\n            {gettext(errorMessage)}\n          </div>\n        );\n      }\n      return (\n        <div className=\"h-100 w-100 d-flex align-items-center justify-content-center empty-tip-color\">\n          {gettext('No version history')}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {historyGroups.map((monthHistoryGroup, historyGroupIndex) => {\n          return (\n            <Fragment key={monthHistoryGroup.month}>\n              <div className=\"history-list-item history-month-title\" key={monthHistoryGroup.month}>{monthHistoryGroup.month}</div>\n              {monthHistoryGroup.children.map((dayHistoryGroup, dayHistoryGroupIndex) => {\n                const { children, showDaily } = dayHistoryGroup;\n                const displayHistories = showDaily ? children : children.slice(0, 1);\n                return displayHistories.map((history, index) => {\n                  return (\n                    <HistoryVersion\n                      key={history.commit_id}\n                      path={[historyGroupIndex, dayHistoryGroupIndex, index]}\n                      showDaily={index === 0 && showDaily}\n                      currentVersion={this.props.currentVersion}\n                      historyVersion={history}\n                      onSelectHistoryVersion={this.onSelectHistoryVersion}\n                      onRestore={this.restoreVersion}\n                      onCopy={this.copyHistoryFile}\n                      renameHistoryVersion={this.renameHistoryVersion}\n                      showDailyHistory={this.showDailyHistory}\n                    />\n                  );\n                });\n              }).flat()}\n            </Fragment>\n          );\n        })}\n        {isLoading && (\n          <div className=\"loading-more d-flex align-items-center justify-content-center w-100\">\n            <Loading />\n          </div>\n        )}\n      </>\n    );\n  };\n\n  onShowChanges = () => {\n    const { isShowChanges, currentVersion } = this.props;\n    const { historyGroups } = this.state;\n    const nextShowChanges = !isShowChanges;\n    let lastVersion;\n    if (nextShowChanges) {\n      const { date } = currentVersion;\n      const momentDate = moment(date);\n      const month = momentDate.format('YYYY-MM');\n      const day = momentDate.format('YYYY-MM-DD');\n      const monthIndex = historyGroups.findIndex(item => item.month === month);\n      const dayIndex = historyGroups[monthIndex].children.findIndex(item => item.day === day);\n      const dailyIndex = historyGroups[monthIndex].children[dayIndex].children.findIndex(item => item.date === date);\n      const path = [monthIndex, dayIndex, dailyIndex];\n      lastVersion = this.getLastVersion(path, nextShowChanges);\n    }\n    this.props.onShowChanges(nextShowChanges, lastVersion);\n  };\n\n  render() {\n    const { historyGroups } = this.state;\n\n    return (\n      <div className=\"sdoc-file-history-panel h-100 o-hidden d-flex flex-column\">\n        <div className=\"sdoc-file-history-select-range\">\n          <div className=\"sdoc-file-history-select-range-title\">\n            {gettext('History Versions')}\n          </div>\n        </div>\n        <div\n          className={classnames('sdoc-file-history-versions', { 'o-hidden': historyGroups.length === 0 } )}\n          onScroll={this.onScrollHandler}\n        >\n          {this.renderHistoryVersions()}\n        </div>\n        <div className=\"sdoc-file-history-diff-switch d-flex align-items-center\">\n          <Switch\n            checked={this.props.isShowChanges}\n            placeholder={gettext('Show changes')}\n            className=\"sdoc-history-show-changes w-100\"\n            size=\"small\"\n            onChange={this.onShowChanges}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = {\n  isShowChanges: PropTypes.bool,\n  currentVersion: PropTypes.object,\n  onSelectHistoryVersion: PropTypes.func,\n  onShowChanges: PropTypes.func,\n};\n\nexport default SidePanel;\n","import React from 'react';\nimport ReactDom from 'react-dom';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport classnames from 'classnames';\nimport { DiffViewer } from '@seafile/sdoc-editor';\nimport { seafileAPI } from '../../../utils/seafile-api';\nimport { gettext, historyRepoID } from '../../../utils/constants';\nimport Loading from '../../../components/loading';\nimport GoBack from '../../../components/common/go-back';\nimport SidePanel from './side-panel';\nimport { Utils } from '../../../utils/utils';\nimport toaster from '../../../components/toast';\n\nimport '../../../css/layout.css';\nimport './index.css';\n\nconst { serviceURL, avatarURL, siteRoot } = window.app.config;\nconst { username, name } = window.app.pageOptions;\nconst { repoID, fileName, filePath, docUuid, assetsUrl  } = window.fileHistory.pageOptions;\n\nwindow.seafile = {\n  repoID,\n  docPath: filePath,\n  docName: fileName,\n  docUuid,\n  isOpenSocket: false,\n  serviceUrl: serviceURL,\n  name,\n  username,\n  avatarURL,\n  siteRoot,\n  assetsUrl,\n};\n\nclass SdocFileHistory extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const isShowChanges = localStorage.getItem('seahub-sdoc-history-show-changes') === 'false' ? false : true;\n    this.state = {\n      isLoading: true,\n      isShowChanges,\n      currentVersion: {},\n      currentVersionContent: '',\n      lastVersionContent: '',\n      changes: [],\n      currentDiffIndex: 0,\n    };\n  }\n\n  getInitContent = (firstChildren) => {\n    if (firstChildren) {\n      return {\n        version: -1,\n        children: [\n          {\n            id: firstChildren.id,\n            type: 'title',\n            children: [\n              {\n                id: firstChildren.children[0].id,\n                text: ''\n              }\n            ]\n          }\n        ]\n      };\n    }\n    return this.getInitContentByPath();\n  };\n\n  getInitContentByPath = (path) => {\n    const name = path ? path.split('/')?.pop()?.slice(0, -5) : '';\n    return {\n      version: -1,\n      children: [\n        {\n          id: '1',\n          type: 'title',\n          children: [\n            {\n              id: '2',\n              text: name\n            }\n          ]\n        }\n      ]\n    };\n  };\n\n  updateLastVersionContent = (currentVersionContent, currentVersion, lastVersion) => {\n    if (!lastVersion) {\n      this.setContent(currentVersionContent, '');\n      return;\n    }\n    if (lastVersion === 'init') {\n      const lastVersionContent = currentVersionContent ? this.getInitContent(currentVersionContent.children[0]) : this.getInitContentByPath(currentVersion.path);\n      const validCurrentVersionContent = currentVersionContent || this.getInitContentByPath(currentVersion.path);\n      this.setContent(validCurrentVersionContent, lastVersionContent);\n      return;\n    }\n    seafileAPI.getFileRevision(historyRepoID, lastVersion.commit_id, lastVersion.path).then(res => {\n      return res.data ? seafileAPI.getFileContent(res.data) : { data: '' };\n    }).then(res => {\n      const lastVersionContent = res.data;\n      const firstChildren = currentVersionContent.children[0];\n      const validLastVersionContent = lastVersion && !lastVersionContent ? this.getInitContent(firstChildren) : lastVersionContent;\n      this.setContent(currentVersionContent, validLastVersionContent);\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      toaster.danger(gettext(errorMessage));\n      this.setContent(currentVersionContent, '');\n    });\n  };\n\n  onSelectHistoryVersion = (currentVersion, lastVersion) => {\n    this.setState({ isLoading: true, currentVersion });\n    seafileAPI.getFileRevision(historyRepoID, currentVersion.commit_id, currentVersion.path).then(res => {\n      return seafileAPI.getFileContent(res.data);\n    }).then(res => {\n      const currentVersionContent = res.data;\n      this.updateLastVersionContent(currentVersionContent, currentVersion, lastVersion);\n    }).catch(error => {\n      const errorMessage = Utils.getErrorMsg(error, true);\n      toaster.danger(gettext(errorMessage));\n      this.setContent('', '');\n    });\n  };\n\n  setContent = (currentVersionContent = '', lastVersionContent = '') => {\n    this.setState({ currentVersionContent, lastVersionContent, isLoading: false, changes: [], currentDiffIndex: 0 });\n  };\n\n  onShowChanges = (isShowChanges, lastVersion) => {\n    if (isShowChanges) {\n      const { currentVersionContent, currentVersion } = this.state;\n      this.setState({ isLoading: true, isShowChanges }, () => {\n        localStorage.setItem('seahub-sdoc-history-show-changes', isShowChanges + '');\n        this.updateLastVersionContent(currentVersionContent, currentVersion, lastVersion);\n      });\n      return;\n    }\n    this.setState({ isLoading: true, isShowChanges }, () => {\n      this.setState({ isLoading: false, lastVersionContent: '' }, () => {\n        localStorage.setItem('seahub-sdoc-history-show-changes', isShowChanges + '');\n      });\n    });\n  };\n\n  setDiffCount = (diff = { value: [], changes: [] }) => {\n    const { changes } = diff;\n    this.setState({ changes, currentDiffIndex: 0 });\n  };\n\n  jumpToElement = (currentDiffIndex) => {\n    this.setState({ currentDiffIndex }, () => {\n      const { currentDiffIndex, changes } = this.state;\n      const change = changes[currentDiffIndex];\n      const changeElement = document.querySelectorAll(`[data-id=${change}]`)[0];\n      if (changeElement) {\n        this.historyContentRef.scrollTop = changeElement.offsetTop - 10;\n      }\n    });\n  };\n\n  lastChange = () => {\n    const { currentDiffIndex, changes } = this.state;\n    if (currentDiffIndex === 0) {\n      this.jumpToElement(changes.length - 1);\n      return;\n    }\n    this.jumpToElement(currentDiffIndex - 1);\n  };\n\n  nextChange = () => {\n    const { currentDiffIndex, changes } = this.state;\n    if (currentDiffIndex === changes.length - 1) {\n      this.jumpToElement(0);\n      return;\n    }\n    this.jumpToElement(currentDiffIndex + 1);\n  };\n\n  renderChangesTip = () => {\n    const { isShowChanges, changes, currentDiffIndex, isLoading } = this.state;\n    if (isLoading) return null;\n    if (!isShowChanges) return null;\n    const changesCount = changes ? changes.length : 0;\n    if (changesCount === 0) {\n      return (\n        <div className=\"sdoc-file-history-header-right d-flex align-items-center\">\n          <div className=\"sdoc-file-changes-container d-flex align-items-center pl-2 pr-2\">\n            {gettext('No changes')}\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"sdoc-file-history-header-right d-flex align-items-center\">\n        <div className=\"sdoc-file-changes-container d-flex align-items-center\">\n          <div className=\"sdoc-file-changes-tip d-flex align-items-center justify-content-center pl-2 pr-2\">\n            {`${gettext('Changes')} ${currentDiffIndex + 1}/${changesCount}`}\n          </div>\n          <div className=\"sdoc-file-changes-divider\"></div>\n          <div\n            className=\"sdoc-file-changes-last d-flex align-items-center justify-content-center\"\n            id=\"sdoc-file-changes-last\"\n            onClick={this.lastChange}\n          >\n            <span className=\"fas fa-chevron-up\"></span>\n          </div>\n          <div className=\"sdoc-file-changes-divider\"></div>\n          <div\n            className=\"sdoc-file-changes-next d-flex align-items-center justify-content-center\"\n            id=\"sdoc-file-changes-next\"\n            onClick={this.nextChange}\n          >\n            <span className=\"fas fa-chevron-down\"></span>\n          </div>\n          <UncontrolledTooltip placement=\"bottom\" target=\"sdoc-file-changes-last\" delay={0} fade={false}>\n            {gettext('Last modification')}\n          </UncontrolledTooltip>\n          <UncontrolledTooltip placement=\"bottom\" target=\"sdoc-file-changes-next\" delay={0} fade={false}>\n            {gettext('Next modification')}\n          </UncontrolledTooltip>\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { currentVersion, isShowChanges, currentVersionContent, lastVersionContent, isLoading } = this.state;\n\n    return (\n      <div className=\"sdoc-file-history d-flex h-100 w-100 o-hidden\">\n        <div className=\"sdoc-file-history-container d-flex flex-column\">\n          <div className=\"sdoc-file-history-header pt-2 pb-2 pl-4 pr-4 d-flex justify-content-between w-100 o-hidden\">\n            <div className={classnames('sdoc-file-history-header-left d-flex align-items-center o-hidden', { 'pr-4': isShowChanges })}>\n              <GoBack />\n              <div className=\"file-name text-truncate\">{fileName}</div>\n            </div>\n            {this.renderChangesTip()}\n          </div>\n          <div className=\"sdoc-file-history-content f-flex flex-column\" ref={ref => this.historyContentRef = ref}>\n            {isLoading ? (\n              <div className=\"sdoc-file-history-viewer d-flex align-items-center justify-content-center\">\n                <Loading />\n              </div>\n            ) : (\n              <DiffViewer\n                currentContent={currentVersionContent}\n                lastContent={isShowChanges ? lastVersionContent : ''}\n                didMountCallback={this.setDiffCount}\n              />\n            )}\n          </div>\n        </div>\n        <SidePanel\n          isShowChanges={isShowChanges}\n          currentVersion={currentVersion}\n          onSelectHistoryVersion={this.onSelectHistoryVersion}\n          onShowChanges={this.onShowChanges}\n        />\n      </div>\n    );\n  }\n}\n\nReactDom.render(<SdocFileHistory />, document.getElementById('wrapper'));\n"],"names":["Rename","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","onClick","e","inputRef","current","contains","target","onRenameConfirm","onChange","setState","name","value","onKeyDown","keyCode","Utils","keyCodes","enter","esc","onRenameCancel","nativeEvent","stopImmediatePropagation","newName","state","trim","_this$validateInput","validateInput","isValid","errMessage","toaster","danger","indexOf","gettext","React","_createClass","key","_this2","this","focus","hasSuffix","endIndex","lastIndexOf","setSelectionRange","setTimeout","document","addEventListener","removeEventListener","_jsx","className","children","ref","GoBack","_Component","_len","arguments","length","args","Array","_key","apply","concat","onBackClick","event","preventDefault","window","history","back","Component","moment","app","config","lang","HistoryVersion","onMouseEnter","_this$props","currentVersion","historyVersion","commit_id","isShowOperationIcon","onMouseLeave","_this$props2","onToggleClick","isMenuShow","_this$props3","path","onSelectHistoryVersion","onRestore","onItemDownload","onItemCopy","ctime_format","ctime","format","onCopy","toggleRename","isRenameShow","obj_id","renameHistoryVersion","showDailyHistory","stopPropagation","_this$props4","showDaily","creator_name","count","isHighlightItem","url","URLDecorator","getUrl","type","filePath","objID","_jsxs","classnames","Dropdown","isOpen","toggle","DropdownToggle","tag","alt","DropdownMenu","DropdownItem","href","onItemDownLoad","docUuid","fileHistory","pageOptions","SidePanel","loadMore","isReloadingData","currentPage","seafileAPI","listSdocHistory","PER_PAGE","then","res","updateResultState","data","renameSdocHistory","historyGroups","map","item","catch","error","errorMessage","getErrorMsg","isLoading","onScrollHandler","clientHeight","scrollHeight","scrollTop","hasMore","restoreVersion","currentItem","editUtilities","revertFile","success","firstLoadSdocHistory","message","getLastVersion","isShowChanges","_path","_slicedToArray","monthIndex","dayIndex","dailyIndex","monthHistoryGroup","dayHistoryGroup","lastVersion","_monthHistoryGroup$ch","_historyGroups","_historyGroups$childr","_path2","copyHistoryFile","sdocCopyHistoryFile","historyRepoID","filename","file_name","replace","callback","newHistoryGroups","slice","listSdocDailyHistoryDetail","_dayHistoryGroup$chil","histories","push","_toConsumableArray","renderHistoryVersions","_this$state","Loading","_Fragment","historyGroupIndex","Fragment","month","dayHistoryGroupIndex","index","flat","onShowChanges","nextShowChanges","date","momentDate","day","findIndex","result","resultCount","formatHistories","Error","oldHistoryGroups","isArray","forEach","monthItem","find","onScroll","Switch","checked","placeholder","size","_window$app$config","serviceURL","avatarURL","siteRoot","_window$app$pageOptio","username","_window$fileHistory$p","repoID","fileName","assetsUrl","seafile","docPath","docName","isOpenSocket","serviceUrl","SdocFileHistory","getInitContent","firstChildren","version","id","text","getInitContentByPath","_path$split","_path$split$pop","split","pop","updateLastVersionContent","currentVersionContent","getFileRevision","getFileContent","lastVersionContent","validLastVersionContent","setContent","validCurrentVersionContent","undefined","changes","currentDiffIndex","localStorage","setItem","setDiffCount","jumpToElement","_this$state2","change","changeElement","querySelectorAll","historyContentRef","offsetTop","lastChange","_this$state3","nextChange","_this$state4","renderChangesTip","_this$state5","changesCount","UncontrolledTooltip","placement","delay","fade","getItem","_this$state6","DiffViewer","currentContent","lastContent","didMountCallback","ReactDom","getElementById"],"sourceRoot":""}