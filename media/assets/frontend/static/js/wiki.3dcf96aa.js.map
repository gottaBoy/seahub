{"version":3,"file":"static/js/wiki.3dcf96aa.js","mappings":"oQAIaA,EAAY,yBACZC,EAAY,yBAGlB,SAASC,EAAoBC,EAAWC,GAAwB,IAGjEC,EAH+CC,EAAMC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGG,OAK1B,oBAAvBA,OAAOC,YAChBN,EAAQ,IAAIK,OAAOC,YAAYR,EAAW,CAAES,OAAQR,KAEpDC,EAAQQ,SAASC,YAAY,gBACvBC,gBAAgBZ,GAAW,GAAO,EAAMC,GAG5CE,IACFA,EAAOU,cAAcX,GACrBY,IAAOC,EAAAA,EAAOd,GAElB,CAEO,SAASe,IAA6B,IAApBf,EAAIG,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAGD,EAAMC,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACxCP,EAAoBF,EAAWiB,IAAO,CAAC,EAAGb,EAAM,CAAEgB,KAAMpB,IAAcM,EACxE,CAEO,SAASe,IAA6B,IAApBjB,EAAIG,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAGD,EAAMC,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACxCP,EAAoBD,EAAWgB,IAAO,CAAC,EAAGb,EAAM,CAAEgB,KAAMnB,IAAcK,EACxE,C,0IChBMgB,EAAW,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAJ,GAEf,SAAAA,EAAYK,GAAQ,IAADC,EASf,OATeC,EAAAA,EAAAA,GAAA,KAAAP,IACjBM,EAAAH,EAAAK,KAAA,KAAMH,IA8CRI,iBAAmB,WACjBlB,SAASmB,iBAAiB,YAAaJ,EAAKK,oBAC5CpB,SAASmB,iBAAiB,aAAcJ,EAAKK,oBAC7CpB,SAASmB,iBAAiB,SAAUJ,EAAKM,YACzCrB,SAASmB,iBAAiB,cAAeJ,EAAKM,YAC9CrB,SAASmB,iBAAiB,UAAWJ,EAAKO,qBAC1CzB,OAAOsB,iBAAiB,SAAUJ,EAAKM,WACzC,EAACN,EAEDQ,mBAAqB,WACnBvB,SAASwB,oBAAoB,YAAaT,EAAKK,oBAC/CpB,SAASwB,oBAAoB,aAAcT,EAAKK,oBAChDpB,SAASwB,oBAAoB,SAAUT,EAAKM,YAC5CrB,SAASwB,oBAAoB,cAAeT,EAAKM,YACjDrB,SAASwB,oBAAoB,UAAWT,EAAKO,qBAC7CzB,OAAO2B,oBAAoB,SAAUT,EAAKM,WAC5C,EAACN,EAEDU,WAAa,SAACC,GACZ,GAAIA,EAAE3B,OAAO4B,KAAOZ,EAAKD,MAAMa,GAA/B,CAEA,IAAAC,EAAiBF,EAAE3B,OAAO8B,SAAlBC,EAACF,EAADE,EAAGC,EAACH,EAADG,EACXC,EAAmCN,EAAE3B,OAA7BkC,EAAaD,EAAbC,cAAeC,EAAQF,EAARE,SAEvBnB,EAAKoB,SAAS,CAAEC,WAAW,EAAMN,EAAAA,EAAGC,EAAAA,EAAGE,cAAAA,EAAeC,SAAAA,IACtDnB,EAAKG,oBACLmB,EAAAA,EAAAA,IAAatB,EAAKD,MAAMwB,WAAYZ,EAPK,CAQ3C,EAACX,EAEDM,WAAa,SAACK,IACRX,EAAKwB,MAAMH,WAAeV,EAAE3B,QAAW2B,EAAE3B,OAAO4B,IAAMD,EAAE3B,OAAO4B,KAAOZ,EAAKD,MAAMa,KACnFZ,EAAKQ,qBACLR,EAAKoB,SAAS,CAAEC,WAAW,KAC3BC,EAAAA,EAAAA,IAAatB,EAAKD,MAAM0B,WAAYd,GAExC,EAACX,EAEDK,mBAAqB,SAACM,GACfX,EAAK0B,KAAKC,SAAShB,EAAEjC,UAASe,EAAAA,EAAAA,KACrC,EAACO,EAED4B,iBAAmB,SAACnD,GAClBA,EAAMoD,iBAEF7B,EAAKD,MAAM+B,cAAarC,EAAAA,EAAAA,KAC9B,EAACO,EAED+B,kBAAoB,SAACpB,GACnBX,EAAKM,WAAWK,EAClB,EAACX,EAEDO,oBAAsB,SAACI,IACQ,IAAzBX,EAAKwB,MAAMH,YAGfV,EAAEkB,iBACF7B,EAAKP,SAASkB,GAChB,EAACX,EAEDP,SAAW,SAACkB,GACQ,KAAdA,EAAEqB,SAAgC,KAAdrB,EAAEqB,UACxBvC,EAAAA,EAAAA,KAEJ,EAACO,EAEDiC,gBAAkB,WAAmB,IAAlBlB,EAACpC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAAGqC,EAACrC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EACxBuD,EAAa,CACfC,IAAKnB,EACLoB,KAAMrB,GAGR,IAAKf,EAAK0B,KAAM,OAAOQ,EAEvB,IAAAG,EAAoCvD,OAA5BwD,EAAUD,EAAVC,WAAYC,EAAWF,EAAXE,YACdC,EAAOxC,EAAK0B,KAAKe,wBAkBvB,OAhBIzB,EAAIwB,EAAKE,OAASH,IACpBL,EAAWC,KAAOK,EAAKE,QAGrB3B,EAAIyB,EAAKG,MAAQL,IACnBJ,EAAWE,MAAQI,EAAKG,OAGtBT,EAAWC,IAAM,IACnBD,EAAWC,IAAMK,EAAKE,OAASH,GAAeA,EAAcC,EAAKE,QAAU,EAAI,GAG7ER,EAAWE,KAAO,IACpBF,EAAWE,KAAOI,EAAKG,MAAQL,GAAcA,EAAaE,EAAKG,OAAS,EAAI,GAGvET,CACT,EAAClC,EAED4C,mBAAqB,WAAmB,IAAlB7B,EAACpC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAAGqC,EAACrC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAC3BuD,EAAa,CACfC,IAAKnB,EACLoB,KAAMrB,GAGR,IAAKf,EAAK0B,KAAM,OAAOQ,EAEvB,IAAAW,EAAoC/D,OAA5BwD,EAAUO,EAAVP,WAAYC,EAAWM,EAAXN,YACdC,EAAOxC,EAAK0B,KAAKe,wBAqBvB,OAlBAP,EAAWE,KAAOrB,EAAIyB,EAAKG,MAEvB3B,EAAIwB,EAAKE,OAASH,IACpBL,EAAWC,KAAOK,EAAKE,QAGrBR,EAAWE,KAAO,IACpBF,EAAWE,MAAQI,EAAKG,OAGtBT,EAAWC,IAAM,IACnBD,EAAWC,IAAMK,EAAKE,OAASH,GAAeA,EAAcC,EAAKE,QAAU,EAAI,GAG7ER,EAAWE,KAAOI,EAAKG,MAAQL,IACjCJ,EAAWE,KAAOI,EAAKG,MAAQL,GAAcA,EAAaE,EAAKG,OAAS,EAAI,GAGvET,CACT,EAAClC,EAGD8C,gBAAkB,SAACrE,GACjBA,EAAMsE,kBACN,IAAIC,EAAYC,EAAAA,EAAMC,aAAazE,EAAO,aACtCyC,EAAgBlB,EAAKwB,MAAMN,cAC/BlB,EAAKD,MAAM+C,gBAAgBE,EAAW9B,EAAezC,EACvD,EAACuB,EAEDmD,cAAgB,SAAC1E,GACfA,EAAMsE,iBACR,EAtLE/C,EAAKwB,MAAQ,CACXT,EAAG,EACHC,EAAG,EACHK,WAAW,EACXH,cAAe,KACfC,SAAU,IACVnB,CACJ,CAwMC,OAxMAoD,EAAAA,EAAAA,GAAA1D,EAAA,EAAA2D,IAAA,oBAAAC,MAED,WACEC,KAAKC,SAAWC,EAAAA,EAASC,SAASH,KAAK7C,WAAY6C,KAAKjD,WAC1D,GAAC,CAAA+C,IAAA,qBAAAC,MAED,WAAuB,IAADK,EAAA,KACpB,GAAIJ,KAAK/B,MAAMH,UAAW,CACxB,IAAMuC,EAAU9E,OAAO+E,uBAAyBC,WAEhDF,GAAQ,WACN,IAAAG,EAAiBJ,EAAKnC,MAAdT,EAACgD,EAADhD,EAAGC,EAAC+C,EAAD/C,EACXgD,EAAsBL,EAAK5D,MAAMkE,IAAMN,EAAKf,mBAAmB7B,EAAGC,GAAK2C,EAAK1B,gBAAgBlB,EAAGC,GAAvFmB,EAAG6B,EAAH7B,IAAKC,EAAI4B,EAAJ5B,KAEbwB,GAAQ,WACDD,EAAKjC,OACViC,EAAKjC,KAAKwC,MAAM/B,IAAG,GAAAgC,OAAMhC,EAAG,MAC5BwB,EAAKjC,KAAKwC,MAAM9B,KAAI,GAAA+B,OAAM/B,EAAI,MAC9BuB,EAAKjC,KAAKwC,MAAME,QAAU,EAC1BT,EAAKjC,KAAKwC,MAAMG,cAAgB,OAClC,GACF,GACF,KAAO,CACL,IAAKd,KAAK7B,KAAM,OAChB6B,KAAK7B,KAAKwC,MAAME,QAAU,EAC1Bb,KAAK7B,KAAKwC,MAAMG,cAAgB,MAClC,CACF,GAAC,CAAAhB,IAAA,uBAAAC,MAED,WACMC,KAAKC,UACPC,EAAAA,EAASa,WAAWf,KAAKC,UAG3BD,KAAK/C,oBACP,GAAC,CAAA6C,IAAA,SAAAC,MA8ID,WAAU,IAADiB,EAAA,KAEP,OACEC,EAAAA,EAAAA,KAAA,OAAKC,KAAK,OAAOC,UAAU,oCAAoCR,MAF7C,CAAEpD,SAAU,QAASsD,QAAS,EAAGC,cAAe,OAAQM,QAAS,SAEAC,IAAK,SAAAlD,GAAU6C,EAAK7C,KAAOA,CAAM,EAAEmD,SACnHtB,KAAK/B,MAAML,SAAS2D,KAAI,SAACC,EAAUC,GAClC,MAAiB,YAAbD,GACKP,EAAAA,EAAAA,KAAA,OAAiBE,UAAU,oCAAjBM,IAGfR,EAAAA,EAAAA,KAAA,UAEEE,UAAU,yCACV,iBAAgBK,EAAS1B,IACzB4B,QAASV,EAAKzB,gBACdK,cAAeoB,EAAKpB,cAAc0B,SAEjCE,EAASzB,OANL0B,EAUb,KAGN,KAACtF,CAAA,CApNc,CAASwF,EAAAA,WAyN1B,K,wEC7LMC,EAAsB,KAzCH/B,EAAAA,EAAAA,IAEvB,SAAAgC,IAAe,IAADpF,EAAA,MAAAC,EAAAA,EAAAA,GAAA,KAAAmF,GAAA,KASdC,gBAAkB,SAAC5G,GACjB,IAAK,IAAMmC,KAAMZ,EAAKsF,WAChBC,EAAAA,EAAAA,IAAWvF,EAAKsF,UAAW1E,IAAKZ,EAAKsF,UAAU1E,GAAI4E,KAAK/G,EAEhE,EAAE,KAEFgH,gBAAkB,SAAChH,GACjB,IAAK,IAAMmC,KAAMZ,EAAKsF,WAChBC,EAAAA,EAAAA,IAAWvF,EAAKsF,UAAW1E,IAAKZ,EAAKsF,UAAU1E,GAAI8E,KAAKjH,EAEhE,EAAE,KAEFiF,SAAW,SAACiC,EAAcC,GACxB,IAAMhF,GAAKiF,EAAAA,EAAAA,MAOX,OALA7F,EAAKsF,UAAU1E,GAAM,CACnB4E,KAAMG,EACND,KAAME,GAGDhF,CACT,EAAE,KAEF0D,WAAa,SAAC1D,GACRA,GAAMZ,EAAKsF,UAAU1E,WAChBZ,EAAKsF,UAAU1E,EAE1B,EAnCE2C,KAAK+B,UAAY,CAAC,EAEdQ,EAAAA,KACFhH,OAAOsB,iBAAiBhC,EAAAA,GAAWmF,KAAK8B,iBACxCvG,OAAOsB,iBAAiB/B,EAAAA,GAAWkF,KAAKkC,iBAE5C,KAkCF,K,wBC9CO,SAASnE,EAAayE,GAAgB,IAAD,IAAAC,EAAArH,UAAAC,OAANqH,EAAI,IAAAC,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAJF,EAAIE,EAAA,GAAAxH,UAAAwH,GACxC,MAAwB,oBAATJ,GAAwBA,EAAIK,WAAC,EAAGH,EACjD,CAEO,SAASV,EAAWc,EAAKC,GAC9B,OAAOC,OAAOC,UAAUC,eAAevG,KAAKmG,EAAKC,EACnD,CAEO,SAAST,IACd,OAAOa,KAAKC,SAASC,SAAS,IAAIC,UAAU,EAC9C,C,gIAEO,IAAMvH,EAAQ,CAAC,EAETwG,EAAYgB,QACL,qBAAXhI,QAA0BA,OAAOG,UAAYH,OAAOG,SAAS8H,c,qLCGhEC,EAAgB,SAAArH,IAAAC,EAAAA,EAAAA,GAAAoH,EAAArH,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAkH,GAOpB,SAAAA,EAAYjH,GAAQ,IAADC,EAKf,OALeC,EAAAA,EAAAA,GAAA,KAAA+G,IACjBhH,EAAAH,EAAAK,KAAA,KAAMH,IA8BRwB,WAAa,WACX,EACDvB,EAEDyB,WAAa,WACPzB,EAAKwB,MAAMyF,iBACbjH,EAAKoB,SAAS,CAAC6F,gBAAgB,IACS,oBAA7BjH,EAAKD,MAAMmH,cACpBlH,EAAKD,MAAMmH,eAGjB,EAAClH,EAEDmH,wBAA0B,SAACxG,GACZ,SAATA,EAAE0C,KAA2B,SAAT1C,EAAE0C,KACxBrD,EAAKoH,sBAAsBzG,EAE/B,EAACX,EAEDoH,sBAAwB,SAACzG,GACvBA,EAAEkB,iBACFlB,EAAEoC,kBAEF/C,EAAKqH,qBACP,EAACrH,EAEDqH,oBAAsB,WACpBrH,EAAKoB,SACH,CAAC6F,gBAAiBjH,EAAKwB,MAAMyF,iBAC7B,WACMjH,EAAKwB,MAAMyF,gBAAoD,oBAA3BjH,EAAKD,MAAMuH,WACjDtH,EAAKD,MAAMuH,aACDtH,EAAKwB,MAAMyF,gBAAsD,oBAA7BjH,EAAKD,MAAMmH,cACzDlH,EAAKD,MAAMmH,cAEf,GAEJ,EAAClH,EAEDuH,kBAAoB,SAAC5G,GACN,SAATA,EAAE0C,KAA2B,SAAT1C,EAAE0C,KACxBrD,EAAK8C,gBAAgBnC,EAEzB,EAACX,EAED8C,gBAAkB,SAACrE,GACjB,IAAIuE,EAAYC,EAAAA,EAAMC,aAAazE,EAAO,UACtC+I,EAAOxH,EAAKD,MAAMyH,KACtBxH,EAAKD,MAAM+C,gBAAgBE,EAAWvE,EAAO+I,EAC/C,EA9EExH,EAAKwB,MAAQ,CACXL,SAAU,GACV8F,gBAAgB,GAChBjH,CACJ,CA4IC,OA5IAoD,EAAAA,EAAAA,GAAA4D,EAAA,EAAA3D,IAAA,oBAAAC,MAED,WACMC,KAAKxD,MAAM0H,2BACblE,KAAKmE,WAAajE,EAAAA,EAASC,SAASH,KAAKhC,WAAYgC,KAAK9B,aAE5D,IAAM+F,EAASjE,KAAKxD,MAAdyH,KACFrG,EAAWoC,KAAKxD,MAAM4H,YAAYH,GACtCjE,KAAKnC,SAAS,CAACD,SAAUA,GAC3B,GAAC,CAAAkC,IAAA,4BAAAC,MAED,SAA0BsE,GACxB,IAAMJ,EAASI,EAATJ,KACN,GAAIA,EAAKK,OAAStE,KAAKxD,MAAMyH,KAAKK,KAAM,CACtC,IAAI1G,EAAWoC,KAAKxD,MAAM4H,YAAYH,GACtCjE,KAAKnC,SAAS,CAACD,SAAUA,GAC3B,CACF,GAAC,CAAAkC,IAAA,uBAAAC,MAED,WACMC,KAAKxD,MAAM0H,0BAA4BlE,KAAKmE,YAC9CjE,EAAAA,EAASa,WAAWf,KAAKmE,WAE7B,GAAC,CAAArE,IAAA,SAAAC,MAqDD,WAAU,IAADK,EAAA,KACHxC,EAAWoC,KAAK/B,MAAML,SAC1B2G,EAA+BvE,KAAKxD,MAA9BgI,EAAWD,EAAXC,YAAaC,EAAOF,EAAPE,QAGnB,OAFAD,EAAc,sBAAwBA,EAEjC5G,EAASvC,OAIVoJ,GAAuB,WAAZA,GAEXC,EAAAA,EAAAA,MAACC,EAAAA,EAAc,CAACC,OAAQ5E,KAAK/B,MAAMyF,eAAgBmB,OAAQ7E,KAAK6D,sBAAsBvC,SAAA,EACpFL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAc,CACb3D,UAAWqD,EACX,cAAY,WACZO,OAAOC,EAAAA,EAAAA,IAAQ,mBACf,cAAYA,EAAAA,EAAAA,IAAQ,mBACpB,gBAAehF,KAAK/B,MAAMyF,eAC1BuB,UAAWjF,KAAK4D,2BAIlB3C,EAAAA,EAAAA,KAACiE,EAAAA,EAAY,CAAA5D,SACV1D,EAAS2D,KAAI,SAACC,EAAUC,GACvB,MAAiB,YAAbD,GACKP,EAAAA,EAAAA,KAACkE,EAAAA,EAAY,CAAaC,SAAO,GAAd3D,IAGxBR,EAAAA,EAAAA,KAACkE,EAAAA,EAAY,CAAa,cAAa3D,EAAS1B,IAAK4B,QAAStB,EAAKb,gBAAiB0F,UAAW7E,EAAK4D,kBAAkB1C,SAAEE,EAASzB,OAA9G0B,EAGzB,UAONiD,EAAAA,EAAAA,MAACW,EAAAA,EAAQ,CAACT,OAAQ5E,KAAK/B,MAAMyF,eAAgBmB,OAAQ7E,KAAK6D,sBAAuB1C,UAAU,MAAKG,SAAA,EAC9FL,EAAAA,EAAAA,KAAC6D,EAAAA,EAAc,CACbQ,IAAKb,GAAW,IAChBvD,KAAK,SACLqE,SAAS,IACTpE,UAAWqD,EACXO,OAAOC,EAAAA,EAAAA,IAAQ,mBACf,cAAY,WACZ,gBAAehF,KAAK/B,MAAMyF,eAC1B,cAAYsB,EAAAA,EAAAA,IAAQ,mBACpBC,UAAWjF,KAAK4D,2BAGlB3C,EAAAA,EAAAA,KAACiE,EAAAA,EAAY,CAAA5D,SACV1D,EAAS2D,KAAI,SAACC,EAAUC,GACvB,MAAiB,YAAbD,GACKP,EAAAA,EAAAA,KAACkE,EAAAA,EAAY,CAAaC,SAAO,GAAd3D,IAGxBR,EAAAA,EAAAA,KAACkE,EAAAA,EAAY,CAAa,cAAa3D,EAAS1B,IAAK4B,QAAStB,EAAKb,gBAAiB0F,UAAW7E,EAAK4D,kBAAkB1C,SAAEE,EAASzB,OAA9G0B,EAGzB,SAtDG,EA0DX,KAACgC,CAAA,CAzJmB,CAAS9B,EAAAA,WAAzB8B,EAEG+B,aAAe,CACpBtB,0BAA0B,EAC1BM,YAAa,uBA0JjB,K,yKCuJA,EA3SkB,SAAApI,IAAAC,EAAAA,EAAAA,GAAAoJ,EAAArJ,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAkJ,GAEhB,SAAAA,EAAYjJ,GAAQ,IAADC,GAAAC,EAAAA,EAAAA,GAAA,KAAA+I,IACjBhJ,EAAAH,EAAAK,KAAA,KAAMH,IAwBRkJ,aAAe,WACRjJ,EAAKD,MAAMmJ,eACdlJ,EAAKoB,SAAS,CACZ+H,qBAAqB,EACrBC,aAAa,GAGnB,EAACpJ,EAEDqJ,YAAc,WACPrJ,EAAKD,MAAMmJ,eACdlJ,EAAKoB,SAAS,CACZ+H,qBAAqB,EACrBC,aAAa,GAGnB,EAACpJ,EAEDsJ,aAAe,WACRtJ,EAAKD,MAAMmJ,eACdlJ,EAAKoB,SAAS,CACZ+H,qBAAqB,EACrBC,aAAa,GAGnB,EAACpJ,EAEDuJ,YAAc,WACZ,IACQC,EADSxJ,EAAKD,MAAd0J,KACAD,OACR,GAAIA,EAAOE,QACT1J,EAAKD,MAAMwJ,YAAYvJ,EAAKD,MAAM0J,UADpC,CAIA,IAAAE,EAAiD1G,EAAAA,EAAM2G,kBAAkBJ,EAAOK,YAAxEC,EAAkBH,EAAlBG,mBAAoBC,EAAgBJ,EAAhBI,iBAC5B,GAAID,EAAoB,CACtB,IAAAE,EAAmDD,EAAiBF,WAAnDI,EAAUD,EAAnBE,QAA6BC,EAASH,EAAjBI,OAC7B,IAAKH,IAAeE,EAAW,MACjC,CACAnK,EAAKD,MAAMwJ,YAAYvJ,EAAKD,MAAM0J,KANlC,CAOF,EAACzJ,EAEDqK,aAAe,SAAC1J,GACdA,EAAEoC,kBACF,IAAM0G,EAASzJ,EAAKD,MAAd0J,KACFA,EAAKa,WACPtK,EAAKD,MAAMwK,eAAed,GAE1BzJ,EAAKD,MAAMyK,eAAef,EAE9B,EAACzJ,EAEDyK,gBAAkB,SAAC9J,GACjB,GAAIsC,EAAAA,EAAMyH,eAAiB1K,EAAK2K,QAC9B,OAAO,EAET3K,EAAKD,MAAM0K,gBAAgB9J,EAAGX,EAAKD,MAAM0J,KAC3C,EAACzJ,EAED4K,gBAAkB,SAACjK,GACjB,GAAIsC,EAAAA,EAAMyH,eAAiB1K,EAAK2K,QAC9B,OAAO,EAE2B,QAAhC3K,EAAKD,MAAM0J,KAAKD,OAAOhK,MACzBQ,EAAKoB,SAAS,CAACyJ,gBAAgB,IAEjC7K,EAAKD,MAAM6K,gBAAgBjK,EAAGX,EAAKD,MAAM0J,KAC3C,EAACzJ,EAED8K,eAAiB,SAACnK,GAChB,GAAIsC,EAAAA,EAAMyH,eAAiB1K,EAAK2K,QAC9B,OAAO,EAET3K,EAAKD,MAAM+K,eAAenK,EAC5B,EAACX,EAED+K,gBAAkB,SAACpK,GACjB,GAAIsC,EAAAA,EAAMyH,eAAiB1K,EAAK2K,QAC9B,OAAO,EAET3K,EAAKoB,SAAS,CAACyJ,gBAAgB,IAC/B7K,EAAKD,MAAMgL,gBAAgBpK,EAAGX,EAAKD,MAAM0J,KAC3C,EAACzJ,EAEDgL,WAAa,SAACrK,GACZ,GAAIsC,EAAAA,EAAMyH,eAAiB1K,EAAK2K,QAC9B,OAAO,EAEThK,EAAEoC,kBACF/C,EAAKoB,SAAS,CAACyJ,gBAAgB,IAC/B7K,EAAKD,MAAMiL,WAAWrK,EAAGX,EAAKD,MAAM0J,KACtC,EAACzJ,EAEDkH,aAAe,WACblH,EAAKoB,SAAS,CAAC+H,qBAAqB,IACpCnJ,EAAKD,MAAMmH,cACb,EAAClH,EAED8C,gBAAkB,SAACE,EAAWvE,EAAOgL,GACnCzJ,EAAKD,MAAM+C,gBAAgBE,EAAWyG,EACxC,EAACzJ,EAEDiL,gBAAkB,SAACxM,GACjBA,EAAMsE,kBACFtE,EAAMyM,MAGZ,EAAClL,EAEDmL,kBAAoB,SAAC1M,GACnBuB,EAAKoL,mBAAmB3M,EAC1B,EAACuB,EAEDoL,mBAAqB,SAAC3M,GACpBuB,EAAKD,MAAMqL,mBAAmB3M,EAAOuB,EAAKD,MAAM0J,MAChDzJ,EAAKoB,SAAS,CAAC+H,qBAAqB,GACtC,EAACnJ,EAEDqL,mBAAqB,WACnB,IAAM5B,EAASzJ,EAAKD,MAAd0J,KACF6B,EAAO,GACP9L,EAAO,GACX,GAAyB,QAArBiK,EAAKD,OAAOhK,KACd8L,GAAO9G,EAAAA,EAAAA,KAAA,KAAGE,UAAU,kBACpBlF,EAAO,UACF,CACL,IAAIwF,EAAQyE,EAAKD,OAAO3B,KAAK0D,YAAY,KACzC,IAAe,IAAXvG,EACFsG,GAAO9G,EAAAA,EAAAA,KAAA,KAAGE,UAAU,gBACpBlF,EAAO,WACF,CACL,IAAIgM,EAAS/B,EAAKD,OAAO3B,KAAK4D,MAAMzG,GAAO0G,cAC5B,SAAXF,GAAgC,SAAXA,GAAgC,UAAXA,GAAiC,SAAXA,GAAgC,SAAXA,GACvFF,GAAO9G,EAAAA,EAAAA,KAAA,KAAGE,UAAU,iBACpBlF,EAAO,SAEW,QAAXgM,GAA+B,cAAXA,GAC3BF,GAAO9G,EAAAA,EAAAA,KAAA,KAAGE,UAAU,oBACpBlF,EAAO,SAGP8L,GAAO9G,EAAAA,EAAAA,KAAA,KAAGE,UAAU,gBACpBlF,EAAO,OAEX,CACF,CACA,MAAO,CAAC8L,KAAAA,EAAM9L,KAAAA,EAChB,EAACQ,EAED2L,kBAAoB,SAAClC,GACnB,IAAMmC,EAAsEC,EAAAA,EAAtED,WAAYE,EAA0DD,EAAAA,EAA1DC,SAAUC,EAAgDF,EAAAA,EAAhDE,KAAMC,EAA0CH,EAAAA,EAA1CG,KAAMC,EAAoCJ,EAAAA,EAApCI,OAAQC,EAA4BL,EAAAA,EAA5BK,OAAQC,EAAoBN,EAAAA,EAApBM,gBAEpDhL,EAAW,CAAC8K,EAAQC,EAAQH,EAAMC,EAAMG,GACnB,QAArB1C,EAAKD,OAAOhK,OACd2B,EAAW,CAACyK,EAAYE,EAAUC,EAAMC,EAAMC,EAAQC,IAGxD,IAAQE,EAAapM,EAAKD,MAAlBqM,SACRC,EAAiDpJ,EAAAA,EAAM2G,kBAAkBwC,GAAjEtC,EAAkBuC,EAAlBvC,mBAAoBC,EAAgBsC,EAAhBtC,iBAC5B,IAAKD,EACH,OAAO3I,EAGTA,EAAW,GACX,IAAAmL,EAAmFvC,EAAiBF,WAApF0C,EAASD,EAAjBE,OAA2BrC,EAASmC,EAAjBlC,OAA2BqC,EAASH,EAAjBI,OAAyBC,EAAOL,EAAbM,KAajE,MAZyB,QAArBnD,EAAKD,OAAOhK,MACd+M,GAAapL,EAAS0L,KAAKjB,EAAYE,GAGzCa,GAAWxL,EAAS0L,KAAKd,GACzB5B,GAAahJ,EAAS0L,KAAKb,EAAMC,GACjCQ,GAAatL,EAAS0L,KAAKX,GAEF,QAArBzC,EAAKD,OAAOhK,MACd2B,EAAS0L,KAAKV,GAGThL,CACT,EAACnB,EAED8M,eAAiB,WACf,IAAAhF,EAA4B9H,EAAKD,MAA3B0J,EAAI3B,EAAJ2B,KAAMsD,EAAWjF,EAAXiF,YACZ,OAAKtD,EAAKuD,eAIRxI,EAAAA,EAAAA,KAAA,OAAKE,UAAU,WAAWR,MAAO,CAAC6I,YAAaA,GAAalI,SACzD4E,EAAK5E,SAASC,KAAI,SAAA0C,GACjB,OACEhD,EAAAA,EAAAA,KAACwE,EAAY,CAEXS,KAAMjC,EACNuF,YAAaA,EACbX,SAAUpM,EAAKD,MAAMqM,SACrBa,YAAajN,EAAKD,MAAMkN,YACxBC,eAAgBlN,EAAKD,MAAMmN,eAC3BhE,cAAelJ,EAAKD,MAAMmJ,cAC1BK,YAAavJ,EAAKD,MAAMwJ,YACxBgB,eAAgBvK,EAAKD,MAAMwK,eAC3BC,eAAgBxK,EAAKD,MAAMyK,eAC3BlD,WAAYtH,EAAKD,MAAMuH,WACvBxE,gBAAiB9C,EAAKD,MAAM+C,gBAC5BoE,aAAclH,EAAKkH,aACnBuD,gBAAiBzK,EAAKD,MAAM0K,gBAC5BK,eAAgB9K,EAAKD,MAAM+K,eAC3BE,WAAYhL,EAAKD,MAAMiL,WACvBJ,gBAAiB5K,EAAKD,MAAM6K,gBAC5BG,gBAAiB/K,EAAKD,MAAMgL,gBAC5BK,mBAAoBpL,EAAKD,MAAMqL,oBAlB1B5D,EAAK2F,KAqBhB,MA5BK,EA+BX,EA7OEnN,EAAKwB,MAAQ,CACX4H,aAAa,EACbD,qBAAqB,EACrB0B,gBAAgB,GAElB,IAAQuB,EAAarM,EAAbqM,SACRpM,EAAK2K,QAAuB,OAAbyB,EACf,IAAAgB,EAAiDnK,EAAAA,EAAM2G,kBAAkBwC,GAAjEtC,EAAkBsD,EAAlBtD,mBAAoBC,EAAgBqD,EAAhBrD,iBAC5B,GAAID,EAAoB,CACtB,IAAQM,EAAWL,EAAiBF,WAA5BO,OACRpK,EAAK2K,QAAUP,CACjB,CAAC,OAAApK,CACH,CAsRC,OAtRAoD,EAAAA,EAAAA,GAAA4F,EAAA,EAAA3F,IAAA,4BAAAC,MAED,SAA0BsE,GACnBA,EAAUsB,eACb3F,KAAKnC,SAAS,CACZ+H,qBAAqB,EACrBC,aAAa,GAGnB,GAAC,CAAA/F,IAAA,SAAAC,MA0ND,WACE,IAAA+J,EAAsD9J,KAAKxD,MAArDkN,EAAWI,EAAXJ,YAAaxD,EAAI4D,EAAJ5D,KAAMyD,EAAcG,EAAdH,eAAgBd,EAAQiB,EAARjB,SACzCkB,EAAqB/J,KAAK8H,qBAApB7L,EAAI8N,EAAJ9N,KAAM8L,EAAIgC,EAAJhC,KACRiC,EAAUhK,KAAK/B,MAAM4H,YAAc,yBAA2B,GAC9DK,EAAK0D,OAASF,IAChBM,EAAU,yBAGZ,IAAQzD,EAAuB7G,EAAAA,EAAM2G,kBAAkBwC,GAA/CtC,mBACR,OACE7B,EAAAA,EAAAA,MAAA,OAAKvD,UAAU,YAAWG,SAAA,EACxBoD,EAAAA,EAAAA,MAAA,OACEzI,KAAMA,EACNkF,UAAS,+BAAAP,OAAiCoJ,EAAO,KAAApJ,OAAkB,MAAdsF,EAAK0D,KAAc,OAAQ,GAAE,KAAAhJ,OAAIZ,KAAK/B,MAAMqJ,eAAiB,iBAAmB,IACrIvC,MAAOmB,EAAKD,OAAO3B,KACnBoB,aAAc1F,KAAK0F,aACnBI,YAAa9F,KAAK8F,YAClBC,aAAc/F,KAAK+F,aACnBkE,YAAajK,KAAK0H,gBAClB9H,cAAeI,KAAK4H,kBACpBlG,QAAS1B,KAAKgG,YAAY1E,SAAA,EAE1BL,EAAAA,EAAAA,KAAA,OAAKE,UAAU,iBAAiB+I,UAAWlK,KAAKoH,QAAS+C,YAAanK,KAAKkH,gBAAiBkD,YAAapK,KAAKqH,gBAAiBgD,YAAarK,KAAKwH,gBAAiB8C,WAAYtK,KAAKuH,eAAgBgD,OAAQvK,KAAKyH,WAAWnG,SAAE4E,EAAKD,OAAO3B,QACzOI,EAAAA,EAAAA,MAAA,OAAKvD,UAAU,YAAWG,SAAA,CACd,QAATrF,KAAoBiK,EAAKsE,UAActE,EAAKsE,UAAYtE,EAAKuD,iBAC5DxI,EAAAA,EAAAA,KAAA,KACEE,UAAS,yBAAAP,OAA2BsF,EAAKa,WAAa,gBAAkB,kBACxEkD,YAAa,SAAA7M,GAAC,OAAIA,EAAEoC,iBAAiB,EACrCkC,QAAS1B,KAAK8G,gBAGlB7F,EAAAA,EAAAA,KAAA,KAAGE,UAAU,iBAAgBG,SAAEyG,OAEhC4B,IACC1I,EAAAA,EAAAA,KAAA,OAAKE,UAAU,aAAYG,UACT,OAAbuH,GAAqBvC,EAAAA,IAAcC,IAAuBvG,KAAK/B,MAAM2H,sBACtE3E,EAAAA,EAAAA,KAACwC,EAAAA,EAAgB,CACfQ,KAAMjE,KAAKxD,MAAM0J,KACjB1B,YAAa,oBACbJ,YAAapE,KAAKoI,kBAClB7I,gBAAiBS,KAAKT,gBACtBwE,WAAY/D,KAAKxD,MAAMuH,WACvBJ,aAAc3D,KAAK2D,oBAM5BuC,EAAKa,YAAc/G,KAAKuJ,mBAG/B,KAAC9D,CAAA,CAtSe,CAAS9D,EAAAA,W,sBCwU3B,EAzUc,SAAAvF,IAAAC,EAAAA,EAAAA,GAAAoO,EAAArO,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAkO,GAEZ,SAAAA,EAAYjO,GAAQ,IAADC,GAAAC,EAAAA,EAAAA,GAAA,KAAA+N,IACjBhO,EAAAH,EAAAK,KAAA,KAAMH,IAcRkO,WAAa,SAACC,EAAMC,EAAQC,EAAcnB,GACxCjN,EAAKD,MAAMkO,WAAWC,EAAMC,EAAQC,EAAcnB,EACpD,EAACjN,EAEDyK,gBAAkB,SAAC9J,EAAG8I,GACpB,GAAIxG,EAAAA,EAAMyH,aACR,OAAO,EAET,IAAI2D,EAAoB,CAACC,WAAY7E,EAAKD,OAAQ+E,eAAgB9E,EAAK+E,WAAWrB,KAAMsB,aAAchF,EAAK0D,MAC3GkB,EAAoBK,KAAKC,UAAUN,GAEnC1N,EAAEiO,aAAaC,cAAgB,OAC/BlO,EAAEiO,aAAaE,QAAQ,6BAA8BT,EACvD,EAACrO,EAED4K,gBAAkB,SAACjK,EAAG8I,GACpB,GAAIxG,EAAAA,EAAMyH,eAAiB1K,EAAK+O,QAC9B,OAAO,EAETpO,EAAEqO,UACyB,oBAAvBrO,EAAEjC,OAAOgG,WACX1E,EAAKoB,SAAS,CACZ6N,uBAAuB,GAG7B,EAACjP,EAED8K,eAAiB,SAACnK,GAChB,GAAIsC,EAAAA,EAAMyH,eAAiB1K,EAAK+O,QAC9B,OAAO,EAETpO,EAAEkB,iBACFlB,EAAEiO,aAAaM,WAAa,MAC9B,EAAClP,EAED+K,gBAAkB,SAACpK,EAAG8I,GACpB,GAAIxG,EAAAA,EAAMyH,eAAiB1K,EAAK+O,QAC9B,OAAO,EAEkB,kCAAvBpO,EAAEjC,OAAOgG,WACX1E,EAAKoB,SAAS,CACZ6N,uBAAuB,GAG7B,EAACjP,EAEDmP,iBAAmB,SAAC1Q,IAClBgB,EAAAA,EAAAA,KACF,EAACO,EAEDuJ,YAAc,SAACE,IACbhK,EAAAA,EAAAA,MACAO,EAAKD,MAAMwJ,YAAYE,EACzB,EAACzJ,EAEDgL,WAAa,SAACrK,EAAG8I,GACf,GAAIxG,EAAAA,EAAMyH,eAAiB1K,EAAK+O,QAC9B,OAAO,EAET,IAAIpO,EAAEiO,aAAaQ,MAAMxQ,OAAzB,CAGA,IAAIyP,EAAoB1N,EAAEiO,aAAaS,QAAQ,8BAG/CC,EAFAjB,EAAoBK,KAAKa,MAAMlB,GAE1BC,EAAUgB,EAAVhB,WAAYC,EAAce,EAAdf,eAAgBE,EAAYa,EAAZb,aAC7Be,EAAe/F,EAEnB,GAAIvD,MAAMuJ,QAAQpB,GAChB,OAAKmB,OASLxP,EAAK0P,YAAYrB,EAAmBmB,EAAcxP,EAAKD,MAAM4P,gBAAiBH,EAAarC,OAR7C,MAAxCkB,EAAkB,GAAGE,gBAIzBvO,EAAKD,MAAM6P,YAAY5P,EAAKD,MAAM4P,gBAAiB,UAHjD3P,EAAKoB,SAAS,CAAC6N,uBAAuB,KAW5C,IAAKO,EACH,MAAuB,MAAnBjB,GAIJvO,EAAKiO,WAAWjO,EAAKD,MAAM4P,gBAAiBrB,EAAY,IAAKC,QAH3DvO,EAAKoB,SAAS,CAAC6N,uBAAuB,IAQ1C,GAAiC,QAA7BO,EAAahG,OAAOhK,MAIpB+O,IAAmBiB,EAAarC,OAKhCoB,IAAmBiB,EAAahB,WAAWrB,MACzCqC,EAAahG,OAAO3B,OAASyG,EAAWzG,MAD9C,CAOA,GAAiC,QAA7B2H,EAAahG,OAAOhK,MAAsC,QAApB8O,EAAW9O,KACnD,GAAIgQ,EAAahB,WAAWrB,OAASoB,EAEnC,GADYtL,EAAAA,EAAM4M,SAASL,EAAarC,MAC9B2C,SAASrB,GACjB,OAKNzO,EAAKiO,WAAWjO,EAAKD,MAAM4P,gBAAiBrB,EAAYkB,EAAarC,KAAMoB,EAZ3E,CA5CA,CAyDF,EAACvO,EAED0P,YAAc,SAACrB,EAAmBmB,EAAcO,EAAUC,GACxD,IAAIC,EAAc,GACdC,EAAQjN,EAAAA,EAAM4M,SAASG,IAC3B3B,EAAkB8B,SAAQ,SAAAhC,GACxB,IAAIhB,EAAOgB,EAAOM,aAClBwB,EAAYpD,KAAKM,EACnB,IAEiC,QAA7BqC,EAAahG,OAAOhK,QAKpByQ,EAAYG,MAAK,SAAAC,GAAgB,OAAOA,IAAeL,CAAe,KAKtE3B,EAAkB,GAAGE,gBAAkBF,EAAkB,GAAGE,iBAAmBiB,EAAarC,MAK9E8C,EAAYG,MAAK,SAAAC,GACjC,OAAOH,EAAMJ,SAASO,EACxB,KAKArQ,EAAKD,MAAM6P,YAAYG,EAAUC,GACnC,EAAChQ,EAEDsH,WAAa,WACXtH,EAAKoB,SAAS,CAAC8H,eAAe,GAChC,EAAClJ,EAEDkH,aAAe,WACblH,EAAKoB,SAAS,CAAC8H,eAAe,GAChC,EAAClJ,EAED8C,gBAAkB,SAACE,EAAWyG,GAC5BzJ,EAAKD,MAAM+C,gBAAgBE,EAAWyG,IACtChK,EAAAA,EAAAA,KACF,EAACO,EAEDwN,YAAc,SAAC/O,GACbA,EAAMsE,kBACFtE,EAAMyM,MAGZ,EAAClL,EAEDmD,cAAgB,SAAC1E,GACfA,EAAMoD,iBAEN,IAAI8N,EAAkB3P,EAAKD,MAAM4P,gBACjC,GAAmC,UAA/BA,EAAgB9F,YAAyD,OAA/B8F,EAAgB9F,WAC5D,MAAO,GAET7J,EAAKoL,mBAAmB3M,EAC1B,EAACuB,EAEDoL,mBAAqB,SAAC3M,EAAOgL,GAI3B,GAHAhL,EAAMoD,iBACNpD,EAAMsE,kBAED/C,EAAKD,MAAMmN,eAAhB,CAIA,IAAInM,EAAItC,EAAM6R,SAAY7R,EAAM8R,SAAW9R,EAAM8R,QAAQ,GAAGC,MACxDxP,EAAIvC,EAAMgS,SAAYhS,EAAM8R,SAAW9R,EAAM8R,QAAQ,GAAGG,MAExD1Q,EAAKD,MAAM4Q,OACb5P,GAAKf,EAAKD,MAAM4Q,MAEd3Q,EAAKD,MAAM6Q,OACb5P,GAAKhB,EAAKD,MAAM6Q,OAGlBnR,EAAAA,EAAAA,MAEA,IAAI0B,EAAWnB,EAAK2H,YAAY8B,GAE5BoH,EAAiB,CACnBjQ,GAAI,wBACJE,SAAU,CAAEC,EAAAA,EAAGC,EAAAA,GACftC,OAAQD,EAAMC,OACdwC,cAAeuI,EACftI,SAAUA,IAGZ5B,EAAAA,EAAAA,IAASsR,EAxBT,CAyBF,EAAC7Q,EAED2H,YAAc,SAAC8B,GACb,IAAItI,EAAW,GAETyK,EAAsEC,EAAAA,EAAtED,WAAYE,EAA0DD,EAAAA,EAA1DC,SAAUC,EAAgDF,EAAAA,EAAhDE,KAAMC,EAA0CH,EAAAA,EAA1CG,KAAMC,EAAoCJ,EAAAA,EAApCI,OAAQC,EAA4BL,EAAAA,EAA5BK,OAAQC,EAAoBN,EAAAA,EAApBM,gBAExD,IAAK1C,EACH,MAAO,CAACmC,EAAYE,GAIpB3K,EADuB,QAArBsI,EAAKD,OAAOhK,KACH,CAACoM,EAAYE,EAAUC,EAAMC,EAAMC,EAAQC,GAE3C,CAACD,EAAQC,EAAQH,EAAMC,EAAMG,GAG1C,IAAQC,EAAapM,EAAKD,MAAlBqM,SACRzC,EAAiD1G,EAAAA,EAAM2G,kBAAkBwC,GAAjEtC,EAAkBH,EAAlBG,mBAAoBC,EAAgBJ,EAAhBI,iBAC5B,IAAKD,EACH,OAAO3I,EAGTA,EAAW,GAEX,IAAA6I,EAAmFD,EAAiBF,WAApF0C,EAASvC,EAAjBwC,OAA2BrC,EAASH,EAAjBI,OAA2BqC,EAASzC,EAAjB0C,OAAyBC,EAAO3C,EAAb4C,KACjE,OAAKnD,GAKoB,QAArBA,EAAKD,OAAOhK,MACd+M,GAAapL,EAAS0L,KAAKjB,EAAYE,GAGzCa,GAAWxL,EAAS0L,KAAKd,GACzB5B,GAAahJ,EAAS0L,KAAKb,EAAMC,GACjCQ,GAAatL,EAAS0L,KAAKX,GAEF,QAArBzC,EAAKD,OAAOhK,MACd2B,EAAS0L,KAAKV,GAGThL,IAhBLoL,GAAapL,EAAS0L,KAAKjB,EAAYE,GAChC3K,EAgBX,EAACnB,EAEDuB,WAAa,WACXvB,EAAKsH,YACP,EAACtH,EAEDyB,WAAa,WACXzB,EAAKkH,cACP,EAvRElH,EAAKwB,MAAQ,CACX0H,eAAe,EACf+F,uBAAuB,GAEzB,IAAQ7C,EAAarM,EAAbqM,SACRpM,EAAK+O,QAAuB,OAAb3C,EACf,IAAAC,EAAiDpJ,EAAAA,EAAM2G,kBAAkBwC,GAAjEtC,EAAkBuC,EAAlBvC,mBAAoBC,EAAgBsC,EAAhBtC,iBAC5B,GAAID,EAAoB,CACtB,IAAQM,EAAWL,EAAiBF,WAA5BO,OACRpK,EAAK+O,QAAU3E,CACjB,CAAC,OAAApK,CACH,CAqTC,OArTAoD,EAAAA,EAAAA,GAAA4K,EAAA,EAAA3K,IAAA,SAAAC,MA8QD,WACE,OACE2E,EAAAA,EAAAA,MAAA,OACEvD,UAAS,kBAAAP,OAAqBZ,KAAK/B,MAAMyN,uBAAyB1L,KAAKwL,QAAW,iBAAmB,IACrGjB,OAAQvK,KAAKyH,WACb2C,YAAapK,KAAKqH,gBAClBgD,YAAarK,KAAKwH,gBAClByC,YAAajK,KAAKiK,YAClBrK,cAAeI,KAAKJ,cACpB8B,QAAS1B,KAAK4L,iBAAiBtK,SAAA,EAE/BL,EAAAA,EAAAA,KAACwE,EAAY,CACXoD,SAAU7I,KAAKxD,MAAMqM,SACrB3C,KAAMlG,KAAKxD,MAAM+Q,SAASC,KAC1B9D,YAAa1J,KAAKxD,MAAMkN,YACxBF,YA9SW,GA+SXG,eAAgB3J,KAAKxD,MAAMmN,eAC3BhE,cAAe3F,KAAK/B,MAAM0H,cAC1BK,YAAahG,KAAKgG,YAClBzG,gBAAiBS,KAAKxD,MAAM+C,gBAC5B0H,eAAgBjH,KAAKxD,MAAMyK,eAC3BD,eAAgBhH,KAAKxD,MAAMwK,eAC3BE,gBAAiBlH,KAAKkH,gBACtBnD,WAAY/D,KAAK+D,WACjBJ,aAAc3D,KAAK2D,aACnB4D,eAAgBvH,KAAKuH,eACrBE,WAAYzH,KAAKyH,WACjBJ,gBAAiBrH,KAAKqH,gBACtBG,gBAAiBxH,KAAKwH,gBACtBK,mBAAoB7H,KAAK6H,sBAE3B5G,EAAAA,EAAAA,KAAC9E,EAAAA,EAAW,CACVkB,GAAI,wBACJkC,gBAAiBS,KAAKT,gBACtBrB,WAAY8B,KAAK9B,WACjBF,WAAYgC,KAAKhC,eAIzB,KAACyM,CAAA,CApUW,CAAS9I,EAAAA,U,0ICNjB8L,EAAe,oBAEfC,EAAkB,SAAAtR,IAAAC,EAAAA,EAAAA,GAAAqR,EAAAtR,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAmR,GAEtB,SAAAA,EAAYlR,GAAQ,IAADC,EAOI,OAPJC,EAAAA,EAAAA,GAAA,KAAAgR,IACjBjR,EAAAH,EAAAK,KAAA,KAAMH,IA+CRmR,cAAgB,WACd,IAAIC,EAAa,GACXC,EAAWnS,SAASoS,iBAAiB,0BAA0B,GACrE,GAAID,EAAU,CACZ,IAAMxQ,EAAKwQ,EAASE,aAAa,MAC7BC,EAAU3Q,GAAMA,EAAG4Q,QAAQ,gBAAiB,IAChDD,EAAUA,EAAO,GAAApN,OAAMoN,EAAO,OAAApN,OAAMsN,EAAAA,IAASA,EAAAA,GAC7CxO,EAAAA,EAAMyO,eAAeH,EACvB,CAEA,IADA,IAAII,EAAc1S,SAASoS,iBAAiB,kDACnCO,EAAI,EAAGA,EAAID,EAAY/S,OAAQgT,IACtCT,EAAWtE,KAAK8E,EAAYC,GAAGC,WAEjC7R,EAAKmR,WAAaA,CACpB,EAACnR,EAED8R,YAAc,SAACrT,GACbA,EAAMoD,iBACNpD,EAAMsE,kBACN,IAAIgP,EAAO,GACX,GAA6B,MAAzBtT,EAAMC,OAAOsJ,QAAiB,CAEhC,IADA,IAAItJ,EAASD,EAAMC,OAAO8P,WACA,MAAnB9P,EAAOsJ,SACZtJ,EAASA,EAAO8P,WAElBuD,EAAOrT,EAAOsT,IAChB,MACED,EAAOtT,EAAMC,OAAOsT,KAEtBhS,EAAKD,MAAM+R,YAAYC,EACzB,EAAC/R,EAEDiS,gBAAkB,WAChB,IAEIC,EAFEC,EAAmBnS,EAAKoS,kBAAkBC,QAAQC,UAAY,IAChEC,EAAevS,EAAKmR,WAAWvS,OAEnC,GAAIuT,GAAoBnS,EAAKmR,WAAW,GAGtC,OAFAe,EAAmB,OACnBlS,EAAKoB,SAAS,CAAC8Q,iBAAkBA,IAGnC,GAAIC,EAAmBnS,EAAKmR,WAAWoB,EAAe,GAGpD,OAFAL,EAAmBlS,EAAKmR,WAAWvS,OAAS,OAC5CoB,EAAKoB,SAAS,CAAC8Q,iBAAkBA,IAGnC,IAAK,IAAIN,EAAI,EAAGA,EAAIW,EAAcX,IAChC,KAAIO,EAAmBnS,EAAKmR,WAAWS,IAAvC,CAGEM,EAAmBN,EAAI,EACvB,KACF,CAEF5R,EAAKoB,SAAS,CAAC8Q,iBAAkBA,GACnC,EAAClS,EAEDwS,iBAAmB,SAAChL,GAClB,IAAIiL,EAAKC,EAET,GAAiB,SAAblL,EAAKhI,MAAmBmT,EAAAA,GAAc,CAIxC,GAHAF,EAAMjL,EAAKoL,KAAKC,IACL,IAAIC,OAAOC,EAAAA,GAAa,QAAUC,EAAAA,GAAQ,gBAE9CC,KAAKR,GAAM,CAEhB,IAAIzN,EAAQyN,EAAIS,QAAQ,SACpBC,EAASV,EAAIS,QAAQ,KACzBR,EAAYD,EAAI5L,UAAU7B,EAAQ,EAAGmO,EACvC,KAAO,KAAI,WAAWF,KAAKR,KAAQ,SAASQ,KAAKR,GAK/C,OAJA,IAAMtF,EAAOnN,EAAKD,MAAMoN,KAClBiG,EAAejG,EAAK1B,MAAM,EAAG0B,EAAK5B,YAAY,MAAQ,IAAMkH,EAClEC,EAAYzP,EAAAA,EAAMoQ,cAAcD,EAGlC,CACA5L,EAAKoL,KAAKC,IAAME,EAAAA,GAAa,qCAAuCtB,EAAAA,GAAO,SAAWiB,CACxF,MAAO,GAAiB,QAAblL,EAAKhI,KAEd,GADAiT,EAAMjL,EAAKoL,KAAKZ,KACZ/O,EAAAA,EAAMqQ,mBAAmBb,EAAKO,EAAAA,IAChC,GAAI/P,EAAAA,EAAMsQ,uBAAuBd,EAAKO,EAAAA,IAAS,CAC7C,IAAI7F,EAAOlK,EAAAA,EAAMuQ,gCAAgCf,EAAKO,EAAAA,IAEtDxL,EAAKoL,KAAKZ,KAAOe,EAAAA,GAAa,cAAgBtB,EAAAA,GAAOtE,CACvD,MACE3F,EAAKoL,KAAKZ,KAAOS,EAAIjB,QAAQ,uCAAuC,SAACiC,EAAOC,EAAIC,EAAIC,GAClF,MAAM,GAANzP,OAAUuP,EAAE,MAAAvP,OAAK0P,EAAAA,GAAW,cAAA1P,OAAayP,EAAE,QAC7C,SAEG,GAAI3Q,EAAAA,EAAM6Q,kBAAkBrB,EAAKO,EAAAA,IAAS,CAC/C,IAAI7F,EAAOlK,EAAAA,EAAM8Q,2BAA2BtB,EAAKO,EAAAA,IAEjDxL,EAAKoL,KAAKZ,KAAOe,EAAAA,GAAa,cAAgBtB,EAAAA,GAAOtE,CACvD,CAGF,OAAO3F,CACT,EAACxH,EAEDgU,wBAA0B,SAAC1Q,GAEzB,OADeL,EAAAA,EAAMgR,oBAAoB3Q,EAAOtD,EAAKwS,iBAEvD,EAACxS,EAEDkU,eAAiB,WACf,IAAIC,GAAY,EAIhB,OAH6B,IAAzBnU,EAAKD,MAAMoU,YACbA,GAAY,GAEVnU,EAAKD,MAAMqU,QAEX5P,EAAAA,EAAAA,KAAC6P,EAAAA,GAAc,CACbC,QAASH,EACTI,aAAcC,EAAAA,GAAW,wBACzBC,gBAAiBzU,EAAKD,MAAM0U,gBAC5BvC,iBAAkBlS,EAAKwB,MAAM0Q,iBAC7B8B,wBAAyBhU,EAAKgU,2BAMlCxP,EAAAA,EAAAA,KAAC6P,EAAAA,GAAc,CACbC,QAASH,EACTI,aAAcC,EAAAA,GAAW,wBACzBC,gBAAiBzU,EAAKD,MAAM0U,gBAC5BvC,iBAAkBlS,EAAKwB,MAAM0Q,kBAGnC,EA/KElS,EAAKwB,MAAQ,CACX0Q,iBAAkB,GAEpBlS,EAAKoS,kBAAoBlN,EAAAA,YACzBlF,EAAK0U,MAAQ,GACb1U,EAAKmR,WAAa,GAAGnR,CACvB,CA0LC,OA1LAoD,EAAAA,EAAAA,GAAA6N,EAAA,EAAA5N,IAAA,oBAAAC,MAED,WAAqB,IAADK,EAAA,KAElBJ,KAAKmR,MAAQzV,SAASoS,iBAAiB,IAADlN,OAAK6M,EAAY,OACvDzN,KAAKmR,MAAMvE,SAAQ,SAAA4B,GACjBA,EAAK3R,iBAAiB,QAASuD,EAAKmO,YACtC,IAEAvO,KAAK2N,eACP,GAAC,CAAA7N,IAAA,4BAAAC,MAED,SAA0BsE,GAAY,IAADrD,EAAA,KAC/BhB,KAAKxD,MAAM0U,kBAAoB7M,EAAU6M,iBAI7ClR,KAAKmR,MAAMvE,SAAQ,SAAA4B,GACjBA,EAAKtR,oBAAoB,QAAS8D,EAAKuN,YACzC,GACF,GAAC,CAAAzO,IAAA,qBAAAC,MAED,WAAsB,IAADqR,EAAA,KAEnBpR,KAAKmR,MAAQzV,SAASoS,iBAAiB,IAADlN,OAAK6M,EAAY,OACvDzN,KAAKmR,MAAMvE,SAAQ,SAAA4B,GACjBA,EAAK3R,iBAAiB,QAASuU,EAAK7C,YACtC,IAC+B,IAA3BvO,KAAK4N,WAAWvS,QAClB2E,KAAK2N,eAET,GAAC,CAAA7N,IAAA,uBAAAC,MAED,WAAwB,IAADsR,EAAA,KAErBrR,KAAKmR,MAAMvE,SAAQ,SAAA4B,GACjBA,EAAKtR,oBAAoB,QAASmU,EAAK9C,YACzC,GACF,GAAC,CAAAzO,IAAA,SAAAC,MAqID,WACE,GAAIC,KAAKxD,MAAM8U,cACb,OAAOrQ,EAAAA,EAAAA,KAACsQ,EAAAA,EAAO,IAGjB,IAAIC,EAAgB,GAAA5Q,OAAMZ,KAAKxD,MAAMiT,OAAShC,EAAe,SAAWA,GACxE,OACExM,EAAAA,EAAAA,KAAA,OAAKI,IAAKrB,KAAK6O,kBAAmB1N,UAAU,sBAAsBsQ,SAAUzR,KAAK0O,gBAAgBgD,KAAK1R,MAAMsB,UAC1GoD,EAAAA,EAAAA,MAAA,OAAKvD,UAAWqQ,EAAiBlQ,SAAA,CAC9BtB,KAAKxD,MAAM8E,SACXtB,KAAK2Q,kBACNjM,EAAAA,EAAAA,MAAA,KAAGrH,GAAG,0BAAyBiE,SAAA,EAAE0D,EAAAA,EAAAA,IAAQ,oBAAoB,IAAEhF,KAAKxD,MAAMmV,kBAAkB,MAAE1Q,EAAAA,EAAAA,KAAA,QAAAK,SAAOtB,KAAKxD,MAAMoV,sBAIxH,KAAClE,CAAA,CApMqB,CAAS/L,EAAAA,WA4MjCmP,EAAAA,GAAetL,aALM,CACnBqL,QAAQ,GAMV,K,wQCzNMgB,EAAQ,WAEZ,SAAAA,EAAApR,GAAyC,IAA3B6D,EAAI7D,EAAJ6D,KAAMmK,EAAIhO,EAAJgO,KAAMxD,EAAUxK,EAAVwK,YAAUvO,EAAAA,EAAAA,GAAA,KAAAmV,GAClC7R,KAAKsE,KAAOA,EACZtE,KAAKyO,KAAOA,EACZzO,KAAKiL,WAAaA,GAAc,KAChCjL,KAAKsB,SAAW,EAClB,CAWC,OAXAzB,EAAAA,EAAAA,GAAAgS,EAAA,EAAA/R,IAAA,YAAAC,MAED,SAAUkL,GACRjL,KAAKiL,WAAaA,CACpB,GAAC,CAAAnL,IAAA,cAAAC,MAED,SAAY+R,GAAW,IAADrV,EAAA,KACpBqV,EAASlF,SAAQ,SAAC1G,GAChBA,EAAK6L,UAAUtV,EACjB,IACAuD,KAAKsB,SAAWwQ,CAClB,KAACD,CAAA,CAlBW,GAqBRG,EAAkB,SAAA5V,IAAAC,EAAAA,EAAAA,GAAA2V,EAAA5V,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAyV,GAEtB,SAAAA,EAAYxV,GAAQ,IAAD4D,EAMf,OANe1D,EAAAA,EAAAA,GAAA,KAAAsV,IACjB5R,EAAA9D,EAAAK,KAAA,KAAMH,IA4BRyV,eAAiB,WAEf7R,EAAK+Q,MAAQzV,SAASoS,iBAAiB,IAADlN,OADjB,mBACkC,OACvDR,EAAK+Q,MAAMvE,SAAQ,SAAA4B,GACjBA,EAAK3R,iBAAiB,QAASuD,EAAKmO,YACtC,GACF,EAACnO,EAED8R,iBAAmB,WACjB9R,EAAK+Q,MAAMvE,SAAQ,SAAA4B,GACjBA,EAAKtR,oBAAoB,QAASkD,EAAKmO,YACzC,GACF,EAACnO,EAEDmO,YAAc,SAACrT,GACbA,EAAMoD,iBACN,IAAMoL,EAAcxO,EAAMC,OAAO4S,aAAa,aAC9C,GAAIrE,IAAgBtJ,EAAKnC,MAAMyL,YAA/B,CAEWA,GACTtJ,EAAKvC,SAAS,CAAE6L,YAAaA,IAE/B,IAAM8E,EAAOpO,EAAK+R,QAAQjX,EAAMC,QAC5BqT,GAAMpO,EAAK5D,MAAM+R,YAAYC,EAFjC,CAGF,EAACpO,EAED+R,QAAU,SAACjM,GACT,IAAMzB,EAAUyB,EAAKzB,QACrB,GAAKA,GAAuB,SAAZA,EAChB,MAAgB,MAAZA,EACKyB,EAAKuI,KAELrO,EAAK+R,QAAQjM,EAAK+E,WAE7B,EAAC7K,EAED6O,iBAAmB,SAAChL,GAEhB,IAAIiL,EADN,GAAiB,QAAbjL,EAAKhI,MAAgC,UAAdgI,EAAKhI,KAI9B,GAAiB,SAAbgI,EAAKhI,MAAmBmT,EAAAA,GAAc,CAIxC,GAHAF,EAAMjL,EAAKoL,KAAKC,KACL,IAAIC,OAAOC,EAAAA,GAAa,QAAUC,EAAAA,GAAQ,gBAE7CC,KAAKR,GACX,OAGF,IAAIzN,EAAQyN,EAAIS,QAAQ,SACpBC,EAASV,EAAIS,QAAQ,KACnBR,EAAYD,EAAI5L,UAAU7B,EAAQ,EAAGmO,GAE3C3L,EAAKoL,KAAKC,IAAME,EAAAA,GAAa,qCAAuCtB,EAAAA,GAAO,SAAWiB,CACxF,MAEK,GAAiB,QAAblL,EAAKhI,KAAgB,CAC5BiT,EAAMjL,EAAKoL,KAAKZ,KAOhB,GAHS,IAAIc,OAFI,wLAKTG,KAAKR,IAIR,GAAIxP,EAAAA,EAAMsQ,uBAAuBd,EAAKO,EAAAA,IAAS,CAClD,IAAI7F,EAAOlK,EAAAA,EAAMuQ,gCAAgCf,EAAKO,EAAAA,IAEtDxL,EAAKoL,KAAKZ,KAAOe,EAAAA,GAAa,cAAgBtB,EAAAA,GAAOtE,CACvD,MAEK,GAAIlK,EAAAA,EAAM6Q,kBAAkBrB,EAAKO,EAAAA,IAAS,CAC7C,IAAI7F,EAAOlK,EAAAA,EAAM8Q,2BAA2BtB,EAAKO,EAAAA,IAEjDxL,EAAKoL,KAAKZ,KAAOe,EAAAA,GAAa,cAAgBtB,EAAAA,GAAOtE,CACvD,OAbE3F,EAAKoL,KAAKZ,KAAOe,EAAAA,GAAa,cAAgBtB,EAAAA,GAAO,IAAMgB,CAc/D,CAGF,OAAOjL,CACT,EAAC7D,EAEDgS,YAAc,WACZ,IAAIrS,GAAQsS,EAAAA,EAAAA,IAAYjS,EAAK5D,MAAM8V,cAClB5S,EAAAA,EAAMgR,oBAAoB3Q,EAAOK,EAAK6O,kBAC9CrC,SAAQ,SAAC1G,GAChB,GAAkB,mBAAdA,EAAKjK,MAA2C,iBAAdiK,EAAKjK,KAAyB,CAClE,IAAIsW,EAAWnS,EAAKoS,iBAAiBtM,EAAK5E,SAAUlB,EAAKmS,UACzDnS,EAAKqS,YAAYF,EAAU,KAC3BnS,EAAKmS,SAAWA,CAClB,CACF,GACF,EAACnS,EAEDqS,YAAc,SAACvM,EAAMwM,GACnB,IAAIpO,EAAO4B,EAAK5B,KACZsF,EAA0B,MAAnB8I,EAAyBA,EAAiBpO,EAAOoO,EAAiB,IAAMpO,EACnF4B,EAAK0D,KAAOA,EACR1D,EAAK5E,SAASjG,OAAS,GACzB6K,EAAK5E,SAASsL,SAAQ,SAAA+F,GACpBvS,EAAKqS,YAAYE,EAAO/I,EAC1B,GAEJ,EAEAxJ,EACAoS,iBAAmB,SAACI,EAAYC,GAC9B,IAAIC,EAAYF,EAAWrR,KAAI,SAACwR,GAE9B,GAAkC,IAA9BA,EAAUzR,SAASjG,QAAgD,mBAA/B0X,EAAUzR,SAAS,GAAGrF,MAA4D,iBAA/B8W,EAAUzR,SAAS,GAAGrF,KAU/G,OAAI8W,EAAUzR,SAAS,IAAsC,cAA/ByR,EAAUzR,SAAS,GAAGrF,KAC3CmE,EAAK4S,eAAeD,EAAUzR,SAAS,IAGvC,IAAIuQ,EAAS,CAAEvN,KAAM,GAAImK,KAAM,KAZxC,IAAMwE,EAAgBF,EAAUzR,SAAS,GACnC4R,EAAW9S,EAAK4S,eAAeC,GAE/BE,EAAWJ,EAAUzR,SAAS,GAEpC,OAAOlB,EAAKoS,iBAAiBW,EAAS7R,SAAU4R,EAUpD,IAEA,OADAL,EAAeO,YAAYN,GACpBD,CACT,EAEAzS,EACA4S,eAAiB,SAACC,GAChB,IAAIC,EACJ,GAAID,EAAc3R,SAAS,IAAyC,SAAnC2R,EAAc3R,SAAS,GAAGrF,KAAiB,CAE1E,IAAMoX,EAAWJ,EAAc3R,SAAS,GAClCgS,EAAWD,EAAS/R,SAAS,GAC/BgD,EAAOgP,EAAWA,EAASC,KAAO,GACtCL,EAAY,IAAIrB,EAAS,CAAEvN,KAAMA,EAAMmK,KAAM4E,EAAShE,KAAKZ,MAC7D,MAAO,GAAIwE,EAAc3R,SAAS,GAAI,CAEpC,IAAMgS,EAAWL,EAAc3R,SAAS,GACpCgD,EAAOgP,EAASC,KAAOD,EAASC,KAAO,GAC3CL,EAAW,IAAIrB,EAAS,CAAEvN,KAAMA,EAAMmK,KAAM,IAC9C,MACEyE,EAAW,IAAIrB,EAAS,CAAEvN,KAAM,GAAImK,KAAM,KAE5C,OAAOyE,CACT,EAnLE9S,EAAK+Q,MAAQ,GACb/Q,EAAKmS,SAAW,IAAIV,EAAS,CAAEvN,KAAM,GAAImK,KAAM,KAC/CrO,EAAKnC,MAAQ,CACXyL,YAAa,IACbtJ,CACJ,CAsLC,OAtLAP,EAAAA,EAAAA,GAAAmS,EAAA,EAAAlS,IAAA,qBAAAC,MAED,WACEC,KAAKoS,aACP,GAAC,CAAAtS,IAAA,oBAAAC,MAED,WACEC,KAAKiS,gBACP,GAAC,CAAAnS,IAAA,4BAAAC,MAED,WACEC,KAAKkS,kBACP,GAAC,CAAApS,IAAA,qBAAAC,MAED,WACEC,KAAKiS,gBACP,GAAC,CAAAnS,IAAA,uBAAAC,MAED,WACEC,KAAKkS,kBACP,GAAC,CAAApS,IAAA,SAAAC,MA4JD,WACE,OACEkB,EAAAA,EAAAA,KAAA,OAAKE,UAAU,gBAAeG,UAC5BL,EAAAA,EAAAA,KAACuS,EAAU,CAACtN,KAAMlG,KAAKuS,SAAUN,eAAgBjS,KAAKiS,eAAgBvI,YAAa1J,KAAK/B,MAAMyL,eAGpG,KAACsI,CAAA,CA/LqB,CAASrQ,EAAAA,WA0M3B6R,EAAU,SAAAC,IAAApX,EAAAA,EAAAA,GAAAmX,EAAAC,GAAA,IAAAC,GAAAnX,EAAAA,EAAAA,GAAAiX,GAEd,SAAAA,EAAYhX,GAAQ,IAADwE,EAIf,OAJetE,EAAAA,EAAAA,GAAA,KAAA8W,IACjBxS,EAAA0S,EAAA/W,KAAA,KAAMH,IAMRmX,eAAiB,WACf3S,EAAKnD,SAAS,CAAE+V,UAAW5S,EAAK/C,MAAM2V,WAAY,WAC5C5S,EAAK/C,MAAM2V,UAAU5S,EAAKxE,MAAMyV,gBACtC,GACF,EAACjR,EAED6S,WAAa,SAAAC,GAA2B,IAAxBrF,EAAIqF,EAAJrF,KAAMnK,EAAIwP,EAAJxP,KAAMsF,EAAIkK,EAAJlK,KACpBzI,EAAS,oBAAAP,OAAuBgJ,IAAS5I,EAAKxE,MAAMkN,YAAc,6BAA+B,IACvG,OAAI+E,GAAQnK,GACHrD,EAAAA,EAAAA,KAAA,OAAKE,UAAWA,EAAUG,UAACL,EAAAA,EAAAA,KAAA,KAAGwN,KAAMA,EAAM,YAAW7E,EAAMlI,QAASV,EAAK2S,eAAgB5O,MAAOT,EAAKhD,SAAEgD,MACrGA,GACFrD,EAAAA,EAAAA,KAAA,OAAKE,UAAU,mBAAkBG,UAACL,EAAAA,EAAAA,KAAA,QAAMS,QAASV,EAAK2S,eAAgB5O,MAAOT,EAAKhD,SAAEgD,MAEpF,IAEX,EApBEtD,EAAK/C,MAAQ,CACX2V,UAAU,GACV5S,CACJ,CAoDC,OApDAnB,EAAAA,EAAAA,GAAA2T,EAAA,EAAA1T,IAAA,oBAAAC,MAmBD,WAAqB,IAADqR,EAAA,KACdpR,KAAKxD,MAAM0J,OAASlG,KAAKxD,MAAM0J,KAAK+E,YACtCjL,KAAKnC,SAAS,CAAE+V,UAAU,IAAQ,WAChCxC,EAAK5U,MAAMyV,gBACb,GAEJ,GAAC,CAAAnS,IAAA,SAAAC,MAED,WAAU,IAADsR,EAAA,KACCnL,EAASlG,KAAKxD,MAAd0J,KACR,OAAIA,EAAK5E,SAASjG,OAAS,GAEvBqJ,EAAAA,EAAAA,MAAC/C,EAAAA,SAAc,CAAAL,SAAA,CACZ4E,EAAK+E,aACJvG,EAAAA,EAAAA,MAAC/C,EAAAA,SAAc,CAAAL,SAAA,EACbL,EAAAA,EAAAA,KAAA,QAAME,UAAU,aAAaO,QAAS1B,KAAK2T,eAAerS,SACvDtB,KAAK/B,MAAM2V,UAAW3S,EAAAA,EAAAA,KAAA,KAAGE,UAAU,sBAA0BF,EAAAA,EAAAA,KAAA,KAAGE,UAAU,wBAE5EnB,KAAK6T,WAAW3N,MAGpBlG,KAAK/B,MAAM2V,UAAY1N,EAAK5E,SAASC,KAAI,SAACoR,EAAOlR,GAChD,OACER,EAAAA,EAAAA,KAAA,OAAKE,UAAU,yBAAwBG,UACrCL,EAAAA,EAAAA,KAACuS,EAAU,CAACtN,KAAMyM,EAAOV,eAAgBZ,EAAK7U,MAAMyV,eAAgBvI,YAAa2H,EAAK7U,MAAMkN,eADjDjI,EAIjD,OAIGzB,KAAK6T,WAAW3N,EAE3B,KAACsN,CAAA,CA3Da,CAAS7R,EAAAA,WAgEzB,IC1NA,EA3De,SAAAoS,IAAA1X,EAAAA,EAAAA,GAAA2X,EAAAD,GAAA,IAAAzX,GAAAC,EAAAA,EAAAA,GAAAyX,GAEb,SAAAA,EAAYxX,GAAQ,IAADC,EAEW,OAFXC,EAAAA,EAAAA,GAAA,KAAAsX,IACjBvX,EAAAH,EAAAK,KAAA,KAAMH,IAIRyX,gBAAkB,WAChB,OACEhT,EAAAA,EAAAA,KAACiT,EAAAA,SAAQ,CAAA5S,UACPoD,EAAAA,EAAAA,MAAA,OAAKvD,UAAU,uBAAsBG,SAAA,EACnCL,EAAAA,EAAAA,KAAA,OAAKN,MAAO,CAACwT,UAAW,UACxBlT,EAAAA,EAAAA,KAAC+Q,EAAkB,CACjBM,aAAc7V,EAAKD,MAAM8V,aACzB/D,YAAa9R,EAAKD,MAAM+R,kBAKlC,EAAC9R,EAED2X,eAAiB,WACf,OACEnT,EAAAA,EAAAA,KAACiT,EAAAA,SAAQ,CAAA5S,UACPL,EAAAA,EAAAA,KAAA,OAAKE,UAAU,uBAAsBG,SAClC7E,EAAKD,MAAM+Q,WACVtM,EAAAA,EAAAA,KAACwJ,EAAAA,EAAQ,CACP8C,SAAU9Q,EAAKD,MAAM+Q,SACrB7D,YAAajN,EAAKD,MAAMkN,YACxBC,eAAgBlN,EAAKkN,eACrB3D,YAAavJ,EAAKD,MAAMwJ,YACxBgB,eAAgBvK,EAAKD,MAAMwK,eAC3BC,eAAgBxK,EAAKD,MAAMyK,oBAMvC,EAlCExK,EAAKkN,gBAAiB,EAAMlN,CAC9B,CAiDC,OAjDAoD,EAAAA,EAAAA,GAAAmU,EAAA,EAAAlU,IAAA,SAAAC,MAmCD,WACE,OACE2E,EAAAA,EAAAA,MAAA,OAAKvD,UAAS,8BAAAP,OAAgCZ,KAAKxD,MAAM6X,aAAe,GAAI,aAAc/S,SAAA,EACxFL,EAAAA,EAAAA,KAAA,OAAKE,UAAU,2BAA0BG,UACvCL,EAAAA,EAAAA,KAACqT,EAAAA,EAAI,CAACC,iBAAkBvU,KAAKxD,MAAMgY,iBAErC9P,EAAAA,EAAAA,MAAA,OAAKrH,GAAG,WAAW8D,UAAU,gBAAgBD,KAAK,aAAYI,SAAA,CAC3DtB,KAAKxD,MAAMiY,oBAAqBxT,EAAAA,EAAAA,KAACsQ,EAAAA,EAAO,KACvCvR,KAAKxD,MAAMiY,mBAAqBzU,KAAKxD,MAAMkY,WAAa1U,KAAKiU,mBAC7DjU,KAAKxD,MAAMiY,oBAAsBzU,KAAKxD,MAAMkY,WAAa1U,KAAKoU,iBAC9DO,EAAAA,IAAYrO,EAAAA,KAAerF,EAAAA,EAAAA,KAAA,OAAKE,UAAU,gBAAeG,UAACL,EAAAA,EAAAA,KAAA,KAAGwN,KAAMmG,EAAAA,GAAW,WAAanF,EAAAA,GAAS,IAAMvB,EAAAA,GAAO,IAAK/M,UAAU,sCAAqCG,UAAE0D,EAAAA,EAAAA,IAAQ,0BAIzL,KAACgP,CAAA,CAtDY,CAASa,EAAAA,W,WCmDxB,EA9DqB,SAAAzY,IAAAC,EAAAA,EAAAA,GAAAyY,EAAA1Y,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAuY,GAEnB,SAAAA,EAAYtY,GAAQ,IAADC,EAIf,OAJeC,EAAAA,EAAAA,GAAA,KAAAoY,IACjBrY,EAAAH,EAAAK,KAAA,KAAMH,IAMRkJ,aAAe,WACbjJ,EAAKoB,SAAS,CAACkX,WAAW,GAC5B,EAACtY,EAEDsJ,aAAe,WACbtJ,EAAKoB,SAAS,CAACkX,WAAW,GAC5B,EAACtY,EAEDmD,cAAgB,SAAC1E,GACfA,EAAMoD,iBACNpD,EAAMsE,iBACR,EAAC/C,EAEDuY,cAAgB,SAAC5X,GACfA,EAAEkB,iBACF7B,EAAKD,MAAMwY,cAAcvY,EAAKD,MAAMoO,OACtC,EArBEnO,EAAKwB,MAAQ,CACX8W,WAAW,GACXtY,CACJ,CAkDC,OAlDAoD,EAAAA,EAAAA,GAAAiV,EAAA,EAAAhV,IAAA,SAAAC,MAoBD,WACE,IAAAwE,EAAuBvE,KAAKxD,MAAtBoN,EAAIrF,EAAJqF,KAAMgB,EAAMrG,EAANqG,OACR6D,EAAOmG,EAAAA,GAAW,YAAclV,EAAAA,EAAMuV,SAASrL,EAAMgB,EAAOtG,MAC5D4Q,EAAUxV,EAAAA,EAAMyV,cAAcvK,GAGlC,OADkBlL,EAAAA,EAAM0V,aAEtB1Q,EAAAA,EAAAA,MAAA,MAAIvD,UAAWnB,KAAK/B,MAAM8W,UAAY,eAAiB,GAAIrP,aAAc1F,KAAK0F,aAAcK,aAAc/F,KAAK+F,aAAcnG,cAAeI,KAAKJ,cAAc0B,SAAA,EAC7JL,EAAAA,EAAAA,KAAA,MAAIE,UAAU,cAAaG,UACzBL,EAAAA,EAAAA,KAAA,OAAKqO,IAAK4F,EAAS9V,MAAM,KAAKiW,IAAI,QAEpCpU,EAAAA,EAAAA,KAAA,MAAIE,UAAU,OAAMG,UAClBL,EAAAA,EAAAA,KAAA,KAAGwN,KAAMA,EAAM/M,QAAS1B,KAAKgV,cAAc1T,SAAEsJ,EAAOtG,UAEtDrD,EAAAA,EAAAA,KAAA,MAAAK,SAAKsJ,EAAO0K,QACZrU,EAAAA,EAAAA,KAAA,MAAAK,SAAKsJ,EAAO2K,qBAGd7Q,EAAAA,EAAAA,MAAA,MAAApD,SAAA,EACEL,EAAAA,EAAAA,KAAA,MAAIE,UAAU,cAAaG,UACzBL,EAAAA,EAAAA,KAAA,OAAKqO,IAAK4F,EAAS9V,MAAM,KAAKiW,IAAI,QAEpC3Q,EAAAA,EAAAA,MAAA,MAAApD,SAAA,EACEL,EAAAA,EAAAA,KAAA,KAAGwN,KAAMA,EAAM/M,QAAS1B,KAAKgV,cAAc1T,SAAEsJ,EAAOtG,QACpDrD,EAAAA,EAAAA,KAAA,UACAA,EAAAA,EAAAA,KAAA,QAAME,UAAU,iBAAgBG,SAAEsJ,EAAO0K,QACzCrU,EAAAA,EAAAA,KAAA,QAAME,UAAU,iBAAgBG,SAAEsJ,EAAO2K,sBAIjD,KAACT,CAAA,CAzDkB,CAASnT,EAAAA,WCCxB6T,EAAe,SAAApZ,IAAAC,EAAAA,EAAAA,GAAAmZ,EAAApZ,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAiZ,GAAA,SAAAA,IAAA,OAAA9Y,EAAAA,EAAAA,GAAA,KAAA8Y,GAAAlZ,EAAAuG,MAAA,KAAAzH,UAAA,CA8BlB,OA9BkByE,EAAAA,EAAAA,GAAA2V,EAAA,EAAA1V,IAAA,SAAAC,MAEnB,WAAU,IAADtD,EAAA,KACD2Y,EAAY1V,EAAAA,EAAM0V,YACxB,OACE1Q,EAAAA,EAAAA,MAAA,SAAOvD,UAAS,eAAAP,OAAiBwU,EAAY,GAAI,sBAAuB9T,SAAA,EACtEL,EAAAA,EAAAA,KAAA,SAAAK,SACG8T,GACC1Q,EAAAA,EAAAA,MAAA,MAAApD,SAAA,EACEL,EAAAA,EAAAA,KAAA,MAAIN,MAAO,CAACvB,MAAO,SACnB6B,EAAAA,EAAAA,KAAA,MAAIN,MAAO,CAACvB,MAAO,OAAOkC,UAAE0D,EAAAA,EAAAA,IAAQ,WACpC/D,EAAAA,EAAAA,KAAA,MAAIN,MAAO,CAACvB,MAAO,OAAOkC,UAAE0D,EAAAA,EAAAA,IAAQ,WACpC/D,EAAAA,EAAAA,KAAA,MAAIN,MAAO,CAACvB,MAAO,OAAOkC,UAAE0D,EAAAA,EAAAA,IAAQ,qBAGtCN,EAAAA,EAAAA,MAAA,MAAApD,SAAA,EACEL,EAAAA,EAAAA,KAAA,MAAI7B,MAAM,SACV6B,EAAAA,EAAAA,KAAA,MAAI7B,MAAM,cAIhB6B,EAAAA,EAAAA,KAAA,SAAAK,SACoC,IAAjCtB,KAAKxD,MAAMiZ,WAAWpa,QAAgB2E,KAAKxD,MAAMiZ,WAAWlU,KAAI,SAACqJ,EAAQnJ,GACxE,OACER,EAAAA,EAAAA,KAAC6T,EAAe,CAAalL,KAAMnN,EAAKD,MAAMoN,KAAMgB,OAAQA,EAAQoK,cAAevY,EAAKD,MAAMwY,eAAxEvT,EAE1B,QAIR,KAAC+T,CAAA,CA9BkB,CAAS7T,EAAAA,WAmC9B,I,iCCnBM+T,EAAS,SAAA3B,IAAA1X,EAAAA,EAAAA,GAAAqZ,EAAA3B,GAAA,IAAAzX,GAAAC,EAAAA,EAAAA,GAAAmZ,GAAA,SAAAA,IAAA,IAAAjZ,GAAAC,EAAAA,EAAAA,GAAA,KAAAgZ,GAAA,QAAAjT,EAAArH,UAAAC,OAAAqH,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAAxH,UAAAwH,GA+CX,OA/CWnG,EAAAH,EAAAK,KAAAkG,MAAAvG,EAAA,OAAAsE,OAAA8B,KAEbiT,YAAc,WACZlZ,EAAKD,MAAMmZ,aACb,EAAClZ,EAEDmZ,YAAc,SAACxY,GACbA,EAAEkB,iBACF,IAAI4Q,EAAM0F,EAAAA,GAAW,OAASnF,EAAAA,GAAS,QAAUhT,EAAKD,MAAMoN,KAAO,aACnErO,OAAOsa,KAAK3G,EACd,EAACzS,EAEDqZ,kBAAoB,SAAC1Y,GACnB,IAAIwM,EAAOlK,EAAAA,EAAMC,aAAavC,EAAG,QACjCX,EAAKD,MAAMsZ,kBAAkBlM,EAC/B,EAACnN,EAEDsZ,cAAgB,WACd,IAAIpJ,EAAQlQ,EAAKD,MAAMoN,KAAKoM,MAAM,KAC9BC,EAAW,GA2Bf,OA1BetJ,EAAMpL,KAAI,SAAC0C,EAAMxC,GAC9B,MAAa,KAATwC,EACK,KAELxC,IAAWkL,EAAMtR,OAAS,GAE1BqJ,EAAAA,EAAAA,MAACwP,EAAAA,SAAQ,CAAA5S,SAAA,EACPL,EAAAA,EAAAA,KAAA,QAAME,UAAU,aAAYG,SAAC,OAC7BL,EAAAA,EAAAA,KAAA,QAAME,UAAU,iBAAgBG,SAAE2C,MAFrBxC,IAMjBwU,GAAY,IAAMhS,GAEhBS,EAAAA,EAAAA,MAACwP,EAAAA,SAAQ,CAAA5S,SAAA,EACPL,EAAAA,EAAAA,KAAA,QAAME,UAAU,aAAYG,SAAC,OAC7BL,EAAAA,EAAAA,KAAA,KACEE,UAAU,YACV,YAAW8U,EACXvU,QAASjF,EAAKqZ,kBAAkBxU,SAC/B2C,MANUxC,GAWrB,GAEF,EAAChF,CAAC,CAqED,OArEAoD,EAAAA,EAAAA,GAAA6V,EAAA,EAAA5V,IAAA,SAAAC,MAGD,WACE,IAAMmW,EAAoBlW,KAAKxD,MAAzB0Z,gBACAC,GAAclV,EAAAA,EAAAA,KAAA,OAAKE,UAAU,kBAAiBG,UAAE0D,EAAAA,EAAAA,IAAQ,4BACxDoR,EAAgBpW,KAAKxD,MAAM6Z,YAAcrW,KAAKxD,MAAM8Z,eAAiBtW,KAAKxD,MAAM+Z,WACtF,OACE7R,EAAAA,EAAAA,MAAA,OAAKvD,UAAU,6BAA4BG,SAAA,EACzCL,EAAAA,EAAAA,KAAA,OAAKE,UAAU,uBAAsBG,SAAEtB,KAAKxD,MAAMwR,WAClDtJ,EAAAA,EAAAA,MAAA,OAAKvD,UAAS,8BAAAP,OAA0D,OAA1BZ,KAAKxD,MAAM8J,WAAsB,mBAAqB,IAAKhF,SAAA,EACrGqT,EAAAA,KACAjQ,EAAAA,EAAAA,MAACwP,EAAAA,SAAQ,CAAA5S,SAAA,EACPL,EAAAA,EAAAA,KAAA,OAAKE,UAAU,mBAAkBG,UAC/BL,EAAAA,EAAAA,KAAA,QAAME,UAAU,uDAAuD4D,MAAM,gBAAgBrD,QAAS1B,KAAK2V,iBAE7G1U,EAAAA,EAAAA,KAAA,OAAKE,UAAU,iBAAgBG,SAC5BkV,EAAAA,KACCvV,EAAAA,EAAAA,KAACwV,EAAAA,EAAM,CAACC,UAAU,EAAMjH,OAAQA,EAAAA,GAAQyG,gBAAiBA,EAAiBS,aAAa3R,EAAAA,EAAAA,IAAQ,uBAKtG2P,EAAAA,KACCjQ,EAAAA,EAAAA,MAACwP,EAAAA,SAAQ,CAAA5S,SAAA,EACPoD,EAAAA,EAAAA,MAAA,OAAKvD,UAAU,mBAAkBG,SAAA,EAC/BL,EAAAA,EAAAA,KAAA,QAAME,UAAU,uDAAuD4D,MAAM,gBAAgBrD,QAAS1B,KAAK2V,cACjF,MAAzB3V,KAAKxD,MAAM8J,aACV5G,EAAAA,EAAM0V,aACJnU,EAAAA,EAAAA,KAAA,UAAQE,UAAU,mCAAmC4D,OAAOC,EAAAA,EAAAA,IAAQ,QAAStD,QAAS1B,KAAK4V,YAAYtU,UAAE0D,EAAAA,EAAAA,IAAQ,WACjH/D,EAAAA,EAAAA,KAAA,QAAME,UAAU,uCAAuC4D,OAAOC,EAAAA,EAAAA,IAAQ,QAAStD,QAAS1B,KAAK4V,YAAajV,MAAO,CAAC,SAAY,iBAGpI+D,EAAAA,EAAAA,MAAA,OAAKvD,UAAU,iBAAgBG,SAAA,CAC5BkV,EAAAA,KACCvV,EAAAA,EAAAA,KAACwV,EAAAA,EAAM,CAACC,UAAU,EAAMjH,OAAQA,EAAAA,GAAQyG,gBAAiBA,EAAiBS,aAAa3R,EAAAA,EAAAA,IAAQ,mBAEjG/D,EAAAA,EAAAA,KAAC2V,EAAAA,EAAY,KACb3V,EAAAA,EAAAA,KAAC4V,EAAAA,EAAO,cAKhB5V,EAAAA,EAAAA,KAAA,OAAKE,UAAU,oBAAmBG,UAChCoD,EAAAA,EAAAA,MAAA,OAAKvD,UAAS,oBAAAP,OAAsBwV,EAAgB,WAAa,IAAK9U,SAAA,EAClEtB,KAAKxD,MAAM6Z,WAAaF,EACzBnW,KAAKxD,MAAM6Z,WAAarW,KAAKxD,MAAM8Z,gBAAiBrV,EAAAA,EAAAA,KAACsQ,EAAAA,EAAO,IAC5D6E,IACCnV,EAAAA,EAAAA,KAACyM,EAAAA,EAAkB,CACjBwD,gBAAiBlR,KAAKxD,MAAMwR,QAC5BsD,cAAetR,KAAKxD,MAAM8Z,cAC1B1E,aAAgB5R,KAAKxD,MAAMoV,aAC3BD,kBAAmB3R,KAAKxD,MAAMmV,kBAC9BpD,YAAavO,KAAKxD,MAAM+R,YACxBsC,QAAQ,EACRjH,KAAM5J,KAAKxD,MAAMoN,QAGlB5J,KAAKxD,MAAM8Z,gBAAkBtW,KAAKxD,MAAM+Z,aACzCtV,EAAAA,EAAAA,KAACuU,EAAe,CACd5L,KAAM5J,KAAKxD,MAAMoN,KACjB6L,WAAYzV,KAAKxD,MAAMiZ,WACvBT,cAAehV,KAAKxD,MAAMwY,uBAOxC,KAACU,CAAA,CApHY,CAASb,EAAAA,WAyHxB,I,2BChIAiC,IAAAA,OAAcC,EAAAA,IAAM,IAEdC,EAAI,SAAAjD,IAAA1X,EAAAA,EAAAA,GAAA2a,EAAAjD,GAAA,IAAAzX,GAAAC,EAAAA,EAAAA,GAAAya,GACR,SAAAA,EAAYxa,GAAQ,IAADC,EAuBS,OAvBTC,EAAAA,EAAAA,GAAA,KAAAsa,IACjBva,EAAAH,EAAAK,KAAA,KAAMH,IA2CRya,cAAgB,SAACC,GACXC,EAAAA,GACF1a,EAAK2a,iBAKPF,EAAwB,SAAV/Q,EAAAA,GAAmB,IAAM+Q,EACvCza,EAAK4a,yBAAyBH,GAChC,EAACza,EAED6a,aAAe,SAACJ,GAEd,GADAza,EAAK8a,cAAgB7b,SAAS8b,eAAe,qBAC/B,UAAVrR,EAAAA,GASJ,GAFA1J,EAAKgb,sBAES,SAAVtR,EAAAA,GAKJ,GAAc,SAAVA,EAAAA,IAAoC,aAAhB+Q,GAKxB,GAAc,SAAV/Q,EAAAA,GAAkB,CACpB1J,EAAKoB,SAAS,CAACwY,WAAW,IAC1B,IAAIqB,EAAU9C,EAAAA,GAAW,aAAe1G,EAAAA,GAAOxO,EAAAA,EAAMiY,WAAWT,GAChE3b,OAAOqc,QAAQC,UAAU,CAAC3I,IAAKwI,EAAS9N,KAAMsN,GAAcA,EAAaQ,EAC3E,OAREjb,EAAKqb,QAAQ,UALbrb,EAAKqb,QAAQZ,QARbza,EAAKoB,SAAS,CAAC+L,KAAMsN,GAsBzB,EAACza,EAED2a,cAAgB,WACdW,EAAAA,EAAWC,YAAY9J,EAAAA,GAAM,KAAK+J,MAAK,SAAAC,GACrC,IAAIC,EAAO1b,EAAKwB,MAAMsP,SACtB9Q,EAAK2b,2BAA2BF,EAAI7I,KAAKgJ,YAAaF,EAAK3K,MAC3D,IAAIkH,EAAYyD,EAAKG,cAAc7b,EAAK8b,WACxCR,EAAAA,EAAWS,mBAAmBtK,EAAAA,GAAMwG,EAAU9K,MAAMqO,MAAK,SAAAC,GACvDzb,EAAKoB,SAAS,CACZ0P,SAAU4K,EACVzD,UAAWA,EACXpC,aAAc4F,EAAI7I,KAAKrB,QACvByG,mBAAmB,GAEvB,GACF,IAAGgE,OAAM,WACPhc,EAAKoB,SAAS,CAAC6a,cAAc,GAC/B,GACF,EAACjc,EAEDqb,QAAU,SAACa,GACTlc,EAAKgb,sBACLhb,EAAKmc,eAAeD,GAGpB,IAAIjB,EAAU9C,EAAAA,GAAW,aAAe1G,EAAAA,GAAOxO,EAAAA,EAAMiY,WAAWgB,GAChEpd,OAAOqc,QAAQC,UAAU,CAAC3I,IAAKwI,EAAS9N,KAAM+O,GAAUA,EAASjB,EACnE,EAACjb,EAEDoc,SAAW,SAACC,GACVrc,EAAKoB,SAAS,CACZyY,eAAe,EACfC,YAAY,EACZ3M,KAAMkP,IAGRrc,EAAKgb,sBACLM,EAAAA,EAAWS,mBAAmBtK,EAAAA,GAAM4K,GAAUb,MAAK,SAAAC,GACjD,IAAI7I,EAAO6I,EAAI7I,KACf5S,EAAKoB,SAAS,CACZyY,eAAe,EACftI,QAASqB,EAAKrB,QACd1H,WAAY+I,EAAK/I,WACjBsL,aAAckF,IAAAA,KAAYzH,EAAK0J,eAAeC,UAC9CrH,kBAAmBtC,EAAK4J,oBAE5B,IAEA,IAAMC,EAAO3d,OAAO4d,SAASD,KACzBxB,EAAU9C,EAAAA,GAAW,aAAe1G,EAAAA,GAAOxO,EAAAA,EAAMiY,WAAWmB,GAAYI,EAC3D,aAAbJ,EACFvd,OAAOqc,QAAQwB,aAAa,CAAClK,IAAKwI,EAAS9N,KAAMkP,GAAWA,EAAUpB,GAEtEnc,OAAOqc,QAAQC,UAAU,CAAC3I,IAAKwI,EAAS9N,KAAMkP,GAAWA,EAAUpB,EAEvE,EAACjb,EAEDmc,eAAiB,SAACD,GAChBlc,EAAKoB,SAAS,CAACyY,eAAe,IAC9ByB,EAAAA,EAAWC,YAAY9J,EAAAA,GAAMyK,GAASV,MAAK,SAAAC,GACzC,IAAIzC,EAAayC,EAAI7I,KAAKgJ,YAAY9W,KAAI,SAAA0C,GAExC,OADa,IAAIoV,EAAAA,EAAOpV,EAE1B,IACgB,MAAZ0U,IACFlD,EAAaA,EAAW6D,QAAO,SAAArV,GAC7B,GAAkB,QAAdA,EAAKhI,KAAgB,CACvB,IAAIqI,EAAOL,EAAKK,KAAK6D,cACrB,MAAgB,WAAT7D,GAA8B,WAATA,GAA8B,cAATA,CACnD,CACA,OAAO,CACT,KAEFmR,EAAa/V,EAAAA,EAAM6Z,YAAY9D,EAAY,OAAQ,OACnDhZ,EAAKoB,SAAS,CACZ+L,KAAM+O,EACNpC,YAAY,EACZd,WAAYA,EACZa,eAAe,GAEnB,IAAGmC,OAAM,WACPhc,EAAKoB,SAAS,CAAC6a,cAAc,GAC/B,GACF,EAACjc,EAED+c,mBAAqB,SAAC5P,GACpB,IAAIuO,EAAO1b,EAAKwB,MAAMsP,SAASkM,QAC3BvT,EAAOiS,EAAKG,cAAc1O,GACzB1D,EAAKsE,UAWS2N,EAAKG,cAAcpS,EAAK+E,WAAWrB,MACzC7C,YAAa,EACxBtK,EAAKoB,SAAS,CAAC0P,SAAU4K,EAAMuB,YAAaxT,KAZ5C6R,EAAAA,EAAWC,YAAY9J,EAAAA,GAAMhI,EAAK0D,MAAMqO,MAAK,SAAAC,GAC3Czb,EAAKkd,sBAAsBzB,EAAI7I,KAAKgJ,YAAanS,GAChCiS,EAAKG,cAAcpS,EAAK+E,WAAWrB,MACzC7C,YAAa,EACxBtK,EAAKoB,SAAS,CACZ0P,SAAU4K,EACVuB,YAAaxT,GAEjB,GAMJ,EAACzJ,EAED4a,yBAA2B,SAACzN,GAC1B,IAAIuO,EAAO1b,EAAKwB,MAAMsP,SAASkM,QAC3B/Z,EAAAA,EAAMka,eAAehQ,KACvBA,EAAOlK,EAAAA,EAAMma,WAAWjQ,IAE1BmO,EAAAA,EAAWC,YAAY9J,EAAAA,GAAMtE,GAAM,GAAMqO,MAAK,SAAAC,GAG5C,IAFA,IAAIzC,EAAayC,EAAI7I,KAAKgJ,YACtByB,EAAU,CAAC,EACNzL,EAAI,EAAGA,EAAIoH,EAAWpa,OAAQgT,IAAK,CAC1C,IAAIpI,EAASwP,EAAWpH,GACpBvO,EAAMmG,EAAO8T,WACZD,EAAQha,KACXga,EAAQha,GAAO,IAEjBga,EAAQha,GAAKwJ,KAAKrD,EACpB,CACA,IAAK,IAAInG,KAAOga,EAAS,CACvB,IAAI5T,EAAOiS,EAAKG,cAAcxY,GACzBoG,EAAKsE,UAA0B,MAAdtE,EAAK0D,KAEf1D,EAAKsE,UACf/N,EAAKkd,sBAAsBG,EAAQha,GAAMoG,GAFzCzJ,EAAK2b,2BAA2B0B,EAAQha,GAAMoG,EAIlD,CACAzJ,EAAKoB,SAAS,CACZ4W,mBAAmB,EACnBlH,SAAU4K,GAEd,IAAGM,OAAM,WACPhc,EAAKoB,SAAS,CAAC6a,cAAc,GAC/B,GACF,EAACjc,EAEDgb,oBAAsB,WAChBhb,EAAK8a,gBACP7b,SAASse,KAAKC,YAAYxd,EAAK8a,eAC/B9a,EAAK8a,cAAgB,KAEzB,EAAC9a,EAEDyd,kBAAoB,SAAChf,GACnBA,EAAMoD,iBACNpD,EAAMsE,kBACN,IAAIgP,EAAO,GACX,GAA6B,MAAzBtT,EAAMC,OAAOsJ,QAAiB,CAEhC,IADA,IAAItJ,EAASD,EAAMC,OAAO8P,WACA,MAAnB9P,EAAOsJ,SACZtJ,EAASA,EAAO8P,WAElBuD,EAAOrT,EAAOsT,IAChB,MACED,EAAOtT,EAAMC,OAAOsT,KAEtBhS,EAAK8R,YAAYC,EACnB,EAAC/R,EAED8R,YAAc,SAACC,GACb,IAAMU,EAAMV,EACZ,GAAI9O,EAAAA,EAAMya,2BAA2BjL,EAAKhB,EAAAA,IAAO,CAC/C,IAAItE,EAAOlK,EAAAA,EAAM0a,oCAAoClL,EAAKhB,EAAAA,IAC1DzR,EAAKoc,SAASjP,EAChB,MAAO,GAAIlK,EAAAA,EAAM2a,sBAAsBnL,EAAKhB,EAAAA,IAAO,CACjD,IAAItE,EAAOlK,EAAAA,EAAM4a,+BAA+BpL,EAAKhB,EAAAA,IACrDzR,EAAKqb,QAAQlO,EACf,MACErO,OAAO4d,SAAS1K,KAAOS,EAEpBzS,EAAKwB,MAAMoW,cACd5X,EAAKoB,SAAS,CAAEwW,cAAc,GAElC,EAAC5X,EAED8d,WAAa,SAACrf,GACZ,GAAIA,EAAM+C,OAAS/C,EAAM+C,MAAM2L,KAAM,CACnC,IAAIA,EAAO1O,EAAM+C,MAAM2L,KACnBlK,EAAAA,EAAMka,eAAehQ,GACvBnN,EAAKoc,SAASjP,IAEdnN,EAAKmc,eAAehP,GACpBnN,EAAKoB,SAAS,CACZ+L,KAAMA,EACN2M,YAAY,IAGlB,CACF,EAAC9Z,EAEDyZ,gBAAkB,SAACjS,GACjB,IAAI2F,EAAO3F,EAAKuW,OAASvW,EAAK2F,KAAK1B,MAAM,EAAGjE,EAAK2F,KAAKvO,OAAS,GAAK4I,EAAK2F,KACzE,GAAInN,EAAKwB,MAAMyL,cAAgBE,EAA/B,CAOA,IAFA,IAAInI,GAAS,EACTkL,EAAQjN,EAAAA,EAAM4M,SAAS1C,GAClByE,EAAI,EAAGA,EAAI1B,EAAMtR,OAAQgT,IAAK,CAErC,IAAInI,EAAOzJ,EAAKwB,MAAMsP,SAAS+K,cAAcpS,GAC7C,IAAKA,EAAM,CACTzE,EAAQ4M,EACR,KACF,CACF,CACA,IAAe,IAAX5M,EAAc,CAChB,IAAI0W,EAAO1b,EAAKwB,MAAMsP,SAASkM,QAC3BvT,EAAOiS,EAAKG,cAAcrU,EAAK2F,MACnC6Q,EAAAA,EAAWC,WAAWxU,GACtBzJ,EAAKoB,SAAS,CAAC0P,SAAU4K,GAC3B,MACE1b,EAAK4a,yBAAyBzN,GAIhC,GAAI3F,EAAKuW,OACP/d,EAAKqb,QAAQlO,QAEb,GAAIlK,EAAAA,EAAMka,eAAehQ,GACvBnN,EAAKoc,SAASjP,OACT,CACL,IAAIsF,EAAM0F,EAAAA,GAAW,KAAOtE,EAAAA,GAAc,aAAe5Q,EAAAA,EAAMiY,WAAW/N,GAC1DrO,OAAOsa,KAAK,eAClBsD,SAAS1K,KAAOS,CAC5B,CAhCF,CAkCF,EAACzS,EAEDkZ,YAAc,WACZlZ,EAAKoB,SAAS,CAACwW,cAAe5X,EAAKwB,MAAMoW,cAC3C,EAAC5X,EAEDqZ,kBAAoB,SAACG,GACnB,IAAIkC,EAAO1b,EAAKwB,MAAMsP,SAASkM,QAC3BvT,EAAOiS,EAAKG,cAAcrC,GAC9BkC,EAAKuC,WAAWxU,GAChBzJ,EAAKoB,SAAS,CAAC0P,SAAU4K,EAAMuB,YAAaxT,IAC5CzJ,EAAKqb,QAAQ5R,EAAK0D,KACpB,EAACnN,EAEDuY,cAAgB,SAACpK,GACf,IAAIkC,EAAapN,EAAAA,EAAMuV,SAASxY,EAAKwB,MAAM2L,KAAMgB,EAAOtG,MACxD,GAAIsG,EAAOzE,QACT1J,EAAK+c,mBAAmB1M,GACxBrQ,EAAKqb,QAAQhL,QAEb,GAAIpN,EAAAA,EAAMka,eAAe9M,GACvBrQ,EAAKoc,SAAS/L,OACT,CACL,IAAM6N,EAAEpf,OAAOsa,KAAK,eACd3G,EAAM0F,EAAAA,GAAW,KAAOtE,EAAAA,GAAc,aAAe5Q,EAAAA,EAAMiY,WAAW7K,GAC5E6N,EAAExB,SAAS1K,KAAOS,CACpB,CAEJ,EAACzS,EAED+X,YAAc,WACZ/X,EAAKoB,SAAS,CAACwW,cAAe5X,EAAKwB,MAAMoW,cAC3C,EAAC5X,EAEDuJ,YAAc,SAACE,GAKb,GAJKzJ,EAAKwB,MAAMoY,WACd5Z,EAAKoB,SAAS,CAACwY,WAAW,IAGxBnQ,EAAKD,OAAOE,QAAS,CACvB,IAAKD,EAAKsE,SAAU,CAClB,IAAI2N,EAAO1b,EAAKwB,MAAMsP,SAASkM,QAC/BvT,EAAOiS,EAAKG,cAAcpS,EAAK0D,MAC/BmO,EAAAA,EAAWC,YAAY9J,EAAAA,GAAMhI,EAAK0D,MAAMqO,MAAK,SAAAC,GAC3Czb,EAAKkd,sBAAsBzB,EAAI7I,KAAKgJ,YAAanS,GACjDiS,EAAKyC,aAAa1U,GAClBzJ,EAAKoB,SAAS,CAAC0P,SAAU4K,GAC3B,GACF,CACA,GAAIjS,EAAK0D,OAASnN,EAAKwB,MAAM2L,KAC3B,GAAI1D,EAAKa,WAAY,CACnB,IAAIoR,EAAOsC,EAAAA,EAAWG,aAAane,EAAKwB,MAAMsP,SAAUrH,GACxDzJ,EAAKoB,SAAS,CAAC0P,SAAU4K,GAC3B,KAAO,CACL,IAAIA,EAAO1b,EAAKwB,MAAMsP,SAASkM,QAC/BvT,EAAOiS,EAAKG,cAAcpS,EAAK0D,MAC/BuO,EAAKuC,WAAWxU,GAChBzJ,EAAKoB,SAAS,CAAC0P,SAAU4K,GAC3B,CAEJ,CAEA,GAAIjS,EAAK0D,OAASnN,EAAKwB,MAAM2L,KAI7B,GAAI1D,EAAKD,OAAOE,QACd1J,EAAKqb,QAAQ5R,EAAK0D,WAElB,GAAIlK,EAAAA,EAAMka,eAAe1T,EAAK0D,MACxB1D,EAAK0D,OAASnN,EAAKwB,MAAM2L,MAC3BnN,EAAKoc,SAAS3S,EAAK0D,MAErBnN,EAAK+X,kBACA,CACL,IAAMmG,EAAIpf,OAAOsa,KAAK,eAChB3G,EAAM0F,EAAAA,GAAW,KAAOtE,EAAAA,GAAc,aAAe5Q,EAAAA,EAAMiY,WAAWzR,EAAK0D,MACjF+Q,EAAExB,SAAS1K,KAAOS,CACpB,CAEJ,EAACzS,EAEDuK,eAAiB,SAACd,GAChB,IAAIiS,EAAOsC,EAAAA,EAAWG,aAAane,EAAKwB,MAAMsP,SAAUrH,GACxDzJ,EAAKoB,SAAS,CAAC0P,SAAU4K,GAC3B,EAAC1b,EAEDwK,eAAiB,SAACf,GAChB,IAAIiS,EAAO1b,EAAKwB,MAAMsP,SAASkM,SAC/BvT,EAAOiS,EAAKG,cAAcpS,EAAK0D,OACrBY,UAMR2N,EAAKuC,WAAWxU,GAChBzJ,EAAKoB,SAAS,CAAC0P,SAAU4K,KANzBJ,EAAAA,EAAWC,YAAY9J,EAAAA,GAAMhI,EAAK0D,MAAMqO,MAAK,SAAAC,GAC3Czb,EAAKkd,sBAAsBzB,EAAI7I,KAAKgJ,YAAanS,GACjDzJ,EAAKoB,SAAS,CAAC0P,SAAU4K,GAC3B,GAKJ,EAAC1b,EAED2b,2BAA6B,SAACyC,EAAM3U,GAClCA,EAAKsE,UAAW,EAChBtE,EAAKa,YAAa,EAClB,IAAI0O,EAAaoF,EAAKtZ,KAAI,SAAA0C,GACxB,OAAO,IAAIoV,EAAAA,EAAOpV,EACpB,IACAwR,EAAaA,EAAW6D,QAAO,SAAArV,GAC7B,GAAkB,QAAdA,EAAKhI,KAAgB,CACvB,IAAIqI,EAAOL,EAAKK,KAAK6D,cACrB,MAAgB,WAAT7D,GAA8B,WAATA,GAA8B,cAATA,CACnD,CACA,OAAO,CACT,IAGA,IAAIwN,GAFJ2D,EAAa/V,EAAAA,EAAM6Z,YAAY9D,EAAY,OAAQ,QAEzBlU,KAAI,SAAA0E,GAC5B,OAAO,IAAI4L,EAAAA,EAAS,CAAC5L,OAAAA,GACvB,IACAC,EAAKkN,YAAYtB,EACnB,EAACrV,EAEDkd,sBAAwB,SAACkB,EAAM3U,GAC7BA,EAAKsE,UAAW,EAChBtE,EAAKa,YAAa,EAClB,IAAI0O,EAAaoF,EAAKtZ,KAAI,SAAA0C,GACxB,OAAO,IAAIoV,EAAAA,EAAOpV,EACpB,IAGI6N,GAFJ2D,EAAa/V,EAAAA,EAAM6Z,YAAY9D,EAAY,OAAQ,QAEzBlU,KAAI,SAAA0E,GAC5B,OAAO,IAAI4L,EAAAA,EAAS,CAAC5L,OAAAA,GACvB,IACAC,EAAKkN,YAAYtB,EACnB,EA3bErV,EAAKwB,MAAQ,CACX2L,KAAM,GACNyM,WAAW,EACXhC,cAAc,EACdkC,YAAY,EACZD,eAAe,EACfb,WAAY,GACZzH,QAAS,GACT1H,WAAY,GACZsL,aAAc,GACdD,kBAAmB,GACnB8C,mBAAmB,EACnBlH,SAAUkN,EAAAA,EAAWK,YACrBpB,YAAa,KACbhF,UAAW,KACXpC,aAAc,IAGhB/W,OAAOgf,WAAa9d,EAAK8d,WACzB9d,EAAK8b,UAAY,YACjB9b,EAAKse,SAAW,WAChBte,EAAK8a,cAAgB,KAAK9a,CAC5B,CA4cC,OA5cAoD,EAAAA,EAAAA,GAAAmX,EAAA,EAAAlX,IAAA,qBAAAC,MAED,WACOL,EAAAA,EAAM0V,aACTpV,KAAKnC,SAAS,CAAEwW,cAAc,GAElC,GAAC,CAAAvU,IAAA,oBAAAC,MAED,WAAqB,IAADK,EAAA,KAClBJ,KAAKiX,cAAcC,EAAAA,IACnBlX,KAAKsX,aAAaJ,EAAAA,IAElBlX,KAAKmR,MAAQzV,SAASoS,iBAAiB,wBACvC9N,KAAKmR,MAAMvE,SAAQ,SAAA4B,GAAI,OAAIA,EAAK3R,iBAAiB,QAASuD,EAAK8Z,kBAAkB,GACnF,GAAC,CAAApa,IAAA,uBAAAC,MAED,WAAwB,IAADiB,EAAA,KACrBhB,KAAKmR,MAAMvE,SAAQ,SAAA4B,GAAI,OAAIA,EAAKtR,oBAAoB,QAAS8D,EAAKkZ,kBAAkB,GACtF,GAAC,CAAApa,IAAA,SAAAC,MAqZD,WACE,OACE2E,EAAAA,EAAAA,MAAA,OAAKrH,GAAG,OAAO8D,UAAU,YAAWG,SAAA,EAClCL,EAAAA,EAAAA,KAAC+S,EAAS,CACRS,kBAAmBzU,KAAK/B,MAAMwW,kBAC9BJ,aAAcrU,KAAK/B,MAAMoW,aACzB3K,YAAa1J,KAAK/B,MAAM2L,KACxB2D,SAAUvN,KAAK/B,MAAMsP,SACrBmH,UAAW1U,KAAK/B,MAAMyW,UACtBpC,aAActS,KAAK/B,MAAMqU,aACzBkC,YAAaxU,KAAKwU,YAClBxO,YAAahG,KAAKgG,YAClBgB,eAAgBhH,KAAKgH,eACrBC,eAAgBjH,KAAKiH,eACrBsH,YAAavO,KAAKuO,eAEpBtN,EAAAA,EAAAA,KAACyU,EAAS,CACR9L,KAAM5J,KAAK/B,MAAM2L,KACjByM,UAAWrW,KAAK/B,MAAMoY,UACtBE,WAAYvW,KAAK/B,MAAMsY,WACvBD,cAAetW,KAAK/B,MAAMqY,cAC1BtI,QAAShO,KAAK/B,MAAM+P,QACpB1H,WAAYtG,KAAK/B,MAAMqI,WACvBsL,aAAc5R,KAAK/B,MAAM2T,aACzBD,kBAAmB3R,KAAK/B,MAAM0T,kBAC9B8D,WAAYzV,KAAK/B,MAAMwX,WACvBlH,YAAavO,KAAKuO,YAClBoH,YAAa3V,KAAK2V,YAClBO,gBAAiBlW,KAAKkW,gBACtBJ,kBAAmB9V,KAAK8V,kBACxBd,cAAehV,KAAKgV,iBAEtB/T,EAAAA,EAAAA,KAAC+Z,IAAU,CAACC,MAAM,uBAAsB3Z,UACtCL,EAAAA,EAAAA,KAACia,EAAAA,EAAK,CAACtW,QAAS5E,KAAK/B,MAAMoW,aAAcxP,OAAQ7E,KAAKwU,YAAahD,iBAAiB,eAI5F,KAACwF,CAAA,CAreO,CAASnC,EAAAA,WAwenBsG,EAAAA,QAAgBla,EAAAA,EAAAA,KAAC+V,EAAI,IAAKtb,SAAS8b,eAAe,W","sources":["components/context-menu/actions.js","components/context-menu/context-menu.js","components/context-menu/globalEventListener.js","components/context-menu/helpers.js","components/dropdown-menu/item-dropdown-menu.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","components/wiki-markdown-viewer.js","components/index-viewer.js","pages/wiki/side-panel.js","components/wiki-dir-list-view/wiki-dir-list-item.js","components/wiki-dir-list-view/wiki-dir-list-view.js","pages/wiki/main-panel.js","wiki.js"],"sourcesContent":["import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n  hideOnLeave: PropTypes.bool,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  };\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  };\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  };\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  };\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  };\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  };\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  };\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  };\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  };\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  };\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  };\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  };\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  };\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  };\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  };\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  };\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  };\n}\n\nconst globalEventListener = new GlobalEventListener();\n\nexport default globalEventListener;\n","export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  };\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  };\n\n  onDropdownToggleKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onDropdownToggleClick(e);\n    }\n  };\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  };\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  };\n\n  onMenuItemKeyDown = (e) => {\n    if (e.key == 'Enter' || e.key == 'Space') {\n      this.onMenuItemClick(e);\n    }\n  };\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  };\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-label={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            onKeyDown={this.onDropdownToggleKeyDown}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} className=\"vam\">\n        <DropdownToggle\n          tag={tagName || 'i'}\n          role=\"button\"\n          tabIndex=\"0\"\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          aria-label={gettext('More Operations')}\n          onKeyDown={this.onDropdownToggleKeyDown}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick} onKeyDown={this.onMenuItemKeyDown}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrag = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrag = modify;\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  };\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  };\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  };\n\n  onNodeClick = () => {\n    const { node } = this.props;\n    const { object } = node;\n    if (object.isDir()) {\n      this.props.onNodeClick(this.props.node);\n      return;\n    }\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(object.permission);\n    if (isCustomPermission) {\n      const { preview: canPreview, modify: canModify } = customPermission.permission;\n      if (!canPreview && !canModify) return;\n    }\n    this.props.onNodeClick(this.props.node);\n  };\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  };\n\n  onNodeDragStart = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragStart(e, this.props.node);\n  };\n\n  onNodeDragEnter = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  };\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.props.onNodeDragMove(e);\n  };\n\n  onNodeDragLeave = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  };\n\n  onNodeDrop = (e) => {\n    if (Utils.isIEBrower() || !this.canDrag) {\n      return false;\n    }\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  };\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  };\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  };\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  };\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  };\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  };\n\n  calculateMenuList = (node) => {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    let menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') {\n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  };\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              userPerm={this.props.userPerm}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  };\n\n  render() {\n    let { currentPath, node, isNodeMenuShow, userPerm } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n\n    const { isCustomPermission } = Utils.getUserPermission(userPerm);\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable={this.canDrag} onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((userPerm === 'rw' || permission || isCustomPermission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.calculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  userPerm: PropTypes.string,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n  posX: PropTypes.number,\n  posY: PropTypes.number,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n    const { userPerm } = props;\n    this.canDrop = userPerm === 'rw';\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (isCustomPermission) {\n      const { modify } = customPermission.permission;\n      this.canDrop = modify;\n    }\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  };\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  };\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  };\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  };\n\n  onContainerClick = (event) => {\n    hideMenu();\n  };\n\n  onNodeClick = (node) => {\n    hideMenu();\n    this.props.onNodeClick(node);\n  };\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower() || !this.canDrop) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  };\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  };\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  };\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  };\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  };\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  };\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  };\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  };\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    const { userPerm } = this.props;\n    const { isCustomPermission, customPermission } = Utils.getUserPermission(userPerm);\n    if (!isCustomPermission) {\n      return menuList;\n    }\n\n    menuList = [];\n\n    const { create: canCreate, modify: canModify, delete: canDelete, copy: canCopy } = customPermission.permission;\n    if (!node) {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n      return menuList;\n    }\n\n    if (node.object.type === 'dir') {\n      canCreate && menuList.push(NEW_FOLDER, NEW_FILE);\n    }\n\n    canCopy && menuList.push(COPY);\n    canModify && menuList.push(MOVE, RENAME);\n    canDelete && menuList.push(DELETE);\n\n    if (node.object.type !== 'dir') {\n      menuList.push(OPEN_VIA_CLIENT);\n    }\n\n    return menuList;\n  };\n\n  onShowMenu = () => {\n    this.freezeItem();\n  };\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  };\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${(this.state.isTreeViewDropTipShow && this.canDrop) ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n        onClick={this.onContainerClick}\n      >\n        <TreeNodeView\n          userPerm={this.props.userPerm}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { MarkdownViewer } from '@seafile/seafile-editor';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, sharedToken, mediaUrl } from '../utils/constants';\nimport Loading from './loading';\nimport { Utils } from '../utils/utils';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n\n    this.getTitlesInfo();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    if (this.titlesInfo.length === 0) {\n      this.getTitlesInfo();\n    }\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  getTitlesInfo = () => {\n    let titlesInfo = [];\n    const titleDom = document.querySelectorAll('h1[id^=\"user-content\"]')[0];\n    if (titleDom) {\n      const id = titleDom.getAttribute('id');\n      let content = id && id.replace('user-content-', '');\n      content = content ? `${content} - ${slug}` : slug;\n      Utils.updateTabTitle(content);\n    }\n    let headingList = document.querySelectorAll('h2[id^=\"user-content\"], h3[id^=\"user-content\"]');\n    for (let i = 0; i < headingList.length; i++) {\n      titlesInfo.push(headingList[i].offsetTop);\n    }\n    this.titlesInfo = titlesInfo;\n  };\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  };\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  };\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  };\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  };\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n      />\n    );\n  };\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { repoID, slug, serviceURL, isPublicWiki } from '../utils/constants';\nimport { Utils } from '../utils/utils';\nimport { deserialize } from '@seafile/seafile-editor';\nimport'../css/index-viewer.css';\n\nconst viewerPropTypes = {\n  indexContent: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass TreeNode {\n\n  constructor({ name, href, parentNode }) {\n    this.name = name;\n    this.href = href;\n    this.parentNode = parentNode || null;\n    this.children = [];\n  }\n\n  setParent(parentNode) {\n    this.parentNode = parentNode;\n  }\n\n  addChildren(nodeList) {\n    nodeList.forEach((node) => {\n      node.setParent(this);\n    });\n    this.children = nodeList;\n  }\n}\n\nclass IndexContentViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.links = [];\n    this.treeRoot = new TreeNode({ name: '', href: '' });\n    this.state = {\n      currentPath: '',\n    };\n  }\n\n  componentWillMount() {\n    this.getRootNode();\n  }\n\n  componentDidMount() {\n    this.bindClickEvent();\n  }\n\n  componentWillReceiveProps() {\n    this.removeClickEvent();\n  }\n\n  componentDidUpdate() {\n    this.bindClickEvent();\n  }\n\n  componentWillUnmount() {\n    this.removeClickEvent();\n  }\n\n  bindClickEvent = () => {\n    const contentClass = 'wiki-nav-content';\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n  };\n\n  removeClickEvent = () => {\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  };\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    const currentPath = event.target.getAttribute('data-path');\n    if (currentPath === this.state.currentPath) {\n      return;\n    } else if (currentPath) {\n      this.setState({ currentPath: currentPath });\n    }\n    const link = this.getLink(event.target);\n    if (link) this.props.onLinkClick(link);\n  };\n\n  getLink = (node) => {\n    const tagName = node.tagName;\n    if (!tagName || tagName === 'HTML') return;\n    if (tagName === 'A') {\n      return node.href;\n    } else {\n      return this.getLink(node.parentNode);\n    }\n  };\n\n  changeInlineNode = (item) => {\n    if (item.type == 'link' || item.type === 'image') {\n      let url;\n\n      // change image url\n      if (item.type == 'image' && isPublicWiki) {\n        url = item.data.src;\n        const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n        // different repo\n        if (!re.test(url)) {\n          return;\n        }\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        const imagePath = url.substring(index + 5, index2);\n        // replace url\n        item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n      }\n\n      else if (item.type == 'link') {\n        url = item.data.href;\n        /* eslint-disable */\n        let expression = /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[\\-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9\\.\\-]+|(?:www\\.|[\\-;:&=\\+\\$,\\w]+@)[A-Za-z0-9\\.\\-]+)((?:\\/[\\+~%\\/\\.\\w\\-_]*)?\\??(?:[\\-\\+=&;%@\\.\\w_]*)#?(?:[\\.\\!\\/\\\\\\w]*))?)/\n        /* eslint-enable */\n        let re = new RegExp(expression);\n\n        // Solving relative paths\n        if (!re.test(url)) {\n          item.data.href = serviceURL + '/published/' + slug + '/' + url;\n        }\n        // change file url\n        else if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        }\n        // change dir url\n        else if (Utils.isInternalDirLink(url, repoID)) {\n          let path = Utils.getPathFromInternalDirLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        }\n      }\n    }\n\n    return item;\n  };\n\n  getRootNode = () => {\n    let value = deserialize(this.props.indexContent);\n    const newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    newNodes.forEach((node) => {\n      if (node.type === 'unordered_list' || node.type === 'ordered_list') {\n        let treeRoot = this.transSlateToTree(node.children, this.treeRoot);\n        this.setNodePath(treeRoot, '/');\n        this.treeRoot = treeRoot;\n      }\n    });\n  };\n\n  setNodePath = (node, parentNodePath) => {\n    let name = node.name;\n    let path = parentNodePath === '/' ? parentNodePath + name : parentNodePath + '/' + name;\n    node.path = path;\n    if (node.children.length > 0) {\n      node.children.forEach(child => {\n        this.setNodePath(child, path);\n      });\n    }\n  };\n\n  // slateNodes is list items of an unordered list or ordered list, translate them to treeNode and add to parentTreeNode\n  transSlateToTree = (slateNodes, parentTreeNode) => {\n    let treeNodes = slateNodes.map((slateNode) => {\n      // item has children(unordered list)\n      if (slateNode.children.length === 2 && (slateNode.children[1].type === 'unordered_list' || slateNode.children[1].type === 'ordered_list')) {\n        // slateNode.nodes[0] is paragraph, create TreeNode, set name and href\n        const paragraphNode = slateNode.children[0];\n        const treeNode = this.transParagraph(paragraphNode);\n        // slateNode.nodes[1] is list, set it as TreeNode's children\n        const listNode = slateNode.children[1];\n        // Add sub list items to the tree node\n        return this.transSlateToTree(listNode.children, treeNode);\n      } else {\n        // item doesn't have children list\n        if (slateNode.children[0] && (slateNode.children[0].type === 'paragraph')) {\n          return this.transParagraph(slateNode.children[0]);\n        } else {\n          // list item contain table/code_block/blockqupta\n          return new TreeNode({ name: '', href: '' });\n        }\n      }\n    });\n    parentTreeNode.addChildren(treeNodes);\n    return parentTreeNode;\n  };\n\n  // translate slate_paragraph_node to treeNode\n  transParagraph = (paragraphNode) => {\n    let treeNode;\n    if (paragraphNode.children[1] && paragraphNode.children[1].type === 'link') {\n      // paragraph node is a link node\n      const linkNode = paragraphNode.children[1];\n      const textNode = linkNode.children[0];\n      let name = textNode ? textNode.text : '';\n      treeNode =  new TreeNode({ name: name, href: linkNode.data.href });\n    } else if (paragraphNode.children[0]) {\n      // paragraph first child node is a text node, then get node name\n      const textNode = paragraphNode.children[0];\n      let name = textNode.text ? textNode.text : '';\n      treeNode = new TreeNode({ name: name, href: '' });\n    } else {\n      treeNode = new TreeNode({ name: '', href: '' });\n    }\n    return treeNode;\n  };\n\n  render() {\n    return (\n      <div className=\"mx-4 o-hidden\">\n        <FolderItem node={this.treeRoot} bindClickEvent={this.bindClickEvent} currentPath={this.state.currentPath}/>\n      </div>\n    );\n  }\n}\n\nIndexContentViewer.propTypes = viewerPropTypes;\n\nconst FolderItemPropTypes = {\n  node: PropTypes.object.isRequired,\n  bindClickEvent: PropTypes.func.isRequired,\n  currentPath: PropTypes.string,\n};\n\nclass FolderItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: false\n    };\n  }\n\n  toggleExpanded = () => {\n    this.setState({ expanded: !this.state.expanded }, () => {\n      if (this.state.expanded) this.props.bindClickEvent();\n    });\n  };\n\n  renderLink = ({ href, name, path }) => {\n    const className = `wiki-nav-content ${path === this.props.currentPath ? 'wiki-nav-content-highlight' : ''}`;\n    if (href && name) {\n      return <div className={className}><a href={href} data-path={path} onClick={this.toggleExpanded} title={name}>{name}</a></div>;\n    } else if (name) {\n      return <div className=\"wiki-nav-content\"><span onClick={this.toggleExpanded} title={name}>{name}</span></div>;\n    } else {\n      return null;\n    }\n  };\n\n  componentDidMount() {\n    if (this.props.node && !this.props.node.parentNode) {\n      this.setState({ expanded: true }, () => {\n        this.props.bindClickEvent();\n      });\n    }\n  }\n\n  render() {\n    const { node } = this.props;\n    if (node.children.length > 0) {\n      return (\n        <React.Fragment>\n          {node.parentNode &&\n            <React.Fragment>\n              <span className=\"switch-btn\" onClick={this.toggleExpanded}>\n                {this.state.expanded ? <i className=\"fa fa-caret-down\"></i> : <i className=\"fa fa-caret-right\"></i>}\n              </span>\n              {this.renderLink(node)}\n            </React.Fragment>\n          }\n          {this.state.expanded && node.children.map((child, index) => {\n            return (\n              <div className=\"pl-4 position-relative\" key={index}>\n                <FolderItem node={child} bindClickEvent={this.props.bindClickEvent} currentPath={this.props.currentPath}/>\n              </div>\n            );\n          })}\n        </React.Fragment>\n      );\n    } else {\n      return this.renderLink(node);\n    }\n  }\n}\n\nFolderItem.propTypes = FolderItemPropTypes;\n\nexport default IndexContentViewer;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, repoID, slug, username, permission } from '../../utils/constants';\nimport Logo from '../../components/logo';\nimport Loading from '../../components/loading';\nimport TreeView from '../../components/tree-view/tree-view';\nimport IndexContentViewer from '../../components/index-viewer';\n\nconst propTypes = {\n  closeSideBar: PropTypes.bool.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  indexNode: PropTypes.object,\n  indexContent: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onCloseSide: PropTypes.func.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass SidePanel extends Component {\n\n  constructor(props) {\n    super(props);\n    this.isNodeMenuShow = false;\n  }\n\n  renderIndexView = () => {\n    return (\n      <Fragment>\n        <div className=\"wiki-pages-container\">\n          <div style={{marginTop: '2px'}}></div>\n          <IndexContentViewer\n            indexContent={this.props.indexContent}\n            onLinkClick={this.props.onLinkClick}\n          />\n        </div>\n      </Fragment>\n    );\n  };\n\n  renderTreeView = () => {\n    return (\n      <Fragment>\n        <div className=\"wiki-pages-container\">\n          {this.props.treeData && (\n            <TreeView\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.isNodeMenuShow}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n            />\n          )}\n        </div>\n      </Fragment>\n    );\n  };\n\n  render() {\n    return (\n      <div className={`side-panel wiki-side-panel ${this.props.closeSideBar ? '': 'left-zero'}`}>\n        <div className=\"side-panel-top panel-top\">\n          <Logo onCloseSidePanel={this.props.onCloseSide} />\n        </div>\n        <div id=\"side-nav\" className=\"wiki-side-nav\" role=\"navigation\">\n          {this.props.isTreeDataLoading && <Loading /> }\n          {!this.props.isTreeDataLoading && this.props.indexNode && this.renderIndexView() }\n          {!this.props.isTreeDataLoading && !this.props.indexNode && this.renderTreeView() }\n          {(username && permission) && <div className=\"text-left p-2\"><a href={siteRoot + 'library/' + repoID + '/' + slug + '/'} className=\"text-dark text-decoration-underline\">{gettext('Go to Library')}</a></div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n};\n\nclass WikiDirListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({highlight: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({highlight: false});\n  };\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  onDirentClick = (e) => {\n    e.preventDefault();\n    this.props.onDirentClick(this.props.dirent);\n  };\n\n  render() {\n    let { path, dirent } = this.props;\n    let href = siteRoot + 'published' + Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    const isDesktop = Utils.isDesktop();\n    return isDesktop ? (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onContextMenu={this.onContextMenu}>\n        <td className=\"text-center\">\n          <img src={iconUrl} width=\"24\" alt=\"\" />\n        </td>\n        <td className=\"name\">\n          <a href={href} onClick={this.onDirentClick}>{dirent.name}</a>\n        </td>\n        <td>{dirent.size}</td>\n        <td>{dirent.mtime_relative}</td>\n      </tr>\n    ) : (\n      <tr>\n        <td className=\"text-center\">\n          <img src={iconUrl} width=\"24\" alt=\"\" />\n        </td>\n        <td>\n          <a href={href} onClick={this.onDirentClick}>{dirent.name}</a>\n          <br />\n          <span className=\"item-meta-info\">{dirent.size}</span>\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nWikiDirListItem.propTypes = propTypes;\n\nexport default WikiDirListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiDirListItem from './wiki-dir-list-item';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n};\n\nclass WikiDirListView extends React.Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th style={{width: '4%'}}></th>\n              <th style={{width: '66%'}}>{gettext('Name')}</th>\n              <th style={{width: '15%'}}>{gettext('Size')}</th>\n              <th style={{width: '15%'}}>{gettext('Last Update')}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"88%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {this.props.direntList.length !== 0 && this.props.direntList.map((dirent, index) => {\n            return (\n              <WikiDirListItem key={index} path={this.props.path} dirent={dirent} onDirentClick={this.props.onDirentClick}/>\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nWikiDirListView.propTypes = propTypes;\n\nexport default WikiDirListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, repoID, siteRoot, username, isPro } from '../../utils/constants';\nimport WikiMarkdownViewer from '../../components/wiki-markdown-viewer';\nimport WikiDirListView from '../../components/wiki-dir-list-view/wiki-dir-list-view';\nimport Loading from '../../components/loading';\nimport { Utils } from '../../utils/utils';\nimport Search from '../../components/search/search';\nimport Notification from '../../components/common/notification';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  isViewFile: PropTypes.bool.isRequired,\n  isDataLoading: PropTypes.bool.isRequired,\n  content: PropTypes.string,\n  permission: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  direntList: PropTypes.array.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  onMenuClick = () => {\n    this.props.onMenuClick();\n  };\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let url = siteRoot + 'lib/' + repoID + '/file' + this.props.path + '?mode=edit';\n    window.open(url);\n  };\n\n  onMainNavBarClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onMainNavBarClick(path);\n  };\n\n  renderNavPath = () => {\n    let paths = this.props.path.split('/');\n    let nodePath = '';\n    let pathElem = paths.map((item, index) => {\n      if (item === '') {\n        return null;\n      }\n      if (index === (paths.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a\n              className=\"path-link\"\n              data-path={nodePath}\n              onClick={this.onMainNavBarClick}>\n              {item}\n            </a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  };\n\n\n  render() {\n    let { onSearchedClick } = this.props;\n    const errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n    const isViewingFile = this.props.pathExist && !this.props.isDataLoading && this.props.isViewFile;\n    return (\n      <div className=\"main-panel wiki-main-panel\">\n        <div className=\"main-panel-hide hide\">{this.props.content}</div>\n        <div className={`main-panel-north panel-top ${this.props.permission === 'rw' ? 'border-left-show' : ''}`}>\n          {!username &&\n            <Fragment>\n              <div className=\"cur-view-toolbar\">\n                <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title=\"Side Nav Menu\" onClick={this.onMenuClick}></span>\n              </div>\n              <div className=\"common-toolbar\">\n                {isPro && (\n                  <Search isPublic={true} repoID={repoID} onSearchedClick={onSearchedClick} placeholder={gettext('Search files')}/>\n                )}\n              </div>\n            </Fragment>\n          }\n          {username && (\n            <Fragment>\n              <div className=\"cur-view-toolbar\">\n                <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title=\"Side Nav Menu\" onClick={this.onMenuClick}></span>\n                {this.props.permission == 'rw' && (\n                  Utils.isDesktop() ?\n                    <button className=\"btn btn-secondary operation-item\" title={gettext('Edit')} onClick={this.onEditClick}>{gettext('Edit')}</button> :\n                    <span className=\"fa fa-pencil-alt mobile-toolbar-icon\" title={gettext('Edit')} onClick={this.onEditClick} style={{'fontSize': '1.1rem'}}></span>\n                )}\n              </div>\n              <div className=\"common-toolbar\">\n                {isPro && (\n                  <Search isPublic={true} repoID={repoID} onSearchedClick={onSearchedClick} placeholder={gettext('Search files')}/>\n                )}\n                <Notification />\n                <Account />\n              </div>\n            </Fragment>\n          )}\n        </div>\n        <div className=\"main-panel-center\">\n          <div className={`cur-view-content ${isViewingFile ? 'o-hidden' : ''}`}>\n            {!this.props.pathExist && errMessage}\n            {this.props.pathExist && this.props.isDataLoading && <Loading />}\n            {isViewingFile && (\n              <WikiMarkdownViewer\n                markdownContent={this.props.content}\n                isFileLoading={this.props.isDataLoading}\n                lastModified = {this.props.lastModified}\n                latestContributor={this.props.latestContributor}\n                onLinkClick={this.props.onLinkClick}\n                isWiki={true}\n                path={this.props.path}\n              />\n            )}\n            {(!this.props.isDataLoading && !this.props.isViewFile) && (\n              <WikiDirListView\n                path={this.props.path}\n                direntList={this.props.direntList}\n                onDirentClick={this.props.onDirentClick}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React, { Component } from 'react';\nimport ReactDom from 'react-dom';\nimport moment from 'moment';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { slug, siteRoot, initialPath, isDir, sharedToken, hasIndex } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport { seafileAPI } from './utils/seafile-api';\nimport Dirent from './models/dirent';\nimport TreeNode from './components/tree-view/tree-node';\nimport treeHelper from './components/tree-view/tree-helper';\nimport SidePanel from './pages/wiki/side-panel';\nimport MainPanel from './pages/wiki/main-panel';\nimport { lang } from './utils/constants';\n\nimport './css/layout.css';\nimport './css/side-panel.css';\nimport './css/wiki.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nmoment.locale(lang);\n\nclass Wiki extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      path: '',\n      pathExist: true,\n      closeSideBar: false,\n      isViewFile: true,\n      isDataLoading: false,\n      direntList: [],\n      content: '',\n      permission: '',\n      lastModified: '',\n      latestContributor: '',\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      indexNode: null,\n      indexContent: '',\n    };\n\n    window.onpopstate = this.onpopstate;\n    this.indexPath = '/index.md';\n    this.homePath = '/home.md';\n    this.pythonWrapper = null;\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({ closeSideBar: true });\n    }\n  }\n\n  componentDidMount() {\n    this.loadSidePanel(initialPath);\n    this.loadWikiData(initialPath);\n\n    this.links = document.querySelectorAll('#wiki-file-content a');\n    this.links.forEach(link => link.addEventListener('click', this.onConentLinkClick));\n  }\n\n  componentWillUnmount() {\n    this.links.forEach(link => link.removeEventListener('click', this.onConentLinkClick));\n  }\n\n  loadSidePanel = (initialPath) => {\n    if (hasIndex) {\n      this.loadIndexNode();\n      return;\n    }\n\n    // load dir list\n    initialPath = isDir === 'None' ? '/' : initialPath;\n    this.loadNodeAndParentsByPath(initialPath);\n  };\n\n  loadWikiData = (initialPath) => {\n    this.pythonWrapper = document.getElementById('wiki-file-content');\n    if (isDir === 'False') {\n      // this.showFile(initialPath);\n      this.setState({path: initialPath});\n      return;\n    }\n\n    // if it is a file list, remove the template content provided by python\n    this.removePythonWrapper();\n\n    if (isDir === 'True') {\n      this.showDir(initialPath);\n      return;\n    }\n\n    if (isDir === 'None' && initialPath === '/home.md') {\n      this.showDir('/');\n      return;\n    }\n\n    if (isDir === 'None') {\n      this.setState({pathExist: false});\n      let fileUrl = siteRoot + 'published/' + slug + Utils.encodePath(initialPath);\n      window.history.pushState({url: fileUrl, path: initialPath}, initialPath, fileUrl);\n    }\n  };\n\n  loadIndexNode = () => {\n    seafileAPI.listWikiDir(slug, '/').then(res => {\n      let tree = this.state.treeData;\n      this.addFirstResponseListToNode(res.data.dirent_list, tree.root);\n      let indexNode = tree.getNodeByPath(this.indexPath);\n      seafileAPI.getWikiFileContent(slug, indexNode.path).then(res => {\n        this.setState({\n          treeData: tree,\n          indexNode: indexNode,\n          indexContent: res.data.content,\n          isTreeDataLoading: false,\n        });\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  };\n\n  showDir = (dirPath) => {\n    this.removePythonWrapper();\n    this.loadDirentList(dirPath);\n\n    // update location url\n    let fileUrl = siteRoot + 'published/' + slug + Utils.encodePath(dirPath);\n    window.history.pushState({url: fileUrl, path: dirPath}, dirPath, fileUrl);\n  };\n\n  showFile = (filePath) => {\n    this.setState({\n      isDataLoading: true,\n      isViewFile: true,\n      path: filePath,\n    });\n\n    this.removePythonWrapper();\n    seafileAPI.getWikiFileContent(slug, filePath).then(res => {\n      let data = res.data;\n      this.setState({\n        isDataLoading: false,\n        content: data.content,\n        permission: data.permission,\n        lastModified: moment.unix(data.last_modified).fromNow(),\n        latestContributor: data.latest_contributor,\n      });\n    });\n\n    const hash = window.location.hash;\n    let fileUrl = siteRoot + 'published/' + slug + Utils.encodePath(filePath) + hash;\n    if (filePath === '/home.md') {\n      window.history.replaceState({url: fileUrl, path: filePath}, filePath, fileUrl);\n    } else {\n      window.history.pushState({url: fileUrl, path: filePath}, filePath, fileUrl);\n    }\n  };\n\n  loadDirentList = (dirPath) => {\n    this.setState({isDataLoading: true});\n    seafileAPI.listWikiDir(slug, dirPath).then(res => {\n      let direntList = res.data.dirent_list.map(item => {\n        let dirent = new Dirent(item);\n        return dirent;\n      });\n      if (dirPath === '/') {\n        direntList = direntList.filter(item => {\n          if (item.type === 'dir') {\n            let name = item.name.toLowerCase();\n            return name !== 'drafts' && name !== 'images' && name !== 'downloads';\n          }\n          return true;\n        });\n      }\n      direntList = Utils.sortDirents(direntList, 'name', 'asc');\n      this.setState({\n        path: dirPath,\n        isViewFile: false,\n        direntList: direntList,\n        isDataLoading: false,\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  };\n\n  loadTreeNodeByPath = (path) => {\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listWikiDir(slug, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  };\n\n  loadNodeAndParentsByPath = (path) => {\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listWikiDir(slug, path, true).then(res => {\n      let direntList = res.data.dirent_list;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let key = object.parent_dir;\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded && node.path === '/') {\n          this.addFirstResponseListToNode(results[key], node);\n        } else if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  };\n\n  removePythonWrapper = () => {\n    if (this.pythonWrapper)  {\n      document.body.removeChild(this.pythonWrapper);\n      this.pythonWrapper = null;\n    }\n  };\n\n  onConentLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.onLinkClick(link);\n  };\n\n  onLinkClick = (link) => {\n    const url = link;\n    if (Utils.isWikiInternalMarkdownLink(url, slug)) {\n      let path = Utils.getPathFromWikiInternalMarkdownLink(url, slug);\n      this.showFile(path);\n    } else if (Utils.isWikiInternalDirLink(url, slug)) {\n      let path = Utils.getPathFromWikiInternalDirLink(url, slug);\n      this.showDir(path);\n    } else {\n      window.location.href = url;\n    }\n    if (!this.state.closeSideBar) {\n      this.setState({ closeSideBar: true });\n    }\n  };\n\n  onpopstate = (event) => {\n    if (event.state && event.state.path) {\n      let path = event.state.path;\n      if (Utils.isMarkdownFile(path)) {\n        this.showFile(path);\n      } else {\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    }\n  };\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n\n    // load sidePanel\n    let index = -1;\n    let paths = Utils.getPaths(path);\n    for (let i = 0; i < paths.length; i++) {\n      // eslint-disable-next-line no-use-before-define\n      let node = this.state.treeData.getNodeByPath(node);\n      if (!node) {\n        index = i;\n        break;\n      }\n    }\n    if (index === -1) { // all the data has been loaded already.\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(item.path);\n      treeHelper.expandNode(node);\n      this.setState({treeData: tree});\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n\n    // load mainPanel\n    if (item.is_dir) {\n      this.showDir(path);\n    } else {\n      if (Utils.isMarkdownFile(path)) {\n        this.showFile(path);\n      } else {\n        let url = siteRoot + 'd/' + sharedToken + '/files/?p=' + Utils.encodePath(path);\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      }\n    }\n  };\n\n  onMenuClick = () => {\n    this.setState({closeSideBar: !this.state.closeSideBar});\n  };\n\n  onMainNavBarClick = (nodePath) => {\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(nodePath);\n    tree.expandNode(node);\n    this.setState({treeData: tree, currentNode: node});\n    this.showDir(node.path);\n  };\n\n  onDirentClick = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      this.loadTreeNodeByPath(direntPath);\n      this.showDir(direntPath);\n    } else {  // is file\n      if (Utils.isMarkdownFile(direntPath)) {\n        this.showFile(direntPath);\n      } else {\n        const w=window.open('about:blank');\n        const url = siteRoot + 'd/' + sharedToken + '/files/?p=' + Utils.encodePath(direntPath);\n        w.location.href = url;\n      }\n    }\n  };\n\n  onCloseSide = () => {\n    this.setState({closeSideBar: !this.state.closeSideBar});\n  };\n\n  onNodeClick = (node) => {\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listWikiDir(slug, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        });\n      }\n      if (node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showFile(node.path);\n        }\n        this.onCloseSide();\n      } else {\n        const w = window.open('about:blank');\n        const url = siteRoot + 'd/' + sharedToken + '/files/?p=' + Utils.encodePath(node.path);\n        w.location.href = url;\n      }\n    }\n  };\n\n  onNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  };\n\n  onNodeExpanded = (node) => {\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listWikiDir(slug, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  };\n\n  addFirstResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = direntList.filter(item => {\n      if (item.type === 'dir') {\n        let name = item.name.toLowerCase();\n        return name !== 'drafts' && name !== 'images' && name !== 'downloads';\n      }\n      return true;\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  };\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  };\n\n  render() {\n    return (\n      <div id=\"main\" className=\"wiki-main\">\n        <SidePanel\n          isTreeDataLoading={this.state.isTreeDataLoading}\n          closeSideBar={this.state.closeSideBar}\n          currentPath={this.state.path}\n          treeData={this.state.treeData}\n          indexNode={this.state.indexNode}\n          indexContent={this.state.indexContent}\n          onCloseSide={this.onCloseSide}\n          onNodeClick={this.onNodeClick}\n          onNodeCollapse={this.onNodeCollapse}\n          onNodeExpanded={this.onNodeExpanded}\n          onLinkClick={this.onLinkClick}\n        />\n        <MainPanel\n          path={this.state.path}\n          pathExist={this.state.pathExist}\n          isViewFile={this.state.isViewFile}\n          isDataLoading={this.state.isDataLoading}\n          content={this.state.content}\n          permission={this.state.permission}\n          lastModified={this.state.lastModified}\n          latestContributor={this.state.latestContributor}\n          direntList={this.state.direntList}\n          onLinkClick={this.onLinkClick}\n          onMenuClick={this.onMenuClick}\n          onSearchedClick={this.onSearchedClick}\n          onMainNavBarClick={this.onMainNavBarClick}\n          onDirentClick={this.onDirentClick}\n        />\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          <Modal isOpen={!this.state.closeSideBar} toggle={this.onCloseSide} contentClassName=\"d-none\"></Modal>\n        </MediaQuery>\n      </div>\n    );\n  }\n}\n\nReactDom.render(<Wiki />, document.getElementById('wrapper'));\n"],"names":["MENU_SHOW","MENU_HIDE","dispatchGlobalEvent","eventName","opts","event","target","arguments","length","undefined","window","CustomEvent","detail","document","createEvent","initCustomEvent","dispatchEvent","assign","store","showMenu","type","hideMenu","ContextMenu","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","registerHandlers","addEventListener","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","removeEventListener","handleShow","e","id","_e$detail$position","position","x","y","_e$detail","currentObject","menuList","setState","isVisible","callIfExists","onShowMenu","state","onHideMenu","menu","contains","handleMouseLeave","preventDefault","hideOnLeave","handleContextMenu","keyCode","getMenuPosition","menuStyles","top","left","_window","innerWidth","innerHeight","rect","getBoundingClientRect","height","width","getRTLMenuPosition","_window2","onMenuItemClick","stopPropagation","operation","Utils","getEventData","onContextMenu","_createClass","key","value","this","listenId","listener","register","_this2","wrapper","requestAnimationFrame","setTimeout","_this2$state","_ref","rtl","style","concat","opacity","pointerEvents","unregister","_this3","_jsx","role","className","display","ref","children","map","menuItem","index","onClick","React","globalEventListener","GlobalEventListener","handleShowEvent","callbacks","hasOwnProp","show","handleHideEvent","hide","showCallback","hideCallback","uniqueId","canUseDOM","func","_len","args","Array","_key","apply","obj","prop","Object","prototype","hasOwnProperty","Math","random","toString","substring","Boolean","createElement","ItemDropdownMenu","isItemMenuShow","unfreezeItem","onDropdownToggleKeyDown","onDropdownToggleClick","toggleOperationMenu","freezeItem","onMenuItemKeyDown","item","isHandleContextMenuEvent","listenerId","getMenuList","nextProps","name","_this$props","toggleClass","tagName","_jsxs","ButtonDropdown","isOpen","toggle","DropdownToggle","title","gettext","onKeyDown","DropdownMenu","DropdownItem","divider","Dropdown","tag","tabIndex","defaultProps","TreeNodeView","onMouseEnter","isItemFreezed","isShowOperationMenu","isHighlight","onMouseOver","onMouseLeave","onNodeClick","object","node","isDir","_Utils$getUserPermiss","getUserPermission","permission","isCustomPermission","customPermission","_customPermission$per","canPreview","preview","canModify","modify","onLoadToggle","isExpanded","onNodeCollapse","onNodeExpanded","onNodeDragStart","isIEBrower","canDrag","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","onItemMouseDown","button","onItemContextMenu","handleContextClick","getNodeTypeAndIcon","icon","lastIndexOf","suffix","slice","toLowerCase","calculateMenuList","NEW_FOLDER","TextTranslation","NEW_FILE","COPY","MOVE","RENAME","DELETE","OPEN_VIA_CLIENT","userPerm","_Utils$getUserPermiss2","_customPermission$per2","canCreate","create","canDelete","delete","canCopy","copy","push","renderChildren","paddingLeft","hasChildren","currentPath","isNodeMenuShow","path","_Utils$getUserPermiss3","_this$props2","_this$getNodeTypeAndI","hlClass","onMouseDown","draggable","onDragStart","onDragEnter","onDragLeave","onDragOver","onDrop","isLoaded","TreeView","onItemMove","repo","dirent","selectedPath","dragStartNodeData","nodeDirent","nodeParentPath","parentNode","nodeRootPath","JSON","stringify","dataTransfer","effectAllowed","setData","canDrop","persist","isTreeViewDropTipShow","dropEffect","onContainerClick","files","getData","_dragStartNodeData","parse","dropNodeData","isArray","onMoveItems","currentRepoInfo","onItemsMove","getPaths","includes","destRepo","destDirentPath","direntPaths","paths","forEach","some","direntPath","clientX","touches","pageX","clientY","pageY","posX","posY","showMenuConfig","treeData","root","contentClass","WikiMarkdownViewer","getTitlesInfo","titlesInfo","titleDom","querySelectorAll","getAttribute","content","replace","slug","updateTabTitle","headingList","i","offsetTop","onLinkClick","link","href","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","current","scrollTop","titlesLength","changeInlineNode","url","imagePath","isPublicWiki","data","src","RegExp","serviceURL","repoID","test","indexOf","index2","originalPath","pathNormalize","isInternalFileLink","isInternalMarkdownLink","getPathFromInternalMarkdownLink","match","p1","p2","p3","sharedToken","isInternalDirLink","getPathFromInternalDirLink","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isTOCShow","isWiki","MarkdownViewer","showTOC","scriptSource","mediaUrl","markdownContent","links","_this4","_this5","isFileLoading","Loading","contentClassName","onScroll","bind","latestContributor","lastModified","TreeNode","nodeList","setParent","IndexContentViewer","bindClickEvent","removeClickEvent","getLink","getRootNode","deserialize","indexContent","treeRoot","transSlateToTree","setNodePath","parentNodePath","child","slateNodes","parentTreeNode","treeNodes","slateNode","transParagraph","paragraphNode","treeNode","listNode","addChildren","linkNode","textNode","text","FolderItem","_React$Component2","_super2","toggleExpanded","expanded","renderLink","_ref2","_Component","SidePanel","renderIndexView","Fragment","marginTop","renderTreeView","closeSideBar","Logo","onCloseSidePanel","onCloseSide","isTreeDataLoading","indexNode","username","siteRoot","Component","WikiDirListItem","highlight","onDirentClick","joinPath","iconUrl","getDirentIcon","isDesktop","alt","size","mtime_relative","WikiDirListView","direntList","MainPanel","onMenuClick","onEditClick","open","onMainNavBarClick","renderNavPath","split","nodePath","onSearchedClick","errMessage","isViewingFile","pathExist","isDataLoading","isViewFile","isPro","Search","isPublic","placeholder","Notification","Account","moment","lang","Wiki","loadSidePanel","initialPath","hasIndex","loadIndexNode","loadNodeAndParentsByPath","loadWikiData","pythonWrapper","getElementById","removePythonWrapper","fileUrl","encodePath","history","pushState","showDir","seafileAPI","listWikiDir","then","res","tree","addFirstResponseListToNode","dirent_list","getNodeByPath","indexPath","getWikiFileContent","catch","isLoadFailed","dirPath","loadDirentList","showFile","filePath","last_modified","fromNow","latest_contributor","hash","location","replaceState","Dirent","filter","sortDirents","loadTreeNodeByPath","clone","currentNode","addResponseListToNode","isMarkdownFile","getDirName","results","parent_dir","body","removeChild","onConentLinkClick","isWikiInternalMarkdownLink","getPathFromWikiInternalMarkdownLink","isWikiInternalDirLink","getPathFromWikiInternalDirLink","onpopstate","is_dir","treeHelper","expandNode","w","collapseNode","list","buildTree","homePath","MediaQuery","query","Modal","ReactDom"],"sourceRoot":""}